window.__require = function e(t, o, n) { function i(a, l) { if (!o[a]) { if (!t[a]) { var s = a.split("/"); if (s = s[s.length - 1], !t[s]) { var c = "function" == typeof __require && __require; if (!l && c) return c(s, !0); if (r) return r(s, !0); throw new Error("Cannot find module '" + a + "'") } a = s } var p = o[a] = { exports: {} }; t[a][0].call(p.exports, function (e) { return i(t[a][1][e] || e) }, p, p.exports, e, t, o, n) } return o[a].exports } for (var r = "function" == typeof __require && __require, a = 0; a < n.length; a++)i(n[a]); return i }({ AiCtrl: [function (e, t, o) { "use strict"; cc._RF.push(t, "8362bu/c8ZH2qbk5nOZMj9N", "AiCtrl"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../HumanStates/Human"), l = e("../Manager/ConfigManager"), s = e("../Manager/WeaponManager"), c = cc._decorator, p = c.ccclass, u = c.property, d = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.human2 = null, t.isPlayer1 = null, t._weapons = null, t._angle = 0, t._target = null, t._target2 = null, t._self = null, t._pos = new cc.Vec2(0, 0), t._MovePos = new cc.Vec2(0, 0), t.tempV3 = new cc.Vec2(0, 0), t.enemyV3 = new cc.Vec2(0, 0), t.handPos = cc.v2(0, 0), t.handPos2 = cc.v2(0, 0), t.handPos3 = cc.v2(0, 0), t._BigSkillPos = [], t.bigSkillTimer = 0, t.bigSkillNextInterval = 0, t.stopMove = !1, t.skillInvertal = 0, t.actionInvertal = 0, t.actionDt = 0, t.skillDt = 0, t.aiLevel = 1, t.nextAngleDt = 0, t.dangleInvertal = 0, t.dangletosafe = 0, t } return i(t, e), t.prototype.onLoad = function () { this.skillInvertal = 8, this.actionInvertal = 2, this.dangleInvertal = 0, this.actionDt = 2, this.skillDt = 0, this.nextAngleDt = 3, this.bigSkillTimer = 0, this.bigSkillNextInterval = this._randBigInterval() }, t.prototype.setWeapons = function (e) { this._weapons = e }, t.prototype.sethuman = function (e) { this.human2 = e }, t.prototype.setTarget = function (e) { this._target = e.getChildByName("body"), this._self = this.node.getChildByName("body") }, t.prototype.setTarget2 = function (e) { this._target2 = e.getChildByName("body") }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.getAngle = function (e) { var t = new cc.Vec2(0, 0); return Math.atan2(e.y - t.y, e.x - t.x) * (180 / Math.PI) }, t.prototype.getHeadToGround = function () { var e = null; e = this.node.getChildByName("head").getComponent(cc.RigidBody).getWorldPosition(e); var t = cc.director.getPhysicsManager().rayCast(e, cc.v2(e.x, 2 * -cc.winSize.height), cc.RayCastType.All), o = null; if (t) for (var n = 0; n < t.length; n++) { var i = t[n]; if ("ground" == i.collider.node.group) { var r = null; e.y >= i.point.y && (r = e.y - i.point.y, o = null == o ? r : Math.min(o, r)) } } return o }, t.prototype.changeAngle = function () { if (null != this._target && this.human2 && this._weapons) { this.stopMove = !0, this.node.convertToWorldSpaceAR(this._self.getPosition(), this.tempV3); var e = this._target.getPosition(), t = new cc.Vec2(0, 0); cc.Vec2.random(t, 1e3), e.addSelf(t), this._target.parent.convertToWorldSpaceAR(e, this.enemyV3), cc.Vec2.subtract(this._MovePos, this.enemyV3, this.tempV3); var o = this.getAngle(this._MovePos), n = cc.v2(0, 0), i = cc.v2(0, 0), r = cc.v2(0, 0); 9 == this.aiLevel ? this._angle = o : 5 == this.aiLevel ? (o >= -30 && o < 30 ? o = 0 : o >= 30 && o < 60 ? o = 45 : o >= 60 && o < 120 ? o = 90 : o >= 120 && o < 150 ? o = 135 : o >= 150 && o <= 180 ? o = -180 : o >= -180 && o <= -150 ? o = -180 : o >= -150 && o <= -120 ? o = -135 : o >= -120 && o <= -60 ? o = -90 : o >= -60 && o <= -30 && (o = -45), this._angle = o) : 1 == this.aiLevel && (Math.random() > .9 && (this._angle = o), this._angle = o); var a = o + 25, l = o - 25, s = this.getRadianByAngle(o), c = this.getRadianByAngle(a), p = this.getRadianByAngle(l); n = cc.v2(200 * Math.cos(s), 200 * Math.sin(s)).normalize(), i = cc.v2(200 * Math.cos(c), 200 * Math.sin(c)).normalize(), r = cc.v2(200 * Math.cos(p), 200 * Math.sin(p)).normalize(), n.x > 0 ? (this.human2 && this.human2.ChangeFootAngel(!0), this._weapons.isGun && this._weapons.ChangeAc(!0)) : n.x < 0 && (this.human2 && this.human2.ChangeFootAngel(!1), this._weapons.isGun && this._weapons.ChangeAc(!1)), this._angle = o, this.handPos = n, this.handPos2 = i, this.handPos3 = r } else this.stopMove = !1 }, t.prototype.checkHasGround = function () { var e = this._angle, t = this.getRadianByAngle(e), o = cc.v2(200 * Math.cos(t), 200 * Math.sin(t)).normalize(), n = this._self.parent.convertToWorldSpaceAR(this._self.getPosition()); n.addSelf(cc.v2(n.x + 80 * o.x, n.y - 150)); var i = cc.find("Canvas").getComponentsInChildren(cc.Collider), r = !0; return i.forEach(function (e) { var t = null; t = e.node.parent ? e.node.parent : cc.find("Canvas"); var o = e.node, i = new cc.Vec2(0, 0); t.convertToWorldSpaceAR(o.getPosition(), i); var a = o.width / 2, l = o.height / 2; r || n.x <= i.x + a && n.x >= i.x - a && n.y <= i.y + l && n.y >= i.y - l && (r = !1) }), r }, t.prototype.getHeadTow = function () { var e = null; e = this.node.getChildByName("head").getComponent(cc.RigidBody).getWorldPosition(e); var t = cc.director.getPhysicsManager().rayCast(e, cc.v2(e.x, 2 * -cc.winSize.height), cc.RayCastType.All), o = null, n = null, i = !1; if (t) for (var r = 0; r < t.length; r++) { var a = t[r]; if ("water" == a.collider.node.group) { var l = null; e.y >= a.point.y && (l = e.y - a.point.y, null == o && (o = l, i = !0)) } "ground" == a.collider.node.group && (l = null, e.y >= a.point.y && (l = e.y - a.point.y, n = null == n ? l : Math.min(n, l))) } return i && (i = null != o && !(o > n)), i }, t.prototype.checkPos = function (e) { if (null != this._target && this.human2 && this._weapons) { var t = this._angle, o = this.getHeadToGround(); if (this.checkHasGround() && this.dangleInvertal >= 2 && (t > 0 ? t > 90 ? t -= 90 : t += 90 : t > -90 ? t -= 90 : t += 90, this.dangleInvertal = 0), this.getHeadTow()) { this.node.convertToWorldSpaceAR(this._self.getPosition(), this.tempV3); var n = this._target.getPosition(); this._target.parent.convertToWorldSpaceAR(n, this.enemyV3), cc.Vec2.subtract(this._MovePos, this.enemyV3, this.tempV3), (t = Math.abs(this.getAngle(this._MovePos))) < 80 ? t = 80 : t > 100 && (t = 100), this._angle = t } else if (o > 800 && !this.getHeadTow() && this.dangletosafe >= 2) { this.dangletosafe = 0, this.node.convertToWorldSpaceAR(this._self.getPosition(), this.tempV3), n = this._target.getPosition(); var i = new cc.Vec2(0, 0); cc.Vec2.random(i, 500), n.addSelf(i), this._target.parent.convertToWorldSpaceAR(n, this.enemyV3), cc.Vec2.subtract(this._MovePos, this.enemyV3, this.tempV3), t = Math.floor(this.getAngle(this._MovePos)), this._angle = t } var r = t + 25, a = t - 25, l = this.getRadianByAngle(t), s = this.getRadianByAngle(r), c = this.getRadianByAngle(a), p = cc.v2(200 * Math.cos(l), 200 * Math.sin(l)).normalize(), u = cc.v2(200 * Math.cos(s), 200 * Math.sin(s)).normalize(), d = cc.v2(200 * Math.cos(c), 200 * Math.sin(c)).normalize(); p.x > 0 ? (this.human2 && this.human2.ChangeFootAngel(!0), this._weapons.isGun && this._weapons.ChangeAc(!0)) : p.x < 0 && (this.human2 && this.human2.ChangeFootAngel(!1), this._weapons.isGun && this._weapons.ChangeAc(!1)), this._angle = t, this.handPos = p, this.handPos2 = u, this.handPos3 = d, e && (this._weapons.isGun || this._weapons.isHarp ? this._weapons.MotionStrakAtk(this.handPos, this.handPos2, this.handPos3) : this._weapons.MotionStrakAtk(this.handPos)) } else this.stopMove = !1 }, t.prototype._areHandPositionsSet = function () { return [this.handPos, this.handPos2, this.handPos3].every(function (e) { return e && (0 !== e.x || 0 !== e.y) }) }, t.prototype._getBigPos = function (e, t) { var o = cc.v2(0, 0), n = cc.v2(0, 0), i = cc.v2(0, 0), r = cc.v2(0, 0), a = cc.v2(0, 0), l = cc.v2(0, 0), s = e + 50, c = e + 30, p = e + 10, u = e - 10, d = e - 30, h = e - 50, g = this.getRadianByAngle(s), f = this.getRadianByAngle(c), y = this.getRadianByAngle(p), m = this.getRadianByAngle(u), v = this.getRadianByAngle(d), _ = this.getRadianByAngle(h); return o = cc.v2(Math.cos(g) * t, Math.sin(g) * t).normalize(), n = cc.v2(Math.cos(f) * t, Math.sin(f) * t).normalize(), i = cc.v2(Math.cos(y) * t, Math.sin(y) * t).normalize(), r = cc.v2(Math.cos(m) * t, Math.sin(m) * t).normalize(), a = cc.v2(Math.cos(v) * t, Math.sin(v) * t).normalize(), l = cc.v2(Math.cos(_) * t, Math.sin(_) * t).normalize(), this._BigSkillPos[0] = o, this._BigSkillPos[1] = n, this._BigSkillPos[2] = i, this._BigSkillPos[3] = r, this._BigSkillPos[4] = a, this._BigSkillPos[5] = l, this._BigSkillPos }, t.prototype._getAcePos = function () { var e = this._angle, t = cc.v2(0, 0), o = cc.v2(0, 0), n = cc.v2(0, 0), i = e + 30, r = e - 30, a = this.getRadianByAngle(i), l = this.getRadianByAngle(r), s = this.getRadianByAngle(e); return o = cc.v2(200 * Math.cos(a), 200 * Math.sin(a)).normalize(), n = cc.v2(200 * Math.cos(l), 200 * Math.sin(l)).normalize(), t = cc.v2(200 * Math.cos(s), 200 * Math.sin(s)).normalize(), this.handPos = t, this.handPos2 = o, this.handPos3 = n, [this.handPos, this.handPos2, this.handPos3] }, t.prototype._randBigInterval = function () { return 8 + 4 * Math.random() }, t.prototype._useBigSkill = function () { if (this._weapons) if (this._weapons.EndSkillType == s.WeaponsSkillType.Melee) { var e = this._areHandPositionsSet() ? [this.handPos, this.handPos2, this.handPos3] : this._getAcePos(); this._weapons.BigDamage(e) } else e = this._getBigPos(this._angle, 200), this._weapons.BigDamage(e) }, t.prototype.lateUpdate = function (e) { if (this.node.isValid && !cc.find("Canvas/MainView/StartView").active && l.gameConfig.gameStart) { this.actionDt += e, this.skillDt += e, this.nextAngleDt += e, this.dangleInvertal < 3 && (this.dangleInvertal += e), this.dangletosafe < 2 && (this.dangletosafe += e), this.nextAngleDt >= 3 && (this.nextAngleDt = 0, this.changeAngle()), this.skillDt >= this.skillInvertal ? (this.skillDt = 0, this.checkPos(!0)) : this.checkPos(!1), this.bigSkillTimer += e, this.bigSkillTimer >= this.bigSkillNextInterval && (this.bigSkillTimer = 0, this.bigSkillNextInterval = this._randBigInterval(), l.gameConfig.suverModel || this._useBigSkill()); var t = this._angle; this._weapons.isGun && this.actionDt > this.actionInvertal ? this._weapons.setLimit(this.handPos) : this._weapons.setLimit(), this._weapons.isSniper && this._weapons.setAngle(t), (this._weapons.isFlail || this._weapons.isScies) && this._weapons.setLimit(this.handPos), this.human2 && (t >= 40 && t <= 140 ? this.human2.HumanJump() : (this.human2._jumpProgress = 0, this.human2.JumpLines.active = !1), t >= 80 && t <= 100 ? this.human2.setVec(this.handPos.mul(2e3), 2) : t <= -75 && t >= -105 ? this.human2.setVec(this.handPos.mul(2e3), 3) : this.human2.setVec(this.handPos.mul(3e3), 0)) } }, r([u(a.default)], t.prototype, "human2", void 0), r([p], t) }(cc.Component); o.default = d, cc._RF.pop() }, { "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager" }], AkCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "5c01eMidd5OGZIDehMieCV2", "AkCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.reTeck = !1, t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.bulletNode = null, t.firepoint = null, t } return i(t, e), t.prototype._init = function () { this.isGun = !0, this.effinvertal = .5, this.fly = null, this.fireInverter = 1, this.skillInverter = 2, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.reTeck = !0, this.firepoint = this.node.getChildByName("firepoint") }, t.prototype.setLimit = function () { }, t.prototype.ChangeAc = function (e) { var t = this.node.getComponent(cc.RevoluteJoint); e ? (this.node.scaleX = 1, t.anchor.x = -13.9, t.apply()) : (this.node.scaleX = -1, t.anchor.x = 13.9, t.apply()) }, t.prototype.setBulletNode = function () { this.bulletNode = null }, t.prototype.MotionStrakAtk = function (e) { var t = this; if (null != this.SkillNumber && null == this.fly) { var o = e; this._target.fixedRotation = !0, this.bulletNumber = 0, this.SkillNumber = null, this.fly = !0, this.schedule(function () { t.reTeck = !1 }, .3, 4), this.schedule(function () { t.reTeck = !0, t.bulletNumber++, t.bulletNumber >= 4 && (t.fly = null, t._target.fixedRotation = !1, t.reTeck = !0); var e = t.human.getChildByName("body").getComponent(cc.RigidBody); e.applyLinearImpulse(o.neg().mul(3500), e.getWorldCenter(), !0); var n = l.bulletFactory.getBullet(t.bulletType[0], t.node, t.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(t.node.group, null, t.human), n.setVec(o) }, .3, 4, .1), this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, this._flyV2).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ArbaleteCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "2cf39d25XxH2oXRA0avmcOx", "ArbaleteCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.firepoint = null, t.nd1 = null, t.nd2 = null, t.line = null, t.lineGraphics = null, t.point1Node = null, t.point2Node = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.isGun = !0, this.fly = null, this.fireInverter = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.firepoint = this.node.getChildByName("firepoint"), this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.line = this.node.getChildByName("line"), this.lineGraphics = this.line.getComponent(cc.Graphics), this.point1Node = this.line.getChildByName("point1"), this.point2Node = this.line.getChildByName("point2"), this.AtkFrequency = 0, this.SkillNumber = 0, this.isFire = !1, this.line.active = !0, this.changeSkill(); var e = this.point1Node.getPosition(), t = this.point2Node.getPosition(); this.lineGraphics.clear(), this.lineGraphics.moveTo(e.x, e.y), this.lineGraphics.lineTo(t.x, t.y), this.lineGraphics.stroke() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.nd1.active = !0, 0 == this.SkillNumber ? this.nd1.color = s.weaponColors.red.colors : this.nd1.color = s.weaponColors.purple.colors }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.MotionStrakAtk = function (e) { if (this.isFire = !1, null != this.SkillNumber) { if (0 == this.SkillNumber) { this.nd1.active = !1; var t = e; (o = (n = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO)).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human, this.checkName), o.setVec(t), this.SkillNumber = null } else { this.nd1.active = !1, t = e; var o, n = l.bulletFactory.getBullet(this.bulletType[2], this.firepoint, this.checkName, cc.Vec2.ZERO), i = "bomb1"; "wepaons2" == this.node.group && (i = "bomb2"), (o = n.getChildByName("body").getComponent("BulletBase"))._init(i, this.targetEnemy, this.human), o.setVec(t), this.SkillNumber = null } this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { var e = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO); if (e) { var t = e.getComponent("BulletBase"); t._init(this.node.group, null, this.human), t.setVecP(this._flyV2) } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVecP(o) } }, t.prototype.redLine = function (e) { var t = this.point1Node.getPosition(), o = this.point2Node.getPosition(); this.lineGraphics.clear(), this.lineGraphics.moveTo(t.x, t.y), this.lineGraphics.lineTo(e.x, e.y), this.lineGraphics.lineTo(o.x, o.y), this.lineGraphics.stroke() }, t.prototype.update = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire) { this.nd2.active || (this.nd2.active = !0), this.fireInverter += e; var t = this.fireInverter / 1.5 * 60 - 15; this.redLine(cc.v2(t, 0)), this.nd2.opacity = this.fireInverter / 1.5 * 255, this.fireInverter > 1.5 && (this.fireInverter = 0, this._fire()) } else this.nd2.active && (this.nd2.active = !1) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ArcCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "05fefiKN0tJwYoiT4h0W6a2", "ArcCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.reTeck = !1, t.effinvertal = .5, t.firepoint = null, t.bgNode = null, t.lineNode = null, t.lineGraphics = null, t.point1Node = null, t.point2Node = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.isGun = !0, this.fly = null, this.fireInverter = 0, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.firepoint = this.node.getChildByName("firepoint"), this.bgNode = this.node.getChildByName("bg"), this.lineNode = this.node.getChildByName("line"), this.lineGraphics = this.lineNode.getComponent(cc.Graphics), this.point1Node = this.node.getChildByName("point1"), this.point2Node = this.node.getChildByName("point2"), this.AtkFrequency = 0, this.SkillNumber = 0, this.isFire = !1, this.reTeck = !0, this.lineNode.active = !0; var e = this.point1Node.getPosition(), t = this.point2Node.getPosition(); this.lineGraphics.clear(), this.lineGraphics.moveTo(e.x, e.y), this.lineGraphics.lineTo(t.x, t.y), this.lineGraphics.stroke() }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.MotionStrakAtk = function (e) { if (this.isFire = !1, null != this.SkillNumber && null == this.fly) { var t = e; this._target.fixedRotation = !0, this.SkillNumber = null, this.fly = !0, this.fly = null, this._target.fixedRotation = !1, this.reTeck = !0; var o = this.human.getChildByName("body").getComponent(cc.RigidBody); o.applyLinearImpulse(t.neg().mul(3500), o.getWorldCenter(), !0); var n = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(t), this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { var e = this.human.getChildByName("body").getComponent(cc.RigidBody); e.applyLinearImpulse(this._flyV2.neg().mul(3500), e.getWorldCenter(), !0); var t = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO); if (t) { var o = t.getComponent("BulletBase"); o._init(this.node.group, null, this.human), o.setVec(this._flyV2), this._target.fixedRotation = !1 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.reLine = function () { var e = this.lineGraphics, t = this.point1Node.getPosition(), o = this.point2Node.getPosition(), n = this.human.getChildByName("handL"), i = this.human.convertToWorldSpaceAR(n.getPosition()), r = this.node.convertToNodeSpaceAR(i); this.reTeck ? (e.clear(), e.moveTo(t.x, t.y), e.lineTo(o.x, o.y), e.stroke()) : (e.clear(), e.moveTo(t.x, t.y), e.lineTo(r.x, r.y), e.lineTo(o.x, o.y), e.stroke(), n.getComponent(cc.RigidBody).applyTorque(3, !0)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire && null === this.fly ? (this.fireInverter += e, this.fireInverter > 1.9 && (this.reTeck = !1, this._target.fixedRotation = !0), this.fireInverter > 2 && (this.reTeck = !0, this.fireInverter = 0, this._fire())) : this.reTeck = !0, this.reLine() }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ArenaView: [function (e, t, o) { "use strict"; cc._RF.push(t, "211778bNKJImrJ0U1+EyHUM", "ArenaView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/localConfig"), s = e("../Manager/UserProfile"), c = e("../Manager/WeaponManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.loadNd = null, t.Player1 = null, t.Player2 = null, t.Player1Weapon = null, t.Player2Weapon = null, t.Player1Present = null, t.Player2Present = null, t.strScene = "", t } return i(t, e), t.prototype.onLoad = function () { cc.winSize.width / cc.winSize.height < 1.65 && (this.node.scale = .7) }, t.prototype.start = function () { var e = this; this.strScene = a.gameConfig.SceneStr, this.initHuman1(), this.initHuman2(), this.loadRun(), this.scheduleOnce(function () { e.finishLoad() }, 1.5), this.scheduleOnce(function () { e.startFight() }, 3) }, t.prototype.finishLoad = function () { this.loadNd.active = !1, this.node.getChildByName("Title").active = !1, this.node.getChildByName("VS").active = !0, this.Player2.parent.active = !0 }, t.prototype.startFight = function () { cc.director.loadScene(this.strScene) }, t.prototype.loadWeapon = function (e, t) { var o = "random"; "random" != e && (o = c.weaponConfig[e].prefabName), cc.assetManager.getBundle("prefabs").load("weaponsIcons/" + o, cc.Prefab, function (e, o) { cc.instantiate(o).parent = t }) }, t.prototype.loadRun = function () { cc.tween(this.loadNd).repeatForever(cc.tween().by(5, { angle: 360 })).start() }, t.prototype.initHuman1 = function () { var e = s.userProfile.data.weapons1, t = this.Player1.getChildByName("WeaponsName").getChildByName("name").getComponent(cc.Label); if (e) { this.loadWeapon(e, this.Player1Weapon); var o = l.localConfig.instance.queryByID("locs", c.weaponConfig[e].prefabName); t.string = o[a.gameConfig.lang] } else t.string = "???", this.loadWeapon("random", this.Player1Weapon); var n = s.userProfile.data.skins1; n && this.applySkin(this.Player1, this.Player1Present, n); var i = s.userProfile.data.Allcolor1; i && this.applyColor(this.Player1, i); var r = s.userProfile.data.playerName; r && (this.Player1.getChildByName("Nickname").getChildByName("name").getComponent(cc.Label).string = r) }, t.prototype.initHuman2 = function () { var e = s.userProfile.data.weapons2, t = this.Player2.getChildByName("WeaponsName").getChildByName("name").getComponent(cc.Label); if (e) { var o = "allBlue_" + e.split("_")[1]; this.loadWeapon(o, this.Player2Weapon); var n = l.localConfig.instance.queryByID("locs", c.weaponConfig[o].prefabName); t.string = n[a.gameConfig.lang] } else t.string = "???", this.loadWeapon("random", this.Player2Weapon); var i = s.userProfile.data.skins2; i && this.applySkin(this.Player2, this.Player2Present, i); var r = s.userProfile.data.Allcolor2; r && this.applyColor(this.Player2, r); var p = s.userProfile.data.enemyName; p && (this.Player2.getChildByName("Nickname").getChildByName("name").getComponent(cc.Label).string = p) }, t.prototype.applySkin = function (e, t, o) { var n = t.getChildByName("Center"); n.active = !0, n.getComponent(cc.Sprite).spriteFrame = a.gameConfig.AllSkins.getSpriteFrame(o) }, t.prototype.applyColor = function (e, t) { e.getChildByName("human").children.forEach(function (e) { if ("present" != e.name) { var o = new cc.Color; o._val = t._val, e.color = o, e.children.length > 0 && e.children.forEach(function (e) { e.color = o }) } }), e.active = !0 }, r([d(cc.Node)], t.prototype, "loadNd", void 0), r([d(cc.Node)], t.prototype, "Player1", void 0), r([d(cc.Node)], t.prototype, "Player2", void 0), r([d(cc.Node)], t.prototype, "Player1Weapon", void 0), r([d(cc.Node)], t.prototype, "Player2Weapon", void 0), r([d(cc.Node)], t.prototype, "Player1Present", void 0), r([d(cc.Node)], t.prototype, "Player2Present", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../Manager/WeaponManager": "WeaponManager", "../Manager/localConfig": "localConfig" }], ArmCannon: [function (e, t, o) { "use strict"; cc._RF.push(t, "9dedefLCYNEhqDAn0117DM5", "ArmCannon"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.reTeck = !1, t.isCannonFire = !1, t.firepoint = null, t.nd1 = null, t.rond = null, t.fireNd = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.isGun = !0, this.fly = null, this.fireInverter = 0, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.AtkFrequency = 0, this.isFire = !1, this.reTeck = !0, this.firepoint = this.node.getChildByName("firepoint"), this.nd1 = this.node.getChildByName("1"), this.rond = this.node.getChildByName("rond"), this.fireNd = this.node.getChildByName("fire"), this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.nd1.active = !0, this.nd1.color = s.weaponColors.green.colors }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.MotionStrakAtk = function (e) { if (this.isFire = !1, null != this.SkillNumber) { if (0 == this.SkillNumber) this._flyV2 = e, this.isCannonFire = !0, this._target.fixedRotation = !0; else { this.nd1.active = !1; var t = e, o = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); o._init(this.node.group, this.targetEnemy, this.human), o.setVec(t) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { var e = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO); if (e) { var t = e.getComponent("BulletBase"); t._init(this.node.group, null, this.human, null, !0), t.setVec(this._flyV2) } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human, null, !0), n.setVec(o) } }, t.prototype._fireCannon = function () { var e = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); e._init(this.node.group, null, this.human), e.setVec(this._flyV2), this._target.fixedRotation = !1 }, t.prototype.update = function (e) { var t = this; this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire && (this.fireInverter += e, this.fireInverter > 1.5 && (this.fireInverter = 0, this._fire())), this.isCannonFire && (this.isCannonFire = !1, cc.tween(this.rond).set({ scale: 0, active: !0 }).to(.5, { scale: 0 }).call(function () { t.nd1.active = !1, t.rond.active = !1, t.fireNd.active = !0, t.fireNd.getComponent(cc.ParticleSystem).resetSystem(), t._fireCannon() }).union().start()) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], Arrows: [function (e, t, o) { "use strict"; cc._RF.push(t, "c91eaDR0HdAU7mL8/J8T/iE", "Arrows"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/EffectManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = e("../Manager/ConfigManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this.activeTimer = 0, o ? this.user = o : this.node.group = e, this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.node.angle = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1500 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.setVecP = function (e) { null == this.fly && (this.node.angle = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(2e3 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.contactHuman = function (e, t, o) { var n = e.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.damageInverter = 0, e.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), s.effectManager.playEffect(t, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(o, this.node)) }, t.prototype.contactWeapon = function (e, t) { this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, s.effectManager.playEffect(e, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(t, this.node) }, t.prototype.onBeginContact = function (e, t, o) { var n = o.node, i = t.node.group, r = n.group; "weapons1" == i ? u.gameConfig.suverModel ? "suverenemy" == r ? this.contactHuman(n, s.EffectType.smallBoom, c.BulletType.arrows) : "default" != r && "water" != r && "ground" != r && "suverweapon" != r || this.contactWeapon(s.EffectType.smallBoom, c.BulletType.arrows) : "player2" == r ? this.contactHuman(n, s.EffectType.playerWeaponHit, c.BulletType.arrows) : "default" != r && "water" != r && "ground" != r && "rebound2" != r && "weapons2" != r || "lancespear" != n.name && "lancespear2" != n.name && this.contactWeapon(s.EffectType.playerWeaponHit, c.BulletType.arrows) : "weapons2" == i && (u.gameConfig.suverModel ? "suverenemy" == r ? this.contactHuman(n, s.EffectType.smallBoom, c.BulletType.arrows2) : "default" != r && "water" != r && "ground" != r && "suverweapon" != r || this.contactWeapon(s.EffectType.smallBoom, c.BulletType.arrows2) : "player1" == r ? this.contactHuman(n, s.EffectType.playerWeaponHit, c.BulletType.arrows2) : "default" != r && "water" != r && "ground" != r && "rebound1" != r && "weapons1" != r || "lancespear" != n.name && "lancespear2" != n.name && this.contactWeapon(s.EffectType.playerWeaponHit, c.BulletType.arrows2)) }, t.prototype.start = function () { }, t.prototype.getAngle = function () { var e = cc.v2(0, 0), t = this._rigidBody.linearVelocity.normalize().mul(100), o = Math.atan2(t.y - e.y, t.x - e.x) * (180 / Math.PI); o < 0 && (o += 360), this.node.angle = o }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), this.getAngle(), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this._rigidBody.applyForce(this._rigidBody.linearVelocity.mul(100), this._rigidBody.getWorldCenter(), !0), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, "weapons1" == this.node.group ? l.bulletFactory.putBullet(c.BulletType.arrows, this.node) : l.bulletFactory.putBullet(c.BulletType.arrows2, this.node)), this.activeTimer += e, this.activeTimer >= 4 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([h], t) }(p.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], AtkBuff: [function (e, t, o) { "use strict"; cc._RF.push(t, "2eec94aPnBPq5nFcnMuENiZ", "AtkBuff"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Utils/Utils"), l = cc._decorator, s = l.ccclass, c = l.property, p = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.particalNode = null, t.addNumber = null, t } return i(t, e), t.prototype.onEnable = function () { this.addNumber = .5 }, t.prototype.onDisable = function () { this.addNumber = null, this.node.destroyAllChildren() }, t.prototype.addP = function () { var e = cc.instantiate(this.particalNode); e.parent = this.node; var t = a.RandomRangeInt(-this.node.width / 2, this.node.width / 2); e.setPosition(cc.v2(t, 0)), cc.tween(e).set({ position: cc.v3(t, -this.node.height / 2, 0), scale: 1 }).to(Math.random() + .5, { position: cc.v3(t, this.node.height / 2, 0), scale: 0 }).call(function () { e && e.isValid && e.destroy() }).union().start() }, t.prototype.update = function (e) { null != this.addNumber && (this.addNumber += e, this.addNumber >= .2 && (this.addNumber = 0, this.addP())) }, r([c(cc.Prefab)], t.prototype, "particalNode", void 0), r([s], t) }(cc.Component); o.default = p, cc._RF.pop() }, { "../Utils/Utils": "Utils" }], AudioManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "da118Mzc55BdL0zl0gviNXU", "AudioManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.audioManager = void 0; var i = cc._decorator, r = i.ccclass, a = (i.property, function () { function e() { this._audios = new Map } return e.prototype.preloadMenuMusic = function () { var e = this; return this.bundle = cc.assetManager.getBundle("res"), new Promise(function (t) { e.bundle.loadDir("MenuAudios/", cc.AudioClip, function (o, n) { o ? console.error(o) : (n.forEach(function (t) { e._audios.set(t.name, t) }), t(!0)) }) }) }, e.prototype.preloadAudioClip = function () { var e = this; return this.bundle = cc.assetManager.getBundle("res"), new Promise(function (t) { e.bundle.loadDir("audios/", cc.AudioClip, function (o, n) { o ? console.error(o) : (n.forEach(function (t) { e._audios.set(t.name, t) }), t(!0)) }) }) }, e.prototype.playMusic = function (e, t) { var o = this, n = function (e) { cc.audioEngine.stopMusic(), (0 == t || t) && cc.audioEngine.setMusicVolume(t), cc.audioEngine.playMusic(e, !0) }; this._audios.has(e) ? n(this._audios.get(e)) : this.bundle.load("audios/" + e, cc.AudioClip, function (t, i) { t || (o._audios.set(e, i), n(i)) }) }, e.prototype.playEffect = function (e, t) { var o = this, n = function (e) { t && cc.audioEngine.setEffectsVolume(t), cc.audioEngine.playEffect(e, !1) }; this._audios.has(e) ? n(this._audios.get(e)) : this.bundle.load("audios/" + e, cc.AudioClip, function (t, i) { t || (o._audios.set(e, i), n(i)) }) }, e.prototype.pauseMusics = function () { cc.audioEngine.pauseMusic() }, e.prototype.resumeMusics = function () { cc.audioEngine.resumeMusic() }, e.prototype.setAudioVolume = function (e) { cc.audioEngine.setMusicVolume(e) }, e.prototype.setEffectVolume = function (e, t) { void 0 === t && (t = !1), cc.audioEngine.setEffectsVolume(e) }, n([r], e) }()); o.default = a, o.audioManager = new a, cc._RF.pop() }, {}], AudioView: [function (e, t, o) { "use strict"; cc._RF.push(t, "94b1bsv+oROCps1Tn3UaBaT", "AudioView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/UserProfile"), l = e("../Manager/AudioManager"), s = cc._decorator, c = s.ccclass, p = s.property, u = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.musicSprite = null, t.musicOn = null, t.musicOff = null, t.popupNode = null, t.popupCredits = null, t } return i(t, e), t.prototype.onLoad = function () { a.userProfile.data.audioNumber >= .5 ? this.musicSprite.spriteFrame = this.musicOn : this.musicSprite.spriteFrame = this.musicOff }, t.prototype.OnMusicBtn = function () { a.userProfile.data.audioNumber >= .5 ? (a.userProfile.data.audioNumber = 0, l.audioManager.setAudioVolume(0), l.audioManager.setEffectVolume(0), this.musicSprite.spriteFrame = this.musicOff) : (a.userProfile.data.audioNumber = .5, l.audioManager.setAudioVolume(.5), l.audioManager.setEffectVolume(.5), this.musicSprite.spriteFrame = this.musicOn) }, t.prototype.onBtnCredits = function () { this.popupCredits.active = !0, this.popupNode.active = !1 }, t.prototype.onBtnBack = function () { this.popupCredits.active = !1, this.popupNode.active = !0 }, t.prototype.onBtnPrivacy = function () { cc.sys.openURL("https://easy-cats.github.io/privacy.html") }, t.prototype.start = function () { }, t.prototype.CloseView = function () { l.audioManager.playEffect("click"), this.node.destroy() }, r([p(cc.Sprite)], t.prototype, "musicSprite", void 0), r([p(cc.SpriteFrame)], t.prototype, "musicOn", void 0), r([p(cc.SpriteFrame)], t.prototype, "musicOff", void 0), r([p(cc.Node)], t.prototype, "popupNode", void 0), r([p(cc.Node)], t.prototype, "popupCredits", void 0), r([c], t) }(cc.Component); o.default = u, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/UserProfile": "UserProfile" }], AxeCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "7cbc6mhxvZAe6rJZ6RuyduV", "AxeCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._flyV2 = null, t.AtkFrequency = 0, t.selfGroup = null, t.targetGroup = null, t.betweenDis = 0, t.checkState = !1, t.checkTimer = 0, t.checkInveter = 0, t.isSkills = !1, t.nd1 = null, t.polygon = null, t } return i(t, e), t.prototype._init = function () { this.skillInverter = 4.5, this.isSkills = null, this.checkState = !1, this.checkTimer = 0, this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this.selfGroup = this.node.group, this.nd1 = this.node.getChildByName("1"), "weapons1" == this.node.group ? this.targetGroup = "rebound1" : this.targetGroup = "rebound2", this.nd1.color = s.weaponColors.blue.colors, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.polygon = this.node.getComponent(cc.PhysicsPolygonCollider), this.changeSkill() }, t.prototype.changeSkill = function () { this.SkillNumber = 0, this.nd1.color = s.weaponColors.blue.colors }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && null != this.SkillNumber && (this.nd1.color = cc.Color.WHITE, this.node.group = this.targetGroup, this.polygon.density = 20, this.polygon.apply(), this.betweenDis = 0, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fly = !0, this.SkillNumber = null, this.isSkills = !1, this.attackProgress = 0) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.onBeginContact = function (e, t, o) { if (this.isSkills) { this.checkInveter = 1, this.checkState = !0, this.checkTimer = 0; var n = c.EffectType.smallBoom; c.effectManager.playEffect(n, this.nd1.getPosition(), this.node), this.isSkills = null, this.betweenDis = 2.8, l.audioManager.playEffect("explosion") } else { var i = e.getWorldManifold(), r = o.node; s.gameConfig.suverModel ? "suverenemy" == r.group ? this.contactHuman(r, i) : "suverweapon" == r.group && i.points[0] && this.contactWeapon(r, i, t) : "weapons1" == t.node.group ? "player2" == r.group ? this.contactHuman(r, i) : "weapons2" == r.group && i.points[0] && this.contactWeapon(r, i, t) : "weapons2" == t.node.group && ("player1" == r.group ? this.contactHuman(r, i) : "weapons1" == r.group && i.points[0] && this.contactWeapon(r, i, t)) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.processHuman = function (e) { this.checkInveter >= .1 && (this.checkInveter = 0, e.getComponent(a.default).setDamage(this.Atk[0], !0)) }, t.prototype.processImpulse = function (e, t) { e.applyLinearImpulse(t.normalize().mul(400 * e.getMass()), e.getWorldCenter(), !0) }, t.prototype.CheckHuman = function () { var e = this, t = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (o) { var n = null; n = o.node.parent ? o.node.parent : cc.find("Canvas"); var i = o.node, r = cc.Vec2.ZERO; n.convertToWorldSpaceAR(i.getPosition(), r); var l = cc.Vec2.distance(t, r), c = cc.Vec2.ZERO; if (cc.Vec2.subtract(c, r, t), l <= 400) if (s.gameConfig.suverModel) { var p = n.group; n.getComponent(a.default) && "suverenemy" == p && e.processHuman(n) } else p = o.node.group, "axe2" == e.node.name ? (n.getComponent(a.default) && "player1" == p && e.processHuman(n), "rebound1" != p && "bomb1" != p && "ground" != p && "player2" != p && "weapons2" != p && e.processImpulse(o, c)) : (n.getComponent(a.default) && "player2" == p && e.processHuman(n), "rebound1" != p && "bomb2" != p && "ground" != p && "player1" != p && "weapons1" != p && e.processImpulse(o, c)) }) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.checkInveter < .1 && (this.checkInveter += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, null != this.fly && (this.betweenDis += e, this.betweenDis <= .1 ? (this.node.angle % 360 <= 15 && this.node.angle % 360 >= -15 ? this._rigidBody.angularVelocity = 0 : this.node.angle % 360 > 15 ? this._rigidBody.applyTorque(-1e6, !0) : this.node.angle % 360 < -15 && this._rigidBody.applyTorque(1e6, !0), this._rigidBody.applyForceToCenter(cc.Vec2.UP.mul(2e6 * (.5 - this.betweenDis)), !0)) : (this.node.angle = 0, this._rigidBody.angularVelocity = 0, this._rigidBody.applyForceToCenter(cc.Vec2.UP.neg().mul(8e5 * (this.betweenDis - .5)), !0)), 0 == this.isSkills && this.betweenDis >= 1 && (this.isSkills = !0), this.betweenDis >= 3 && (this.fly = null, this.betweenDis = 0, this.node.group = this.selfGroup, this.polygon.density = .01, this.polygon.apply(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0)), this.checkState && (this.checkTimer += e, this.CheckHuman(), this.checkTimer >= .5 && (this.checkState = !1, this.checkTimer = 0)) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], BallScale: [function (e, t, o) { "use strict"; cc._RF.push(t, "08bdfmEtwxPJqM618D5NFmw", "BallScale"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onEnable = function () { cc.tween(this.node).repeatForever(cc.tween(this.node).set({ scale: 1 }).to(.2, { scale: .5 }).to(.2, { scale: 1 }).union().start()).union().start() }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], BananaBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "4d999dr0Z1DKbFjesZf/8nR", "BananaBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../HumanStates/Human"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isdown = !1, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.isBoomTimers = null, t.effinvertal = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.group = e, this.node.getComponent(cc.PhysicsPolygonCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 1, this.effinvertal = .5, this.targetEnemy = t, this.isBoom = !1 }, t.prototype.setVec = function (e) { null == this.fly && (this.isdown = !1, this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(1300), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { if ("bomb1" == t.node.group) { var n = e.getWorldManifold(); if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); this.damageInverter >= 1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), o.node.parent && o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).bananaFly(), this.isdown = !0, this.isBoom = !0) } else "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))); else "player2" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), this.targetEnemy ? this.targetEnemy.getComponent(l.default).bananaFly() : o.node.parent && o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).bananaFly(), this.isdown = !0, this.isBoom = !0)) : "weapons2" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))) } else "bomb2" == t.node.group && (n = e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), o.node.parent && o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).bananaFly(), this.isdown = !0, this.isBoom = !0)) : "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))) : "player1" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (o.node.parent.getComponent(a.default).setDamage(this.Atk), this.damageInverter = 0, i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), this.targetEnemy ? this.targetEnemy.getComponent(l.default).bananaFly() : o.node.parent && o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).bananaFly(), this.isdown = !0, this.isBoom = !0)) : "weapons1" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)))) }, t.prototype.update = function (e) { this.node.parent.isValid && (this.damageInverter < 1 && (this.damageInverter += e), this.effinvertal < .5 && (this.effinvertal += e), this.isdown && (this.isTimer += e, this.isTimer >= 1.5 && (this.isdown = !1, this.node.destroy()))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./BulletBase": "BulletBase" }], BananazookaCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "d1fd9+aHB9G4K1TZ0CqAN+H", "BananazookaCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.bulletNode = null, t.firepoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.fireInverter = 1, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.isFire = !1, this.firepoint = this.node.getChildByName("firepoint") }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.ChangeAc = function (e) { var t = this.node.getComponent(cc.RevoluteJoint); e ? (this.node.scaleX = 1, t.anchor.x = -13.9, t.apply()) : (this.node.scaleX = -1, t.anchor.x = 13.9, t.apply()) }, t.prototype.setBulletNode = function () { this.bulletNode = null }, t.prototype.MotionStrakAtk = function (e) { if (this.isFire = !1, null != this.SkillNumber && null == this.fly) { null != this.bulletNode && this.bulletNode.destroy(); var t = "bomb1"; "weapons2" == this.node.group && (t = "bomb2"); var o = this.human.getChildByName("body").getComponent(cc.RigidBody); o.applyLinearImpulse(e.neg().mul(9e3), o.getWorldCenter(), !0), this.bulletNode = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO); var n = this.bulletNode.getComponent("BulletBase"); n._init(t, this.targetEnemy, this.human), n.setVec(e), this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { var e = this.human.getChildByName("body").getComponent(cc.RigidBody); e.applyLinearImpulse(this._flyV2.neg().mul(3e3), e.getWorldCenter(), !0); var t = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, this._flyV2); if (t) { var o = t.getComponent("BulletBase"); o._init(this.node.group, null, this.human), o.setVec(this._flyV2) } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, this._flyV2).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire && (this.fireInverter += e, this.fireInverter > 1 && (this.fireInverter = 0, this._fire())) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], BatonCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "0b00avJTP9IH4W/qFSvlkY3", "BatonCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.jumpInverter = 0, t.lastGroup = null, t.upStates = null, t.scaleRun = !1, t.jumpTimers = 0, t.scaleTimers = 0, t.box = null, t.revolute = null, t } return i(t, e), t.prototype._init = function () { this.upStates = null, this.lastGroup = this.node.group, this.isScies = !0, this.effinvertal = .5, this.AtkFrequency = 0, this.jumpInverter = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.node.color = s.weaponColors.yellow.colors, this.scaleTimers = 0, this.jumpTimers = 0, this.scaleRun = !1, this.SkillNumber = 0, this.box = this.node.getComponent(cc.PhysicsBoxCollider), this.revolute = this.node.getComponent(cc.RevoluteJoint), this.attackProgress = 1 }, t.prototype.setLimit = function (e) { e && (this._rigidBody.linearVelocity = e.mul(200)) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.MotionStrakAtk = function () { if (null == this.fly && null != this.SkillNumber) { this.upStates = !0, this.node.color = cc.Color.WHITE, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._rigidBody.fixedRotation = !0; var e = "rebound1"; "weapons2" == this.node.group && (e = "rebound2"), this.node.group = e, this.box.density = 1, this.box.apply(), this.scaleTimers = 0, this.jumpTimers = 0, this.scaleRun = !1, this.fly = !0, this.attackProgress = 0 } }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node, r = t.node.group, a = i.group, l = "weapons1" == r || "rebound1" == r, c = "weapons2" == r || "rebound2" == r; s.gameConfig.suverModel ? "suverenemy" == a ? this.contactHuman(i, n) : "suverweapon" == a && n.points[0] && this.contactWeapon(i, n, t) : l ? "player2" == a ? this.contactHuman(i, n) : "weapons2" == a && n.points[0] && this.contactWeapon(i, n, t) : c && ("player1" == a ? this.contactHuman(i, n) : "weapons1" == a && n.points[0] && this.contactWeapon(i, n, t)), "rebound1" == r && n.points[0] && "player2" != a && "weapons2" != a ? this.reboundImpulse(t) : "rebound2" == r && n.points[0] && "player1" != a && "weapons1" != a && this.reboundImpulse(t) }, t.prototype.reboundImpulse = function (e) { this.jumpTimers++, this.jumpTimers > 10 && (this.scaleRun = !0); var t = this.node.angle, o = this.getRadianByAngle(t % 360), n = cc.v2(Math.cos(o), Math.sin(o)).normalize(), i = 0 == e.tag ? n.neg().mul(4e4) : n.mul(4e4); this._rigidBody.applyLinearImpulse(i, this._rigidBody.getWorldCenter(), !0) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= .1 && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(3e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.lateUpdate = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < .1 && (this.AtkFrequency += e), this.jumpInverter < .05 && (this.jumpInverter += e), null == this.SkillNumber && (this.skillTimer += e, this.attackProgress = this.skillTimer / 3, this.skillTimer >= 3 && (this.SkillNumber = 0, this.skillTimer = 0, this.node.color = s.weaponColors.yellow.colors, this.attackProgress = 1)), null != this.fly && (this.upStates ? (this.scaleRun || (this.node.scaleX += e, this.node.scaleX >= 2.2 && (this.upStates = !1)), this.scaleTimers += e, this.scaleTimers >= 1.2 && this.scaleRun && (this.upStates = !1)) : (this.node.scaleX -= 10 * e, this.node.scaleX <= 1 && (this.node.scaleY = 1, this.node.scaleX = 1, this.upStates = null, this.fly = null, this._rigidBody.fixedRotation = !1, this.node.group = this.lastGroup, this.box.density = .01, this.box.apply(), this.revolute.enableLimit = !1, this.SkillNumber = null, this.scaleTimers = 0, this.jumpTimers = 0, this.scaleRun = !1))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], BigSkillBooms: [function (e, t, o) { "use strict"; cc._RF.push(t, "6db7dNyr/VDbZDlkf/iKDix", "BigSkillBooms"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("./HumanController"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.atks = 0, t.damageInverter = .1, t } return i(t, e), t.prototype._init = function (e, t) { this.damageInverter = .1, this.node.group = e, this.node.getComponent(cc.PhysicsCircleCollider).apply(), this.node.active = !0, this.atks = t, this._boomEff() }, t.prototype._boomEff = function () { var e = this; cc.tween(this.node).set({ scale: 0 }).to(.2, { scale: 1 }).call(function () { e.node && e.node.isValid && e.node.parent.destroy() }).union().start() }, t.prototype.onBeginContact = function (e, t, o) { var n = o.node, i = t.node.group; if (n && n.isValid && n.parent && n.parent.isValid) { var r = n.group; if ("weapons1" === i && ("player2" === r || "suverenemy" === r) || "weapons2" === i && "player1" === r) { var l = n.parent.getComponent(a.default); l && this.damageInverter >= .1 && (this.damageInverter = 0, l.setDamage(this.atks)) } } }, t.prototype.update = function (e) { this.node.isValid && this.damageInverter < .1 && (this.damageInverter += e) }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "./HumanController": "HumanController" }], BigSkills: [function (e, t, o) { "use strict"; cc._RF.push(t, "39ec53GcRlDirRD9mpiJyFy", "BigSkills"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/EffectManager"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.pointList = [], t._HumanGroup = null, t._atks = null, t } return i(t, e), t.prototype._inits = function (e, t) { var o = this; this.pointList = [], this._HumanGroup = e, this._atks = t; var n = new cc.Node; n.setParent(this.node), cc.tween(n).set({ active: !0, scale: 0 }).to(.1, { position: cc.v3(0, 0, 0) }).call(function () { n && n.isValid && (o.BoomC(), n.destroy()) }).union().start() }, t.prototype.CheckHuman = function () { var e = this; if (this.node && this.node.isValid) { var t = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (o) { var n = null; n = o.node.parent ? o.node.parent : cc.find("Canvas"); var i = o.node, r = new cc.Vec2(0, 0); if (n.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t, r) <= 600) { var a = new cc.Vec2(0, 0); a = t.sub(r), "weapons1" == e._HumanGroup ? "player2" == o.node.group && o.applyForceToCenter(a.normalize().mul(2e3), !0) : "weapons2" == e._HumanGroup && "player1" == o.node.group && o.applyForceToCenter(a.normalize().mul(2e3), !0) } }) } }, t.prototype.BoomC = function () { a.effectManager.playBigSkillEff(a.EffectType.bigSkillBooms, this._HumanGroup, this._atks, this.node) }, t.prototype.lateUpdate = function () { this.node && this.node.isValid && this.node.active && this.CheckHuman() }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../Manager/EffectManager": "EffectManager" }], BladesCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "515cfI4dOJEFJrmonGg8auZ", "BladesCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Blades"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.betweenDis = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && (this.revoluteJoint.enabled = !1, this.revoluteJoint.enableLimit = !1, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(800), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.lateUpdate = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { var t = cc.Vec2.ZERO, o = cc.Vec2.ZERO; this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this._rigidBody.applyTorque(120, !0); var n = t.sub(o); this._rigidBody.applyForceToCenter(n, !0), this.betweenDis = cc.Vec2.distance(t, o), this.fly ? this._flyV2.x > 0 ? this._rigidBody.linearVelocity.x < 0 && (this.fly = !1) : this._rigidBody.linearVelocity.x > 0 && (this.fly = !1) : this.betweenDis <= 200 && (this.fly = null, this.revoluteJoint.enabled = !0, this.betweenDis = 0, "1" == this.node.name ? this.node.parent.getComponent(p.default).setFly(1) : this.node.parent.getComponent(p.default).setFly(2)) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Blades": "Blades", "./Weapon": "Weapon" }], Blades: [function (e, t, o) { "use strict"; cc._RF.push(t, "bcc26pV14VPL4xqiZWjVj80", "Blades"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./BladesCollider"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.centers = null, t.nd1 = null, t.nd2 = null, t.rond1 = null, t.rond2 = null, t.nd1Rb = null, t.nd2Rb = null, t.fly2 = null, t.bladeCol1 = null, t.bladeCol2 = null, t.lineState = null, t.scaleState = null, t._line = null, t.effinvertal = 0, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.fly2 = null, this.lineState = null, this.scaleState = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this._line = this.node.getChildByName("line"), this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.nd1Rb = this.nd1.getComponent(cc.RigidBody), this.nd2Rb = this.nd2.getComponent(cc.RigidBody), this.bladeCol1 = this.node.getChildByName("1").getComponent(p.default), this.bladeCol2 = this.node.getChildByName("2").getComponent(p.default), this.rond1 = this.nd1.getChildByName("body").getChildByName("rond"), this.rond2 = this.nd2.getChildByName("body").getChildByName("rond"), "weapons1" == this.node.group ? (this.rond1.color = s.weaponColors.blue.colors, this.rond2.color = s.weaponColors.blue.colors) : (this.rond1.color = s.weaponColors.yellow.colors, this.rond2.color = s.weaponColors.yellow.colors), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.initchildren(), this.attackProgress = 1 }, t.prototype.initchildren = function () { var e = this, t = function (t) { t.human = e.human, t.checkName = e.checkName, t.Atk = e.Atk, t.atkRange = e.atkRange, t.damageInverter = e.damageInverter, e.boomTimer && (t.boomTimer = e.boomTimer), t.SkillType = e.SkillType, t.special = e.special, t.bulletType = e.bulletType, t.targetEnemy = e.targetEnemy, t._init() }; t(this.bladeCol1), t(this.bladeCol2) }, t.prototype.setLimit = function () { this.node.getComponent(cc.RevoluteJoint).enableLimit = !0 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly ? (this.bladeCol1.MotionStrakAtk(e), this.fly = !1, this.attackProgress = 0) : null == this.fly2 && (this.bladeCol2.MotionStrakAtk(e), this.fly2 = !1, this.attackProgress = 0) }, t.prototype.setFly = function (e) { 1 == e && (this.fly = null), 2 == e && (this.fly2 = null) }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.lateUpdate = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null == this.SkillNumber && (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.lineState = !0, "weapons1" == this.node.group ? (this.rond1.color = s.weaponColors.blue.colors, this.rond2.color = s.weaponColors.blue.colors) : (this.rond1.color = s.weaponColors.yellow.colors, this.rond2.color = s.weaponColors.yellow.colors), this.attackProgress = 1)), this.lineState && 0 == this.SkillNumber && (null == this.fly && null == this.fly2 || null == this.scaleState && (this.scaleState = !0)), this.scaleState) { this._line.active || (this._line.active = !0), this.skillTimer += e; var t = cc.Vec2.ZERO, o = cc.Vec2.ZERO, n = cc.Vec2.ZERO, i = cc.Vec2.ZERO; this.nd1Rb.getWorldPosition(t), this.nd2Rb.getWorldPosition(o); var r = o.sub(t); this.nd1.getPosition(n), this.nd2.getPosition(i); var a = i.sub(n), l = Math.atan2(a.y - 0, a.x - 0) * (180 / Math.PI); this._line.angle = l, this.nd1Rb.applyForceToCenter(r.mul(.1), !0), this.nd2Rb.applyForceToCenter(r.neg().mul(.1), !0), this._line.setPosition(n), this._line.width = r.len(), this.skillTimer >= 8 && (this.SkillNumber = null, this.skillTimer = 0, this.lineState = null, this.scaleState = null, this.rond1.color = cc.Color.WHITE, this.rond2.color = cc.Color.WHITE, this._line.width = 0, this._line.active = !1) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./BladesCollider": "BladesCollider", "./Weapon": "Weapon" }], BombCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "d5776mRcdlORYsDA8hPqjyH", "BombCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t.nd2 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.skillInverter = 3, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.nd1 = this.node.getChildByName("1"), this.SkillNumber = 0, this.nd1.active = !0 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getChildByName("body").getComponent("BulletBase"); t._init(this.node.group, this.targetEnemy, this.human), t.setVec(e), this.nd1.active = !1, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < 3; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getChildByName("body").getComponent("BulletBase"); n._init(this.node.group, this.targetEnemy, this.human), n.setVec(o) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.SkillNumber = 0, this.nd1.active = !0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], BoomScale: [function (e, t, o) { "use strict"; cc._RF.push(t, "ecd934BO1dB/L8DeSe6pRX+", "BoomScale"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../HumanStates/Human"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onEnable = function () { cc.tween(this.node).set({ scale: 0 }).to(1, { scale: 50 }).union().start() }, t.prototype.start = function () { }, t.prototype.onBeginContact = function (e, t, o) { "player2" != o.node.group && "player1" != o.node.group || o.node.parent.getComponent(l.default) && o.node.parent.getComponent(a.default).setDamage(100) }, r([c], t) }(cc.Component)); o.default = p, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human" }], BoomerangCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "2e0d4lOoFhJhrvWJpVnCGvm", "BoomerangCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t.revoluteJoint = null, t.nd2 = null, t.flyTimer = 0, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.attackProgress = 1, this.betweenDis = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.nd2 = this.node.getChildByName("2"), "weapons1" == this.node.group ? this.nd2.color = s.weaponColors.blue.colors : this.nd2.color = s.weaponColors.yellow.colors }, t.prototype.setLimit = function () { this.revoluteJoint.enableLimit = !0 }, t.prototype.MotionStrakAtk = function (e) { this.nd2.color = cc.Color.WHITE, null == this.fly && (this.revoluteJoint.enabled = !1, this.revoluteJoint.enableLimit = !1, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(400), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.attackProgress = 0) }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.lateUpdate = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { var t = cc.Vec2.ZERO, o = cc.Vec2.ZERO; this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this._rigidBody.applyTorque(100, !0); var n = t.sub(o), i = this.fly ? 1 : 2; this._rigidBody.applyForceToCenter(n.mul(i), !0), this.betweenDis = cc.Vec2.distance(t, o), this.flyTimer += e, this.fly ? this._rigidBody.linearVelocity.dot(this._flyV2) < 0 && (this.fly = !1) : this.flyTimer >= 2 ? (this.fly = null, this.flyTimer = 0, this.attackProgress = 1, this.revoluteJoint.enabled = !0, this.betweenDis = 0, "weapons1" == this.node.group ? this.nd2.color = s.weaponColors.blue.colors : this.nd2.color = s.weaponColors.yellow.colors, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0) : this.betweenDis <= 200 && (this.fly = null, this.flyTimer = 0, this.attackProgress = 1, this.revoluteJoint.enabled = !0, this.betweenDis = 0, "weapons1" == this.node.group ? this.nd2.color = s.weaponColors.blue.colors : this.nd2.color = s.weaponColors.yellow.colors, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0) } }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], BootsBoom: [function (e, t, o) { "use strict"; cc._RF.push(t, "677605ZybJOI4x2nD2q1VPn", "BootsBoom"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/EffectManager"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onEnable = function () { var e = this; cc.tween(this.node).set({ scale: 0 }).to(.3, { scale: 1 }).call(function () { a.effectManager.putEffect(a.EffectType.bootsBoom, e.node) }).union().start() }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../Manager/EffectManager": "EffectManager" }], BootsCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "abd5cZ+bpxK1paGscJn26Lr", "BootsCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Boots"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t._boots = null, t.targetAngle = null, t } return i(t, e), t.prototype.playClashEffect = function (e, t) { if (this.effinvertal >= .5 && e.points[0]) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = cc.v2(e.points[0].x - cc.winSize.width / 2, e.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(t, o) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(5e4), t.points[0], !0)) }, t.prototype.maybeBoom = function (e, t) { this.fly && (null != this._boots.SkillNumber && e.points[0] && c.effectManager.playOtherEffs(c.EffectType.bootsBoom, cc.v2(e.points[0].x - cc.winSize.width / 2, e.points[0].y - cc.winSize.height / 2), t), this.runEnd()) }, t.prototype._init = function () { this._boots = this.node.parent.getComponent(p.default), this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this.AtkFrequency = 0, this._rigidBody.fixedRotation = !1 }, t.prototype.MotionStrakAtk = function (e) { if (null == this.fly) { this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1e4 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0); var t = Math.atan2(e.y, e.x) * (180 / Math.PI) + 90; t > 180 && (t -= 360), this.targetAngle = t, this.fly = !0 } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; "rebound1" != t.node.group && "rebound2" != t.node.group || this._rigidBody.applyLinearImpulse(n.normal.mul(-1e4), this._rigidBody.getWorldCenter(), !0), "rebound1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == i.group ? (this.contactHuman(i, n), this.maybeBoom(n, s.weaponColors.blue.colors)) : "suverweapon" == i.group && n.points[0] ? (this.playClashEffect(n, c.EffectType.playerWeaponHit), this.maybeBoom(n, s.weaponColors.blue.colors)) : n.points[0] && this.maybeBoom(n, s.weaponColors.blue.colors) : "player2" == i.group ? (this.contactHuman(i, n), this.maybeBoom(n, s.weaponColors.blue.colors)) : "weapons2" == i.group && n.points[0] ? (this.playClashEffect(n, c.EffectType.playerWeaponHit), this.maybeBoom(n, s.weaponColors.blue.colors)) : n.points[0] && this.maybeBoom(n, s.weaponColors.blue.colors) : "rebound2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == i.group ? (this.contactHuman(i, n), this.maybeBoom(n, s.weaponColors.yellow.colors)) : "suverweapon" == i.group && n.points[0] ? (this.playClashEffect(n, c.EffectType.playerWeaponHit), this.maybeBoom(n, s.weaponColors.yellow.colors)) : n.points[0] && this.maybeBoom(n, s.weaponColors.yellow.colors) : "player1" == i.group ? (this.contactHuman(i, n), this.maybeBoom(n, s.weaponColors.yellow.colors)) : "weapons1" == i.group && n.points[0] ? (this.playClashEffect(n, c.EffectType.playerWeaponHit), this.maybeBoom(n, s.weaponColors.yellow.colors)) : n.points[0] && this.maybeBoom(n, s.weaponColors.yellow.colors)) }, t.prototype.runEnd = function () { null != this._boots.SkillNumber && this._boots.setSkillEnd(), this.effinvertal = .5, this.fly = null, this.flyEnds() }, t.prototype.flyEnds = function () { this._rigidBody.fixedRotation = !1, this.targetAngle = null }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.targetAngle && (this._rigidBody.fixedRotation || this.node.angle <= this.targetAngle + 5 && this.node.angle >= this.targetAngle - 5 && (this._rigidBody.fixedRotation = !0)) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Boots": "Boots", "./Weapon": "Weapon" }], Boots: [function (e, t, o) { "use strict"; cc._RF.push(t, "cc50epcjQlLDKAt6y+RZRK0", "Boots"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("./BootsCollider"), l = e("./Weapon"), s = e("../HumanStates/Human"), c = e("../Manager/EffectManager"), p = e("../Manager/ConfigManager"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.nd1 = null, t.nd2 = null, t.child1 = null, t.child2 = null, t.AtkFrequency = 0, t.changeFlyTimers = null, t.motionStreak1 = null, t.motionStreak2 = null, t.footR = null, t.footL = null, t.rond1 = null, t.rond2 = null, t } return i(t, e), t.prototype._init = function () { this.motionStreak1 = this.node.getChildByName("motions").getComponent(cc.MotionStreak), this.motionStreak2 = this.node.getChildByName("motions2").getComponent(cc.MotionStreak), this.footR = this.human.getChildByName("footR"), this.footL = this.human.getChildByName("footL"), this.footR.getComponent(cc.Sprite).enabled = !1, this.footL.getComponent(cc.Sprite).enabled = !1, this.SkillNumber = 0, this.effinvertal = .5, this.fly = null, this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.child1 = this.nd1.getComponent(a.default), this.child2 = this.nd2.getComponent(a.default), this.rond1 = this.nd1.getChildByName("0"), this.rond2 = this.nd2.getChildByName("0"), this.attackProgress = 1, this.AtkFrequency = 0, this.initchildren(), this.changeSkill() }, t.prototype.initchildren = function () { var e = this, t = function (t) { t.human = e.human, t.checkName = e.checkName, t.Atk = e.Atk, t.atkRange = e.atkRange, t.damageInverter = e.damageInverter, e.boomTimer && (t.boomTimer = e.boomTimer), t.SkillType = e.SkillType, t.special = e.special, t.bulletType = e.bulletType, t.targetEnemy = e.targetEnemy, t._init() }; t(this.child1), t(this.child2); var o = function (e, t) { var o = e.getComponent(cc.RevoluteJoint); o.connectedBody = t.getComponent(cc.RigidBody), o.apply() }; o(this.nd1, this.footR), o(this.nd2, this.footL) }, t.prototype.setSkillEnd = function () { this.SkillNumber = null, this.skillTimer = 0 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && (this.rond1.color = cc.Color.WHITE, this.rond2.color = cc.Color.WHITE, this.changeFlyTimers = 1, this.human.getComponent(s.default).flyBoots(!0), this.child1.MotionStrakAtk(e), this.child2.MotionStrakAtk(e), this.fly = !1, this.motionStreak1.color = cc.Color.WHITE, this.motionStreak2.color = cc.Color.WHITE, this.attackProgress = 0) }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.nd1) }, t.prototype.changeSkill = function () { this.fly = null, this.SkillNumber = 0, this.rond1.color = p.weaponColors.blue.colors, this.rond2.color = p.weaponColors.blue.colors, "boot" == this.node.name ? (this.motionStreak1.color = p.weaponColors.blue.colors, this.motionStreak2.color = p.weaponColors.blue.colors) : (this.motionStreak1.color = p.weaponColors.red.colors, this.motionStreak2.color = p.weaponColors.red.colors) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null == this.SkillNumber && (this.skillTimer += e, this.attackProgress = this.skillTimer / 1.5, this.skillTimer >= 1.5 && (this.changeSkill(), this.attackProgress = 1)), null != this.changeFlyTimers && (this.changeFlyTimers -= e, this.changeFlyTimers <= 0 && (this.changeFlyTimers = null, this.child1.flyEnds(), this.child2.flyEnds(), this.human.getComponent(s.default).flyBoots(!1))) }, r([d], t) }(l.default)); o.default = h, cc._RF.pop() }, { "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./BootsCollider": "BootsCollider", "./Weapon": "Weapon" }], BormBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "9de19u2TG5Hx4Rz2aZvvJxE", "BormBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/WeaponManager"), c = e("./BulletBase"), p = e("../Manager/EffectManager"), u = e("../Manager/ConfigManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.getComponent(cc.RigidBody) ? this._rigidBody = this.node.getComponent(cc.RigidBody) : this._rigidBody = this.node.getChildByName("body").getComponent(cc.RigidBody), o && (this.user = o), this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyTorque(40, !0), this._rigidBody.applyLinearImpulse(this._flyV2.mul(900 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.setVecP = function (e) { null == this.fly2 && (this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyTorque(40, !0), this._rigidBody.applyLinearImpulse(this._flyV2.mul(700 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly2 = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("bomb" == this.node.parent.name || "bomb2" == this.node.parent.name) { var i = function () { var i = e.getWorldManifold(); ("bomb1" != o.node.group && "weapons1" != o.node.group && "player1" != o.node.group || !i.points[0]) && ("bomb2" != o.node.group && "weapons2" != o.node.group && "player2" != o.node.group || !i.points[0]) || p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), n.fly = null, n.fly2 = null, n.isBoom = !0, n.isTimer = 0, n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var r = p.EffectType.smallBoom; p.effectManager.playEffect(r, t.node.getPosition()); var c = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), d = !1; c.forEach(function (e) { var o = null; o = e.node.parent ? e.node.parent : cc.find("Canvas"); var i = e.node, r = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(n.enemyV3, r) <= n.atkRange) { var l = new cc.Vec2(0, 0); cc.Vec2.subtract(l, r, n.enemyV3), u.gameConfig.suverModel ? o.getComponent(a.default) && "suverenemy" == o.group && o.getComponent(a.default).setDamage(n.Atk) : "bomb2" == n.node.parent.name ? o.getComponent(a.default) && "player1" == e.node.group && (d || (o.getComponent(a.default).setDamage(n.Atk), d = !0)) : o.getComponent(a.default) && "player2" == e.node.group && (d || (o.getComponent(a.default).setDamage(n.Atk), d = !0)), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && ("bomb" == t.node.name ? e.applyLinearImpulse(l.normalize().mul(1500 * e.getMass()), e.getWorldCenter(), !0) : e.applyLinearImpulse(l.normalize().mul(3e3 * e.getMass()), e.getWorldCenter(), !0)) } }), "bomb" == t.node.parent.name ? l.bulletFactory.putBullet(s.BulletType.bomb, n.node.parent) : l.bulletFactory.putBullet(s.BulletType.bomb2, n.node.parent) }, r = function () { var i = e.getWorldManifold(); ("bomb1" != o.node.group && "weapons1" != o.node.group && "player1" != o.node.group || !i.points[0]) && ("bomb2" != o.node.group && "weapons2" != o.node.group && "player2" != o.node.group || !i.points[0]) || p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), o.node.getComponent(cc.RigidBody), n.fly = null, n.fly2 = null, n.isBoom = !0, n.isTimer = 0; var r = p.EffectType.smallBoom; p.effectManager.playEffect(r, t.node.getPosition()), n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var c = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), d = !1; c.forEach(function (e) { var o = null; o = e.node.parent ? e.node.parent : cc.find("Canvas"); var i = e.node, r = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(n.enemyV3, r) <= n.atkRange) { var l = new cc.Vec2(0, 0); cc.Vec2.subtract(l, r, n.enemyV3), u.gameConfig.suverModel ? o.getComponent(a.default) && "suverenemy" == o.group && o.getComponent(a.default).setDamage(n.Atk) : "bomb2" == n.node.parent.name ? o.getComponent(a.default) && "player1" == e.node.group && (d || (o.getComponent(a.default).setDamage(n.Atk), d = !0)) : o.getComponent(a.default) && "player2" == e.node.group && (d || (o.getComponent(a.default).setDamage(n.Atk), d = !0)), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && ("bomb" == t.node.name ? e.applyLinearImpulse(l.normalize().mul(1500 * e.getMass()), e.getWorldCenter(), !0) : e.applyLinearImpulse(l.normalize().mul(3e3 * e.getMass()), e.getWorldCenter(), !0)) } }), "bomb" == t.node.parent.name ? l.bulletFactory.putBullet(s.BulletType.bomb, n.node.parent) : l.bulletFactory.putBullet(s.BulletType.bomb2, n.node.parent) }; "bomb1" == t.node.group ? (e.getWorldManifold(), u.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "player2" == o.node.group ? i() : "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "bomb2" == o.node.group && r()) : "bomb2" == t.node.group && (e.getWorldManifold(), u.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group || r() : "player1" == o.node.group ? i() : "weapons1" == o.node.group ? r() : "bomb1" == o.node.group && r()) } }, t.prototype.start = function () { }, t.prototype.update = function (e) { var t = this; if (this.node.parent.isValid) { if (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.isTimer += e, this.isTimer >= this.boomTimer && !this.isBoom)) { this.fly = null, this.isBoom = !0, this.isTimer = 0, this.enemyV3 = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); var o = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), n = !1; o.forEach(function (e) { var o = null; o = e.node.parent ? e.node.parent : cc.find("Canvas"); var i = e.node, r = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t.enemyV3, r) <= t.atkRange) { u.gameConfig.suverModel ? o.getComponent(a.default) && "suverenemy" == o.group && o.getComponent(a.default).setDamage(t.Atk) : "bomb2" == t.node.parent.name ? o.getComponent(a.default) && "player1" == e.node.group && (n || (o.getComponent(a.default).setDamage(t.Atk), n = !0)) : o.getComponent(a.default) && "player2" == e.node.group && (n || (o.getComponent(a.default).setDamage(t.Atk), n = !0)); var l = new cc.Vec2(0, 0); cc.Vec2.subtract(l, r, t.enemyV3), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && e.applyLinearImpulse(l.normalize().mul(1500 * e.getMass()), e.getWorldCenter(), !0) } }), p.effectManager.playEffect(p.EffectType.smallBoom, this.node.getPosition()), "bomb" == this.node.parent.name ? l.bulletFactory.putBullet(s.BulletType.bomb, this.node.parent) : l.bulletFactory.putBullet(s.BulletType.bomb2, this.node.parent) } if (null != this.fly2 && (this.isTimer += e, this.isTimer >= this.boomTimer && !this.isBoom)) { this.fly2 = null, this.isBoom = !0, this.isTimer = 0, this.enemyV3 = this.node.convertToWorldSpaceAR(this.node.getChildByName("body").getPosition()), o = cc.find("Canvas").getComponentsInChildren(cc.RigidBody); var i = !1; o.forEach(function (e) { var o = null; o = e.node.parent ? e.node.parent : cc.find("Canvas"); var n = e.node, r = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(n.getPosition(), r), cc.Vec2.distance(t.enemyV3, r) <= t.atkRange) { u.gameConfig.suverModel ? o.getComponent(a.default) && "suverenemy" == o.group && o.getComponent(a.default).setDamage(t.Atk) : "bombBig2" == t.node.name ? o.getComponent(a.default) && "player1" == e.node.group && (i || (o.getComponent(a.default).setDamage(t.Atk), i = !0)) : o.getComponent(a.default) && "player2" == e.node.group && (i || (o.getComponent(a.default).setDamage(t.Atk), i = !0)); var l = new cc.Vec2(0, 0); cc.Vec2.subtract(l, r, t.enemyV3), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && e.applyLinearImpulse(l.normalize().mul(3e3 * e.getMass()), e.getWorldCenter(), !0) } }) } } }, r([h], t) }(c.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], BuffItemCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "40ec3Wnk+1DA6eyfYylIfj7", "BuffItemCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Factory/HumanFactory"), l = e("../HumanStates/Human"), s = e("../Manager/AudioManager"), c = e("../scenes/Games"), p = e("../Utils/Utils"), u = cc._decorator, d = u.ccclass, h = u.property, g = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.iconAll = [], t.state = null, t._Nodesid = null, t.iconbg = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype._init = function (e) { this._Nodesid = e; var t = p.RandomRangeInt(0, 3); this.state = t, this.iconbg = this.node.getChildByName("icon").getComponent(cc.Sprite), this.iconbg.spriteFrame = this.iconAll[t] }, t.prototype.onBeginContact = function (e, t, o) { "default" == t.node.group && o.node && o.node.isValid && o.node.parent && o.node.parent.isValid && ("player2" != o.node.group && "player1" != o.node.group && "boot" != o.node.parent.name && "boot2" != o.node.parent.name || o.node.parent.getComponent(l.default) && (s.audioManager.playEffect("item"), 0 == this.state ? (o.node.parent.getComponent(l.default).hpItem(), cc.find("Canvas").getComponent(c.default).slowStates(this._Nodesid), a.humanFactory.putPrefab("BuffItem", this.node)) : 1 == this.state ? (o.node.parent.getComponent(l.default).sheildItem(), cc.find("Canvas").getComponent(c.default).slowStates(this._Nodesid), a.humanFactory.putPrefab("BuffItem", this.node)) : 2 == this.state && (o.node.parent.getComponent(l.default).atkBuffItem(), cc.find("Canvas").getComponent(c.default).slowStates(this._Nodesid), a.humanFactory.putPrefab("BuffItem", this.node)))) }, r([h(cc.SpriteFrame)], t.prototype, "iconAll", void 0), r([d], t) }(cc.Component); o.default = g, cc._RF.pop() }, { "../Factory/HumanFactory": "HumanFactory", "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Utils/Utils": "Utils", "../scenes/Games": "Games" }], BulletBase: [function (e, t, o) { "use strict"; cc._RF.push(t, "4e762JlKVdJ0YJGuaOBCXi+", "BulletBase"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Atk = 0, t.damageInverter = 0, t.atkRange = 0, t.collisions = !1, t.boomTimer = 0, t.betweenDis = 0, t.targetEnemy = null, t.user = null, t.isline = null, t.checkNames = null, t.activeTimer = 0, t } return i(t, e), t.prototype.onLoad = function () { this.activeTimer = 0 }, t.prototype._init = function () { }, t.prototype._linInit = function () { }, t.prototype._bridgeInit = function () { }, t.prototype.setVec = function () { }, t.prototype.setVecP = function () { }, t.prototype.setVecC = function () { }, t.prototype.setVecH = function () { }, t.prototype.start = function () { }, t.prototype.update = function () { }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], BulletFactory: [function (e, t, o) { "use strict"; cc._RF.push(t, "735a9HQZbVFZ7htjuWKDp3t", "BulletFactory"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, i = this && this.__awaiter || function (e, t, o, n) { return new (o || (o = Promise))(function (i, r) { function a(e) { try { s(n.next(e)) } catch (t) { r(t) } } function l(e) { try { s(n.throw(e)) } catch (t) { r(t) } } function s(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof o ? t : new o(function (e) { e(t) })).then(a, l) } s((n = n.apply(e, t || [])).next()) }) }, r = this && this.__generator || function (e, t) { var o, n, i, r, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return r = { next: l(0), throw: l(1), return: l(2) }, "function" == typeof Symbol && (r[Symbol.iterator] = function () { return this }), r; function l(e) { return function (t) { return s([e, t]) } } function s(r) { if (o) throw new TypeError("Generator is already executing."); for (; a;)try { if (o = 1, n && (i = 2 & r[0] ? n.return : r[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, r[1])).done) return i; switch (n = 0, i && (r = [2 & r[0], i.value]), r[0]) { case 0: case 1: i = r; break; case 4: return a.label++, { value: r[1], done: !1 }; case 5: a.label++, n = r[1], r = [0]; continue; case 7: r = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === r[0] || 2 === r[0])) { a = 0; continue } if (3 === r[0] && (!i || r[1] > i[0] && r[1] < i[3])) { a.label = r[1]; break } if (6 === r[0] && a.label < i[1]) { a.label = i[1], i = r; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(r); break } i[2] && a.ops.pop(), a.trys.pop(); continue }r = t.call(e, a) } catch (l) { r = [6, l], n = 0 } finally { o = i = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } }, a = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, o = t && e[t], n = 0; if (o) return o.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }; Object.defineProperty(o, "__esModule", { value: !0 }), o.bulletFactory = void 0; var l = e("../Manager/WeaponManager"), s = cc._decorator, c = s.ccclass, p = (s.property, function () { function e() { this._bullets = new Map, this._pool = new Map, this._canvas = null, this._cachedSceneName = null, this.normalBig = ["20", "6", "28", "37", "35", "31", "30", "36", "2", "15", "25", "27", "8", "9", "21"], this.shareBoomNames = ["14", "3", "13"], this.shareBoomTypes = [l.BulletType.shareBoom, l.BulletType.shareBoom2, l.BulletType.potions], this.shareBoomTypes2 = [l.BulletType.dragon, l.BulletType.shareBoom, l.BulletType.shareBoom2, l.BulletType.potions, l.BulletType.bomb, l.BulletType.bomb2] } return e.prototype.Init = function () { var e = this; return Promise.all(l.prefabURLs.map(function (t) { return i(e, void 0, void 0, function () { var e = this; return r(this, function () { return cc.assetManager.getBundle("prefabs").load(t.url, cc.Prefab, function (o, n) { o ? console.error(o) : e._bullets.set(t.type, n) }), [2] }) }) })) }, e.prototype.getCanvas = function () { var e = cc.director.getScene(), t = e ? e.name : null; return this._canvas && this._cachedSceneName && this._cachedSceneName === t || (this._canvas = cc.find("Canvas"), this._cachedSceneName = t), this._canvas }, e.prototype.getAngle = function (e) { return Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI) }, e.prototype.calculateAdjustedPosition = function (e, t, o) { var n, i; void 0 === o && (o = 0); var r = this.getCanvas().getComponentsInChildren(cc.Collider), l = e.clone(), s = !1; try { for (var c = a(r), p = c.next(); !p.done; p = c.next()) { var u = p.value; if (s) break; var d = u.node.parent || this.getCanvas(), h = u.node, g = new cc.Vec2(0, 0); d.convertToWorldSpaceAR(h.getPosition(), g); var f = h.width / 2, y = h.height / 2, m = e.x, v = e.y; if (m <= g.x + f && m >= g.x - f && v <= g.y + y && v >= g.y - y) { var _ = m >= g.x, C = v >= g.y, b = _ ? g.x + f - m : m - (g.x - f), B = C ? g.y + y - v : v - (g.y - y); if (Math.abs(b) <= Math.abs(B)) { var w = _ ? 1 : -1; l.x = m + w * b + w * (o || t.width / 2) } else w = C ? 1 : -1, l.y = v + w * Math.abs(B) + w * (o || t.height / 2); s = !0 } } } catch (M) { n = { error: M } } finally { try { p && !p.done && (i = c.return) && i.call(c) } finally { if (n) throw n.error } } return { position: l, hasCollision: s } }, e.prototype.getBullet = function (e, t, o, n, i) { var r, a, s, c, p, u = this._pool.get(e); p = u && u.size() > 0 ? u.get() : cc.instantiate(this._bullets.get(e)); var d = l.weaponConfig[o], h = d.bulletType.indexOf(e), g = p.getChildByName("body"), f = p.getComponent("BulletBase") ? p.getComponent("BulletBase") : g ? g.getComponent("BulletBase") : null; e == l.BulletType.bomb ? (p.group = "bomb1", g && (null === (r = g.getComponent(cc.PhysicsCircleCollider)) || void 0 === r || r.apply())) : e == l.BulletType.bomb2 ? (p.group = "bomb2", g && (null === (a = g.getComponent(cc.PhysicsCircleCollider)) || void 0 === a || a.apply())) : e == l.BulletType.shareBoom ? (p.group = "bomb1", g && (null === (s = g.getComponent(cc.PhysicsCircleCollider)) || void 0 === s || s.apply())) : e == l.BulletType.shareBoom2 && (p.group = "bomb2", g && (null === (c = g.getComponent(cc.PhysicsCircleCollider)) || void 0 === c || c.apply())); var y = o.split("_")[1]; if (-1 != this.shareBoomNames.indexOf(y) || -1 != this.shareBoomTypes.indexOf(e)) { p.parent = this.getCanvas(); var m = t.parent.convertToWorldSpaceAR(t.getPosition()); if (-1 != this.shareBoomTypes2.indexOf(e) ? g && g.setPosition(this.getCanvas().convertToNodeSpaceAR(m)) : p.setPosition(this.getCanvas().convertToNodeSpaceAR(m)), e == l.BulletType.dragon) { var v = this.getAngle(n); g && (g.angle = v) } } else if (-1 != this.normalBig.indexOf(y) || e == l.BulletType.normalBig) p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m)), e == l.BulletType.grappins && (p.angle = t.angle - 180), (e == l.BulletType.rpgBullets || e == l.BulletType.GantBall || e == l.BulletType.shieldBullet) && (v = this.getAngle(n), p.angle = v); else if ("22" == y) p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m)); else if ("38" == y) e == l.BulletType.lampWall ? (p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m.add(cc.v2(0, 1e3))))) : (p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m))); else if ("32" == y) e == l.BulletType.cardRed ? (p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), g && g.setPosition(this.getCanvas().convertToNodeSpaceAR(m))) : (p.parent = this.getCanvas(), m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m))); else if ("4" == y) p.parent = this.getCanvas(), e == l.BulletType.scepterBall && (m = t.parent.convertToWorldSpaceAR(t.getPosition()), p.setPosition(this.getCanvas().convertToNodeSpaceAR(m))); else if ("26" == y) { p.parent = this.getCanvas(); var _ = t.parent.convertToWorldSpaceAR(t.getPosition()); if (i) { var C = p.getChildByName("pickItem32"); if (C) { var b = p.getChildByName("line"); b && b.setPosition(cc.v2(35, 0)), C.setPosition(cc.v2(30, 0)); var B = p.getChildByName("pickItem31"); B && B.setPosition(cc.v2(0, 0)), v = this.getAngle(n), p.angle = v } } _ = this.calculateAdjustedPosition(_, p).position, m = this.getCanvas().convertToNodeSpaceAR(_), p.setPosition(m) } else p.parent = t, p.setPosition(n); return p.active = !0, f.Atk = d.weaponsAtk[h], d.atkRange ? f.atkRange = d.atkRange[h] : f.atkRange = d.Aoe[h], f.damageInverter = d.damageInvert, d.boomTimer && (f.boomTimer = d.boomTimer[h], f.targetEnemy = i), f.checkNames = o, p }, e.prototype.putBullet = function (e, t) { t.active = !1, this._pool.get(e).put(t) }, e.prototype.createPool = function () { var e, t; try { for (var o = a(this._bullets.keys()), n = o.next(); !n.done; n = o.next()) { var i = n.value, r = new cc.NodePool; this._pool.set(i, r); for (var l = 0; l < 5; l++) { var s = cc.instantiate(this._bullets.get(i)); r.put(s) } } } catch (c) { e = { error: c } } finally { try { n && !n.done && (t = o.return) && t.call(o) } finally { if (e) throw e.error } } }, e.prototype.clearPool = function () { this._canvas = null, this._cachedSceneName = null, this._pool.forEach(function (e) { e.clear() }), this._pool.clear() }, n([c], e) }()); o.default = p, o.bulletFactory = new p, cc._RF.pop() }, { "../Manager/WeaponManager": "WeaponManager" }], CameraCtrl: [function (e, t, o) { "use strict"; cc._RF.push(t, "0edb4Zma1BGtb5kt89xarmq", "CameraCtrl"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = cc._decorator, s = l.ccclass, c = l.property, p = new cc.Vec2, u = new cc.Vec2, d = new cc.Vec2, h = new cc.Vec2, g = new cc.Vec2, f = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.target = null, t.target2 = null, t.enemyBody = null, t.playerBody = null, t.smoothSpeed = .125, t.hightlength = 0, t.centerHight = 850, t.MaxHight = 4e3, t.isDeadCamera = !1, t.isDeadTarget = null, t.isDeadTimer = 1, t.callback = null, t.wallbg = null, t._startPos = new cc.Vec2(0, 0), t.minZoom = .75, t.maxZoom = .525, t.camera = null, t.minX = -550, t.maxX = 550, t.minY = 130, t.maxY = 400, t.minX1 = -900, t.maxX1 = 900, t.minY1 = -75, t.maxY1 = 800, t.isTablet = !1, t.boundsKeyframes = [{ zoom: .525, minX: 0, maxX: 0, minY: 300, maxY: 300 }, { zoom: .625, minX: -275, maxX: 275, minY: 275, maxY: 275 }, { zoom: .7, minX: -450, maxX: 450, minY: 180, maxY: 350 }, { zoom: .75, minX: -550, maxX: 550, minY: 130, maxY: 400 }], t } return i(t, e), t.prototype.onLoad = function () { cc.find("Canvas/bg2") && (this.wallbg = cc.find("Canvas/bg2")), this._startPos = this.node.getPosition(), this.camera = this.node.getComponent(cc.Camera), cc.winSize.width / cc.winSize.height < 1.65 && (this.isTablet = !0, this.minZoom = .7) }, t.prototype.getInterpolatedBounds = function (e) { for (var t = this.boundsKeyframes, o = t[0].zoom, n = t[t.length - 1].zoom, i = cc.misc.clampf(e, o, n), r = 0, a = 0; a < t.length - 1; a++)if (i >= t[a].zoom && i <= t[a + 1].zoom) { r = a; break } var l = t[r], s = t[r + 1] || l, c = (i - l.zoom) / (s.zoom - l.zoom || 1), p = cc.misc.lerp; return { minX: p(l.minX, s.minX, c), maxX: p(l.maxX, s.maxX, c), minY: p(l.minY, s.minY, c), maxY: p(l.maxY, s.maxY, c) } }, t.prototype.TwoPlayersCamera = function () { this.target.parent.convertToWorldSpaceAR(this.target.getPosition(), p), this.target2.parent.convertToWorldSpaceAR(this.target2.getPosition(), u); var e = cc.Vec2.distance(p, u) - 100, t = cc.winSize.height / e, o = cc.misc.clampf(t, this.maxZoom, this.minZoom); this.camera.zoomRatio = cc.misc.lerp(this.camera.zoomRatio, o, this.smoothSpeed); var n = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.Vec2.add(d, p.multiplyScalar(.5), u.multiplyScalar(.5)), cc.Vec2.lerp(d, n, d, this.smoothSpeed); var i = this.node.parent.convertToNodeSpaceAR(d), r = this.getInterpolatedBounds(this.camera.zoomRatio); i.x = cc.misc.clampf(i.x, r.minX, r.maxX), i.y = cc.misc.clampf(i.y, r.minY, r.maxY), this.node.setPosition(i) }, t.prototype.OnePlayerCamera = function () { this.target.parent.convertToWorldSpaceAR(this.target.getPosition(), p); var e = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.Vec2.lerp(p, e, p, this.smoothSpeed), this.camera.zoomRatio = .8; var t = this.node.parent.convertToNodeSpaceAR(p); this.isTablet || (t.x = cc.misc.clampf(t.x, this.minX1, this.maxX1), t.y = cc.misc.clampf(t.y, this.minY1, this.maxY1)), this.node.setPosition(t) }, t.prototype.lateUpdate = function (e) { if (this.isDeadCamera ? this.isDeadTimer > 0 ? (this.isDeadTimer -= e, null != this.isDeadTarget && this.isDeadTarget.isValid && (this.isDeadTarget.parent.convertToWorldSpaceAR(this.isDeadTarget.getPosition(), h), cc.Vec2.lerp(h, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), h, this.smoothSpeed / 2), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(h)), this.camera.zoomRatio = 1)) : (cc.director.getScheduler().setTimeScale(1), cc.PhysicsManager.FIXED_TIME_STEP = 1 / 60, cc.director.getPhysicsManager().enabledAccumulator = !1, this.callback(), this.isDeadCamera = !1, this.isDeadTarget = null) : null != this.target && null != this.target2 && this.target.isValid && this.target2.isValid ? 3 == a.gameConfig.gameChooseViewNumber ? this.OnePlayerCamera() : this.isTablet ? this.tabletCamera() : this.TwoPlayersCamera() : null != this.target && this.target.isValid ? (this.target.parent.convertToWorldSpaceAR(this.target.getPosition(), p), cc.Vec2.lerp(p, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), p, this.smoothSpeed), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(p)), this.camera.zoomRatio = this.minZoom) : null != this.target2 && this.target2.isValid && (this.target2.parent.convertToWorldSpaceAR(this.target2.getPosition(), u), cc.Vec2.lerp(u, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), u, this.smoothSpeed), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(u)), this.camera.zoomRatio = this.minZoom), null != this.wallbg) { var t = this.wallbg.getPosition(); cc.Vec2.subtract(g, this._startPos, this.node.getPosition()), this.wallbg.setPosition(t.x + .1 * g.x, 0), this._startPos = this.node.getPosition() } }, t.prototype.tabletCamera = function () { this.target.parent.convertToWorldSpaceAR(this.target.getPosition(), p), this.target2.parent.convertToWorldSpaceAR(this.target2.getPosition(), u), this.hightlength = cc.Vec2.distance(p, u); var e = cc.winSize.height / (this.hightlength + 300); e <= this.maxZoom ? this.node.getComponent(cc.Camera).zoomRatio = e : this.node.getComponent(cc.Camera).zoomRatio = this.minZoom, cc.Vec2.add(d, p.multiplyScalar(.5), u.multiplyScalar(.5)), cc.Vec2.lerp(d, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), d, this.smoothSpeed), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(d)) }, t.prototype.setTarget = function (e, t, o) { cc.director.getScheduler().setTimeScale(.25), cc.director.getPhysicsManager().enabledAccumulator = !0, cc.PhysicsManager.FIXED_TIME_STEP = 1 / 480, this.callback = o, 1 == e ? (this.isDeadTimer = 1, this.isDeadCamera = !0, this.isDeadTarget = cc.find("Canvas/MainPoint1"), this.target = null) : 2 == e ? (this.isDeadTimer = 1, this.isDeadCamera = !0, this.isDeadTarget = cc.find("Canvas/MainPoint2"), this.target2 = null) : 3 == e && (this.isDeadTimer = 1, this.isDeadCamera = !0, this.isDeadTarget = t.getChildByName("MainPoint")) }, r([c({ type: cc.Node })], t.prototype, "target", void 0), r([c({ type: cc.Node })], t.prototype, "target2", void 0), r([c({ type: cc.Node })], t.prototype, "enemyBody", void 0), r([c({ type: cc.Node })], t.prototype, "playerBody", void 0), r([s], t) }(cc.Component); o.default = f, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager" }], CannonBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "88c1a0kXc9Pqp4oEd681aDR", "CannonBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { if (null == this.fly) { this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(15 * this._rigidBody.getMass()); var t = Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI); this.node.getChildByName("bg").angle = t, this.fly = !0 } }, t.prototype.setVecP = function (e) { null == this.fly2 && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(5 * this._rigidBody.getMass()), this.fly2 = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition())) } else "suverweapon" == o.node.group && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition())); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, "lancespear" != o.node.name && "lancespear2" != o.node.name && ("cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()))); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()))) : "suverweapon" == o.node.group && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition())) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, "lancespear" != o.node.name && "lancespear2" != o.node.name && ("cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition())))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition()), "cannonBall" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.CannonBall, this.node) : l.bulletFactory.putBullet(p.BulletType.CannonBall2, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], CardCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "23fe3hNAtNFxrNdwCEZ1/Ex", "CardCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.skillInverter = 3, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.nd1 = this.node.getChildByName("1"), this.AtkFrequency = 0, this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); 2 == s.gameConfig.gameChooseViewNumber ? this.SkillNumber = e <= .33 ? 0 : e > .33 && e <= .66 ? 1 : 2 : this.SkillNumber = e <= .5 ? 0 : 1, this.nd1.active = !0, 0 == this.SkillNumber ? this.nd1.color = s.weaponColors.red.colors : 1 == this.SkillNumber ? this.nd1.color = s.weaponColors.green.colors : 2 == this.SkillNumber && (this.nd1.color = s.weaponColors.purple.colors) }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) this.nd1.active = !1, (t = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.v2(0, 0)).getChildByName("body").getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), t.setVec(e); else if (1 == this.SkillNumber) this.nd1.active = !1, (t = l.bulletFactory.getBullet(this.bulletType[1], this.nd1, this.checkName, cc.v2(0, 0)).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), t._linInit(e); else if (2 == this.SkillNumber) { var t; this.nd1.active = !1, (t = l.bulletFactory.getBullet(this.bulletType[2], this.nd1, this.checkName, cc.v2(0, 0)).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), t.setVec(e) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t += 2) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.v2(0, 0)).getChildByName("body").getComponent("BulletBase"); n._init(this.node.group, this.targetEnemy, this.human), n.setVec(o) } }, t.prototype.contactHuman = function (e) { this.AtkFrequency >= .1 && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(5)) }, t.prototype.contactWeapon = function (e) { if (this.effinvertal >= .5) { this.effinvertal = 0; var t = c.EffectType.playerWeaponHit, o = cc.v2(e.points[0].x - cc.winSize.width / 2, e.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(t, o) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i) : "weapons2" == i.group && n.points[0] && this.contactWeapon(n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i) : "weapons1" == i.group && n.points[0] && this.contactWeapon(n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 2, this.skillTimer >= 2 && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < .1 && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], CardGreen: [function (e, t, o) { "use strict"; cc._RF.push(t, "07eedQZoIpJ6oIhnac9Ug99", "CardGreen"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/ConfigManager"), s = e("./BulletBase"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.groundBody = null, t.lineTimer = null, t._flyV2 = null, t.isLineTimer = null, t.checkLine = !1, t.isEnd = null, t._targetColliders = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.group = e, this.node.getComponent(cc.PhysicsBoxCollider).sensor = !1, this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.node.getChildByName("line").group = e, this.node.getChildByName("line").getComponent(cc.PhysicsBoxCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t }, t.prototype._linInit = function (e) { this.checkLine = !0, this.isLineTimer = 0, this._targetColliders = null, this.groundBody = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 200, this._rigidBody.applyLinearImpulse(this._flyV2.mul(900 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.lineTimer = 0, this.isEnd = !1 }, t.prototype.onBeginContact = function (e, t, o) { if (null == this.groundBody) if ("weapons1" == t.node.group) { e.getWorldManifold(); var n = o.node.getComponent(cc.RigidBody); if (l.gameConfig.suverModel) "suverenemy" == o.node.group ? (o.node.parent.getComponent(a.default).setDamage(5), this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)) : "suverweapon" == o.node.group && (this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)); else if ("player2" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); o.node.parent.getComponent(a.default).setDamage(5), this.changeType(o.node), i.applyLinearImpulse(this._flyV2.mul(4e4), i.getWorldCenter(), !0) } else "weapons2" == o.node.group && (this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)) } else if ("weapons2" == t.node.group) if (n = o.node.getComponent(cc.RigidBody), l.gameConfig.suverModel) "suverenemy" == o.node.group ? (o.node.parent.getComponent(a.default).setDamage(5), this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)) : "suverweapon" == o.node.group && (this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)); else if ("player1" == o.node.group) { var r = o.node.getComponent(cc.RigidBody); o.node.parent.getComponent(a.default).setDamage(5), this.changeType(o.node), r.applyLinearImpulse(this._flyV2.mul(4e4), r.getWorldCenter(), !0) } else "weapons1" == o.node.group && (this.changeType(o.node), n.applyLinearImpulse(this._flyV2.mul(4e4), n.getWorldCenter(), !0)) }, t.prototype.changeType = function (e) { if (null != this.isEnd) if (e.getComponent(cc.RigidBody)) { this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 5e4, this._rigidBody.angularDamping = 5e4, this.isEnd = null, this.groundBody = !0; var t = e.getComponent(cc.RigidBody); this._targetColliders = e.getComponent(cc.RigidBody), this.node.getComponent(cc.PhysicsBoxCollider).sensor = !0, this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.node.getChildByName("line").setPosition(cc.v2(0, 0)), this.node.getChildByName("line").active = !0; var o = this.node.getChildByName("line").getComponent(cc.RopeJoint); o.enabled = !0, o.connectedBody = t, o.apply() } else this.fly = null, this.node.width = 0, this.node.active = !1, this.groundBody = !1, this.node.getComponent(cc.PhysicsBoxCollider).offset = cc.v2(0, 0), this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.node.destroy() }, t.prototype.lateUpdate = function (e) { if (this.checkLine && (this.isLineTimer += e, this.isLineTimer >= 15 && (this.isLineTimer = 0, this.checkLine = !1, this.node.destroy())), null != this.fly && null == this.groundBody && null != this.isEnd && this._rigidBody.applyTorque(120, !0), this.groundBody) { if (this.lineTimer += e, this._targetColliders && this._targetColliders.isValid) { var t = this._targetColliders.node.parent.convertToWorldSpaceAR(this._targetColliders.node.getPosition()), o = new cc.Vec2(0, 0); this.node.parent.convertToWorldSpaceAR(this.node.getPosition(), o); var n = this.node.convertToNodeSpaceAR(t), i = Math.atan2(this.node.getChildByName("line").getPosition().y - n.y, this.node.getChildByName("line").getPosition().x - n.x) * (180 / Math.PI); this.node.getChildByName("line").angle = i; var r = cc.Vec2.distance(t, o), a = o.sub(t); r > 300 && this._targetColliders.applyForceToCenter(a.mul(100), !0), this.node.getChildByName("line").width = r, this.node.getChildByName("line").getChildByName("line2").height = r } this.lineTimer >= 3 && (this.lineTimer = 0, this.groundBody = null, this.fly = null, this.node.width = 0, this.node.active = !1, this.node.getComponent(cc.PhysicsBoxCollider).offset = cc.v2(0, 0), this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.node.destroy()) } }, r([p], t) }(s.default)); o.default = u, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/ConfigManager": "ConfigManager", "./BulletBase": "BulletBase" }], CardPurple: [function (e, t, o) { "use strict"; cc._RF.push(t, "52949NWCVFL7q+iypXconIC", "CardPurple"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/EffectManager"), s = e("./BulletBase"), c = e("../Factory/BulletFactory"), p = e("../Manager/WeaponManager"), u = e("../Controller/HumanController"), d = e("../HumanStates/Human"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.damages = 5, t } return i(t, e), t.prototype._init = function (e, t, o) { this.damages = 5, this.node.group = e, this.node.getComponent(cc.PhysicsBoxCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 200, this._rigidBody.applyLinearImpulse(this._flyV2.mul(900 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.checkGate = function () { var e = this; if (null != this.targetEnemy) { var t = this.targetEnemy.convertToWorldSpaceAR(this.targetEnemy.getChildByName("body").getPosition()), o = this.user.convertToWorldSpaceAR(this.user.getChildByName("body").getPosition()), n = o.sub(t), i = t.sub(o), r = this.user.getPosition().add(i), a = this.targetEnemy.getPosition().add(n), s = [], c = []; cc.tween(this.node).delay(1 / 60).call(function () { var t = e.user.getComponent(d.default).mainpoint, o = e.targetEnemy.getComponent(d.default).mainpoint; e.user.getComponent(d.default).mainpoint = o, e.targetEnemy.getComponent(d.default).mainpoint = t, e.user.getComponent(u.default).isInvincible = !0, e.targetEnemy.getComponent(u.default).isInvincible = !0, e.user.setPosition(r), e.targetEnemy.setPosition(a), e.user.getComponentsInChildren(cc.RigidBody).forEach(function (e) { e.syncPosition(!0), e.node.getComponent(cc.Collider).sensor || (s.push(e.node.name), e.node.getComponent(cc.Collider).sensor = !0, e.node.getComponent(cc.Collider).apply()) }), e.targetEnemy.getComponentsInChildren(cc.RigidBody).forEach(function (e) { e.syncPosition(!0), e.node.getComponent(cc.Collider).sensor || (c.push(e.node.name), e.node.getComponent(cc.Collider).sensor = !0, e.node.getComponent(cc.Collider).apply()) }) }).delay(.05).call(function () { e.user.getComponentsInChildren(cc.RigidBody).forEach(function (e) { -1 != s.indexOf(e.node.name) && (e.node.getComponent(cc.Collider).sensor = !1, e.node.getComponent(cc.Collider).apply()) }), e.targetEnemy.getComponentsInChildren(cc.RigidBody).forEach(function (e) { -1 != c.indexOf(e.node.name) && (e.node.getComponent(cc.Collider).sensor = !1, e.node.getComponent(cc.Collider).apply()) }), e.user.getComponent(u.default).isInvincible = !1, e.targetEnemy.getComponent(u.default).isInvincible = !1, l.effectManager.playEffect(l.EffectType.playerWeaponHit, e.targetEnemy.getChildByName("body").getPosition(), e.targetEnemy), l.effectManager.playEffect(l.EffectType.playerWeaponHit, e.user.getChildByName("body").getPosition(), e.user), e.node.destroy() }).union().start() } }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if (null != this.fly && ("weapons1" == this.node.group || "weapons2" == this.node.group)) { var i = function () { e.getWorldManifold(), n.fly = null, n.isBoom = !0, n.checkGate() }; "weapons1" == t.node.group ? a.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player2" == o.node.group && i() : "weapons2" == t.node.group && (a.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player1" == o.node.group && i()) } }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.parent.isValid && null != this.fly && (this.isTimer += e, this._rigidBody.applyTorque(120, !0), this.isTimer >= 14 && (this.fly = null, c.bulletFactory.putBullet(p.BulletType.cardPurple, this.node))) }, r([g], t) }(s.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], CardRedScale: [function (e, t, o) { "use strict"; cc._RF.push(t, "23d75MNVy9FdrMOTWaoRd12", "CardRedScale"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../HumanStates/Human"), s = e("../Manager/ConfigManager"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.targetlist = [], t.damages = 5, t.AtkFrequency = .1, t } return i(t, e), t.prototype.setDamages = function (e, t) { var o = this; this.targetlist = [], this.damages = e, this.AtkFrequency = .1, cc.tween(this.node).set({ scale: 0 }).to(.05 + .3 * t, { scale: .2 + t }).call(function () { o.node.parent.destroy() }).union().start() }, t.prototype.getHeadToGround = function (e) { var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this.node.getComponent(cc.RigidBody).getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = i.mul(100 * t.getMass()); t.applyForceToCenter(r, !0) }, t.prototype.onBeginContact = function (e, t, o) { "weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == o.node.group && o.node.parent.getComponent(l.default) && (this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(this.damages)), -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : "player2" == o.node.group && o.node.parent.getComponent(l.default) && (this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(this.damages)), -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : "weapons2" == t.node.group && (e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group && o.node.parent.getComponent(l.default) && (this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(this.damages)), -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : "player1" == o.node.group && o.node.parent.getComponent(l.default) && (this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(this.damages)), -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node))) }, t.prototype.onEndContact = function (e, t, o) { -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1) }, t.prototype.update = function (e) { var t = this; this.targetlist.length > 0 && this.targetlist.forEach(function (e) { t.getHeadToGround(e) }), this.AtkFrequency < .2 && (this.AtkFrequency += e) }, r([p], t) }(cc.Component)); o.default = u, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager" }], CardRed: [function (e, t, o) { "use strict"; cc._RF.push(t, "b2201f+NlJBd7qngp4+gq+w", "CardRed"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Component/CardRedScale"), l = e("../Manager/ConfigManager"), s = e("../Manager/EffectManager"), c = e("./BulletBase"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.damages = 5, t } return i(t, e), t.prototype._init = function (e, t, o) { this.damages = 5, this.node.group = e, this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.node.parent.getChildByName("3").group = e, this.node.parent.getChildByName("3").getComponent(cc.PhysicsCircleCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t, this.node.parent.getChildByName("1").active = !0, this.node.parent.getChildByName("3").active = !1 }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this.node.parent.getChildByName("1").active = !0, this.node.parent.getChildByName("3").active = !1, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 200, this._rigidBody.applyLinearImpulse(this._flyV2.mul(900 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("weapons1" == this.node.group || "weapons2" == this.node.group) { var i = function () { var t = e.getWorldManifold(); n.fly = null, n.isBoom = !0, n._rigidBody.linearVelocity = cc.v2(0, 0), n._rigidBody.angularVelocity = 0, n._rigidBody.fixedRotation = !1, n._rigidBody.gravityScale = 0, n._rigidBody.linearDamping = 5e4, n._rigidBody.angularDamping = 5e4, n.node.parent.getChildByName("1").active = !1, n.node.parent.getChildByName("3").setPosition(n.node.getPosition()), n.node.parent.getChildByName("body").active = !1, n.node.parent.getChildByName("3").active = !0, n.node.parent.getChildByName("3").getComponent(a.default).setDamages(n.damages + Math.floor(n.isTimer), n.isTimer / 4), "weapons1" == n.node.group && t.points[0] ? s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2)) : "weapons2" == n.node.group && t.points[0] && s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2)) }; "weapons1" == t.node.group ? l.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && i() : "player2" == o.node.group ? i() : "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && i() : "bomb2" == o.node.group && i() : "weapons2" == t.node.group && (l.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group || i() : "player1" == o.node.group ? i() : "weapons1" == o.node.group ? i() : "bomb1" == o.node.group && i()) } }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.parent.isValid && (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.isTimer += e, this._rigidBody.applyTorque(120, !0), this.isTimer >= 4 && !this.isBoom && (this.fly = null, this.isBoom = !0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.fixedRotation = !1, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 5e4, this._rigidBody.angularDamping = 5e4, this.node.parent.getChildByName("1").active = !1, this.node.parent.getChildByName("3").setPosition(this.node.getPosition()), this.node.parent.getChildByName("3").active = !0, this.node.parent.getChildByName("3").getComponent(a.default).setDamages(this.damages, this.isTimer / 4), this.node.parent.getChildByName("body").active = !1))) }, r([u], t) }(c.default)); o.default = d, cc._RF.pop() }, { "../Component/CardRedScale": "CardRedScale", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./BulletBase": "BulletBase" }], ChooseView: [function (e, t, o) { "use strict"; cc._RF.push(t, "8d775vk//hHspNAQuER37HF", "ChooseView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/WeaponManager"), l = e("../Manager/UserProfile"), s = e("../Utils/Utils"), c = e("../Manager/ConfigManager"), p = e("../Manager/AudioManager"), u = e("../Manager/LevelManager"), d = e("../scenes/nicknames"), h = e("../scenes/RondOut"), g = e("../Manager/TipsManager"), f = e("../Manager/adManager"), y = e("../Manager/localConfig"), m = cc._decorator, v = m.ccclass, _ = m.property, C = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Center = null, t.Player1 = null, t.Player2 = null, t.Player1Weapon = null, t.Player2Weapon = null, t.Player1Present = null, t.Player2Present = null, t.LevelLabel = null, t.GoldLabel = null, t.KeysLabel = null, t.Player1UI = null, t.Players2UI = null, t.levelProgress = null, t.indicatorLootbox1P = null, t.indicatorLootbox2P = null, t.indicatorArena = null, t.arenaNode = null, t.lootBoxBtnNode = null, t.lootBoxBtn2Node = null, t.ndHand = null, t.startBtn1P = null, t.skins1P = null, t.colors1P = null, t.weapons1P = null, t.settingsBtn = null, t.backBtn = null, t.lootboxNodes = [], t.leaderboardBtn = null, t.arenaLockedLabel = null, t.mapNumber = 0, t.loadSceneView = null, t._handPos1 = new cc.Vec3, t._handPos2 = new cc.Vec3, t._tweenHand = null, t.isloadLevel = !1, t.isGoldAd = !1, t.isShowFlyMoney = !1, t.flyMoneyNd = null, t } return i(t, e), t.prototype.onLoad = function () { var e = this; this.node.width = cc.winSize.width, this.node.height = cc.winSize.height, cc.assetManager.getBundle("prefabs").load("views/RondOut", cc.Prefab, function (t, o) { var n = cc.instantiate(o); n.parent = cc.find("Canvas"), n.active = !1, e.loadSceneView = n, e.loadSceneView.zIndex = 10 }), c.gameConfig.chooseView = this, cc.winSize.width / cc.winSize.height < 1.65 && (this.startBtn1P.node.getComponent(cc.Widget).right = 300, this.leaderboardBtn.getComponent(cc.Widget).right = 115, this.arenaNode.getComponent(cc.Widget).right = 200); var t = l.userProfile.data.level >= 6; this.arenaNode.getChildByName("locked").active = !t, this.arenaNode.getChildByName("label").active = t, this.leaderboardBtn.active = l.userProfile.data.rating > 0, 1 != c.gameConfig.gameChooseViewNumber || 1 != l.userProfile.data.level || l.userProfile.data.isPassShopTutorial ? 1 != c.gameConfig.gameChooseViewNumber || 6 != l.userProfile.data.level || l.userProfile.data.isPassArenaTutorial || (this.startBtn1P.node.active = !1, l.userProfile.data.keys < 1 && (l.userProfile.data.keys = 1), this.backBtn.interactable = !1, this._showHand(this.arenaNode)) : (l.userProfile.data.gold < 150 && (l.userProfile.data.gold = 150), this.updateGold(), this._showHand(this.lootBoxBtnNode), this.changeInteractable(!1)), this.initIndicatorTween(this.indicatorLootbox1P), this.initIndicatorTween(this.indicatorLootbox2P), this.initIndicatorTween(this.indicatorArena), cc.winSize.width / cc.winSize.height >= 1.8 && (this.Player1.parent.getComponent(cc.Widget).left = 250, this.Player2.parent.getComponent(cc.Widget).right = 250) }, t.prototype.changeInteractable = function (e) { this.startBtn1P.interactable = e, this.skins1P.interactable = e, this.colors1P.interactable = e, this.weapons1P.interactable = e, this.settingsBtn.interactable = e, this.backBtn.interactable = e }, t.prototype.onEnable = function () { this.Player1UI.active = 1 == c.gameConfig.gameChooseViewNumber, this.Players2UI.active = 1 != c.gameConfig.gameChooseViewNumber; var e = l.userProfile.data.level, t = y.localConfig.instance.queryByID("locs", "level"); if (this.LevelLabel.string = t[c.gameConfig.lang] + " " + (e + 1), this.arenaLockedLabel.string = t[c.gameConfig.lang] + " 6", this.updateGold(), c.gameConfig.isShowFinishView = !1, 6 == e && null == l.userProfile.data.playerName && this.loadView("NicknameView"), 1 != c.gameConfig.gameChooseViewNumber || l.userProfile.data.isPassTutorial || (this.ChangeSceneLevels(), this.node.active = !1), 2 != c.gameConfig.gameChooseViewNumber || l.userProfile.data.isPass2PlayersTutorial || (this.ChangeScene(), this.node.active = !1), !this.isShowFlyMoney) { var o = l.userProfile.data.gold; 1 == c.gameConfig.gameChooseViewNumber && l.userProfile.data.isPassTutorial && 6 != e && 1 != e && e % 2 == 0 && o >= 120 && o < 300 && l.userProfile.data.reward < 78 && this.showFlyMoney() } }, t.prototype.showFlyMoney = function () { var e = this; cc.assetManager.getBundle("prefabs").load("views/flyMoney", cc.Prefab, function (t, o) { var n = cc.instantiate(o); n.parent = e.node, n.active = !0, n.zIndex = 3, e.flyMoneyNd = n }), this.isShowFlyMoney = !0 }, t.prototype.initIndicatorTween = function (e) { cc.tween(e).repeatForever(cc.tween().to(.5, { scale: 1.2, opacity: 220 }, { easing: "sineOut" }).to(.5, { scale: 1, opacity: 255 }, { easing: "sineIn" })).start(), cc.tween(e).repeatForever(cc.tween().by(5, { angle: 360 }, { easing: "linear" })).start() }, t.prototype._showHand = function (e) { this._tweenHand && (this._tweenHand.stop(), this._tweenHand = null), this.ndHand.active = !0, this.ndHand.parent = e, this.ndHand.setPosition(0, 0), this._handPos1.set(new cc.Vec3(20, -20, 0)), this._handPos2.set(new cc.Vec3(0, 0, 0)), this._tweenHand = cc.tween(this.ndHand).to(.5, { position: this._handPos1 }).to(.5, { position: this._handPos2 }).union().repeatForever().start() }, t.prototype.updateGold = function () { this.GoldLabel.string = "" + l.userProfile.data.gold, this.KeysLabel.string = "" + l.userProfile.data.keys; var e = 1 == c.gameConfig.gameChooseViewNumber; this.KeysLabel.node.parent.active = e, this.levelProgress.active = e, this.Player1UI.active = e, this.Players2UI.active = !e, this.indicatorArena.active = l.userProfile.data.keys > 0 && l.userProfile.data.level >= 6, this.indicatorLootbox1P.active = l.userProfile.data.gold >= 150, this.indicatorLootbox2P.active = l.userProfile.data.gold >= 150, 1 != c.gameConfig.gameChooseViewNumber || 6 != l.userProfile.data.level || l.userProfile.data.isPassArenaTutorial || (this.indicatorLootbox1P.active = !1), (l.userProfile.data.reward >= 79 || this.checkAllUnlock()) && this.lootboxNodes.forEach(function (e) { e.active = !1 }), l.userProfile.data.gold < 150 && !c.gameConfig.isWatchedGoldAd ? (this.lootBoxBtnNode.getChildByName("golds").active = !1, this.lootBoxBtnNode.getChildByName("ad").active = !0, this.lootBoxBtnNode.getChildByName("yellowBtn").active = !0, this.lootBoxBtnNode.getChildByName("locked").active = !1, this.lootBoxBtn2Node.getChildByName("golds").active = !1, this.lootBoxBtn2Node.getChildByName("ad").active = !0, this.lootBoxBtn2Node.getChildByName("yellowBtn").active = !0, this.lootBoxBtn2Node.getChildByName("locked").active = !1) : l.userProfile.data.gold < 150 && c.gameConfig.isWatchedGoldAd ? (this.lootBoxBtnNode.getChildByName("golds").active = !0, this.lootBoxBtnNode.getChildByName("ad").active = !1, this.lootBoxBtnNode.getChildByName("yellowBtn").active = !1, this.lootBoxBtnNode.getChildByName("locked").active = !0, this.lootBoxBtn2Node.getChildByName("golds").active = !0, this.lootBoxBtn2Node.getChildByName("ad").active = !1, this.lootBoxBtn2Node.getChildByName("yellowBtn").active = !1, this.lootBoxBtn2Node.getChildByName("locked").active = !0) : (this.lootBoxBtnNode.getChildByName("golds").active = !0, this.lootBoxBtnNode.getChildByName("ad").active = !1, this.lootBoxBtnNode.getChildByName("yellowBtn").active = !1, this.lootBoxBtnNode.getChildByName("locked").active = !1, this.lootBoxBtn2Node.getChildByName("golds").active = !0, this.lootBoxBtn2Node.getChildByName("ad").active = !1, this.lootBoxBtn2Node.getChildByName("yellowBtn").active = !1, this.lootBoxBtn2Node.getChildByName("locked").active = !1), l.userProfile.data.level >= 6 && l.userProfile.data.isPassArenaTutorial && (this.arenaNode.getChildByName("key").active = 0 != l.userProfile.data.keys, this.arenaNode.getChildByName("ad").active = 0 == l.userProfile.data.keys, this.arenaNode.getChildByName("label").active = 0 != l.userProfile.data.keys) }, t.prototype.checkAllUnlock = function () { var e = Object.values(l.userProfile.data.weaponsUnLock).every(function (e) { return !0 === e }), t = Object.values(l.userProfile.data.skinsUnLock).every(function (e) { return !0 === e }); return e && t }, t.prototype.start = function () { this.initHuman1(), this.initHuman2() }, t.prototype.loadWeapon = function (e, t) { var o = e.split("_")[1], n = "random"; "random" != e && (n = a.weaponConfig["allBlue_" + o].prefabName), cc.assetManager.getBundle("prefabs").load("weaponsIcons/" + n, cc.Prefab, function (e, o) { cc.instantiate(o).parent = t }) }, t.prototype.initHuman1 = function () { var e = l.userProfile.data.weapons1, t = this.Player1.getChildByName("WeaponsName").getChildByName("name").getComponent(cc.Label); if (e) { this.loadWeapon(e, this.Player1Weapon); var o = y.localConfig.instance.queryByID("locs", a.weaponConfig[e].prefabName); t.string = o[c.gameConfig.lang] } else this.loadWeapon("random", this.Player1Weapon), t.string = "???"; var n = l.userProfile.data.skins1; n && this.applySkin(this.Player1, this.Player1Present, n); var i = l.userProfile.data.Allcolor1; i && this.applyColor(this.Player1, i) }, t.prototype.initHuman2 = function () { 1 == c.gameConfig.gameChooseViewNumber && (l.userProfile.data.weapons2 = null, l.userProfile.data.skins2 = null, l.userProfile.data.Allcolor2 = c.CustomColors[9].colors); var e = l.userProfile.data.weapons2, t = this.Player2.getChildByName("WeaponsName").getChildByName("name").getComponent(cc.Label); if (e) { var o = "allBlue_" + e.split("_")[1]; this.loadWeapon(e, this.Player2Weapon); var n = y.localConfig.instance.queryByID("locs", a.weaponConfig[o].prefabName); t.string = n[c.gameConfig.lang] } else this.loadWeapon("random", this.Player2Weapon), t.string = "???"; var i = l.userProfile.data.skins2; i && this.applySkin(this.Player2, this.Player2Present, i); var r = l.userProfile.data.Allcolor2; r ? this.applyColor(this.Player2, r) : 2 == c.gameConfig.gameChooseViewNumber && this.applyColor(this.Player2, c.CustomColors[8].colors) }, t.prototype.applySkin = function (e, t, o) { var n = t.getChildByName("Center"); n.active = !0, n.getComponent(cc.Sprite).spriteFrame = c.gameConfig.AllSkins.getSpriteFrame(o) }, t.prototype.applyColor = function (e, t) { e.getChildByName("human").children.forEach(function (e) { if ("present" != e.name) { var o = new cc.Color; o._val = t._val, e.color = o, e.children.length > 0 && e.children.forEach(function (e) { e.color = o }) } }), e.active = !0 }, t.prototype.reward = function (e) { e && (this.isGoldAd ? (c.gameConfig.isWatchedGoldAd = !0, l.userProfile.data.gold += 150, l.userProfile.save(), this.updateGold(), this.openLootBox()) : (l.userProfile.data.arenaNum++, l.userProfile.save(), this.updateGold(), this.loadNextMap())) }, t.prototype.openLootBox = function () { l.userProfile.data.gold -= 150, 1 != c.gameConfig.gameChooseViewNumber || 1 != l.userProfile.data.level || l.userProfile.data.isPassShopTutorial || (l.userProfile.data.isPassShopTutorial = !0, this.ndHand.active = !1, this.changeInteractable(!0)), l.userProfile.save(), this.updateGold(), this.loadView("NewWeaponsView") }, t.prototype.buyLootbox = function () { p.audioManager.playEffect("click"), l.userProfile.data.gold < 150 && !c.gameConfig.isWatchedGoldAd ? (this.isGoldAd = !0, f.default.instance.showRewardAd(this, "LowGold")) : l.userProfile.data.gold < 150 && c.gameConfig.isWatchedGoldAd || this.openLootBox() }, t.prototype.ChangeWeapons = function (e, t, o, n) { 1 == o ? this.changeWeapon(e, t) : 2 == o ? this.changeSkin(e, t) : 3 == o && this.changeColor(e, n), n ? l.userProfile.changeWeaponSkin(e, o, t, n) : l.userProfile.changeWeaponSkin(e, o, t), this.CloseView() }, t.prototype.changeWeapon = function (e, t) { var o = 1 == e ? this.Player1 : this.Player2, n = 1 == e ? this.Player1Weapon : this.Player2Weapon; n.children.length > 0 && n.children[0].destroy(); var i = o.getChildByName("WeaponsName").getChildByName("name").getComponent(cc.Label); if (t) { this.loadWeapon(t, n); var r = t.split("_")[1], l = a.weaponConfig["allBlue_" + r].prefabName, s = y.localConfig.instance.queryByID("locs", l); i.string = s[c.gameConfig.lang] } else this.loadWeapon("random", n), i.string = "???"; o.active = !0 }, t.prototype.changeSkin = function (e, t) { var o = 1 == e ? this.Player1 : this.Player2, n = 1 == e ? this.Player1Present : this.Player2Present; null == t ? n.getChildByName("Center").active = !1 : this.applySkin(o, n, t), o.active = !0 }, t.prototype.changeColor = function (e, t) { var o = 1 == e ? this.Player1 : this.Player2; o.getChildByName("human").children.forEach(function (e) { e.color = t, "present" != e.name && e.children.length > 0 && e.children.forEach(function (e) { e.color = t }) }), o.active = !0 }, t.prototype.CloseView = function () { this.Player1UI.active = 1 == c.gameConfig.gameChooseViewNumber, this.Players2UI.active = 1 != c.gameConfig.gameChooseViewNumber, 2 == c.gameConfig.gameChooseViewNumber && (this.Player1.parent.active = !0, this.Player2.parent.active = !0), this.flyMoneyNd && (this.flyMoneyNd.active = !0) }, t.prototype.ShowView = function (e, t) { var o = parseInt(t); this.loadView(["WeaponsView", "WeaponsView2", "SkinsView", "SkinsView2", "ColorsView", "ColorsView2"][o - 1]), this.Player1UI.active = !1, this.Players2UI.active = !1, 2 == c.gameConfig.gameChooseViewNumber && (this.Player1.parent.active = !1, this.Player2.parent.active = !1), this.flyMoneyNd && (this.flyMoneyNd.active = !1), p.audioManager.playEffect("click") }, t.prototype.loadView = function (e) { cc.assetManager.getBundle("prefabs").load("views/" + e, cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 }) }, t.prototype.ChangeScene = function () { if (1 == c.gameConfig.gameChooseViewNumber) { if (l.userProfile.data.level < 6) { var e = y.localConfig.instance.queryByID("locs", "arenaTip"); return void g.tipsManager.ShowTips(e[c.gameConfig.lang]) } l.userProfile.data.keys < 1 ? (p.audioManager.playEffect("click"), this.isGoldAd = !1, f.default.instance.showRewardAd(this, "LowKey")) : (l.userProfile.data.keys--, l.userProfile.data.arenaNum++, 1 != c.gameConfig.gameChooseViewNumber || 6 != l.userProfile.data.level || l.userProfile.data.isPassArenaTutorial || (l.userProfile.data.isPassArenaTutorial = !0, this.ndHand.active = !1, this.changeInteractable(!0), this.lootBoxBtnNode.getComponent(cc.Button).interactable = !0), l.userProfile.save(), this.updateGold(), f.default.instance.showInterstitialAd(this)) } else f.default.instance.showInterstitialAd(this) }, t.prototype.loadNextMap = function () { var e = s.RandomRangeInt(1, 30); 2 == c.gameConfig.gameChooseViewNumber && (e = s.RandomRangeInt(1, 40)), c.gameConfig.suverModel = !1; var t = 0 == this.mapNumber ? "S" + e : "S" + this.mapNumber; if (1 == c.gameConfig.gameChooseViewNumber && (t = "S" + e), c.gameConfig.SceneStr = t, 1 == c.gameConfig.gameChooseViewNumber) { var o = s.RandomRangeInt(0, 12); l.userProfile.data.Allcolor2 = c.CustomColors[o].colors, l.userProfile.data.weapons2 = null; var n = [null, "Skin_0", "Skin_1", "Skin_2", "Skin_3", "Skin_4", "Skin_5", "Skin_6", "Skin_7", "Skin_8", "Skin_9", "Skin_10", "Skin_11", "Skin_12", "Skin_13", "Skin_15", "Skin_16", "Skin_17", "Skin_18", "Skin_19", "Skin_20", "Skin_21", "Skin_22", "Skin_23", "Skin_24", "Skin_25", "Skin_27", "Skin_28", "Skin_29", "Skin_30", "Skin_31", "Skin_32", "Skin_33", "Skin_34", "Skin_35", "Skin_38"], i = s.RandomRangeInt(0, n.length - 1); l.userProfile.data.skins2 = n[i]; var r = [null, null, null, null, null, null, null, null, null, null, "allRed_0", "allRed_1", "allRed_2", "allRed_3", "allRed_4", "allRed_5", "allRed_6", "allRed_7", "allRed_8", "allRed_9", "allRed_10", "allRed_11", "allRed_12", "allRed_13", "allRed_14", "allRed_16", "allRed_17", "allRed_18", "allRed_19", "allRed_20", "allRed_21", "allRed_23", "allRed_24", "allRed_25", "allRed_27", "allRed_28", "allRed_29", "allRed_30", "allRed_31", "allRed_32", "allRed_33", "allRed_34", "allRed_35", "allRed_36", "allRed_37", "allRed_38", "allRed_39"]; 1 == l.userProfile.data.arenaNum && (r = ["allRed_0", "allRed_1", "allRed_3"]); var a = s.RandomRangeInt(0, r.length - 1); l.userProfile.data.weapons2 = r[a]; var p = ""; Math.random() < .5 ? (p = d.nicknames[s.RandomRangeInt(0, d.nicknames.length)], Math.random() < .5 && (p += s.RandomRangeInt(0, 9999))) : p = "Player#" + s.RandomRangeInt(1e7, 99999999), l.userProfile.data.enemyName = p, this.loadView("ArenaView") } else this.loadSceneView ? (this.loadSceneView.active = !0, this.loadSceneView.getComponent(h.default).init(t)) : cc.director.loadScene(t) }, t.prototype.ChangeSceneLevels = function () { c.gameConfig.suverModel = !0, c.gameConfig.gameChooseViewNumber = 3, c.gameConfig.spawnEnemies = 0, c.gameConfig.killedEnemies = 0, c.gameConfig.activeEnemies = 0, this.isloadLevel = !0, f.default.instance.showInterstitialAd(this) }, t.prototype.afterInter = function () { this.isloadLevel ? (this.isloadLevel = !1, this.loadLevel()) : this.loadNextMap() }, t.prototype.loadLevel = function () { if (l.userProfile.data.isPassTutorial) { var e = l.userProfile.data.level % c.gameConfig.maxLevel; c.gameConfig.maxEnemies = u.levelConfig[e].maxEnemies, c.gameConfig.suverEnemiesNum = u.levelConfig[e].suverEnemiesNum, c.gameConfig.SceneStr = u.levelConfig[e].map, c.gameConfig.enemyHp = u.levelConfig[e].enemyHp, c.gameConfig.enemyAtk = u.levelConfig[e].enemyAtk, this.loadSceneView.active = !0, this.loadSceneView.getComponent(h.default).init(c.gameConfig.SceneStr) } else this.loadTutorial() }, t.prototype.loadTutorial = function () { var e = l.userProfile.data.level % c.gameConfig.maxLevel; c.gameConfig.maxEnemies = u.levelConfig[e].maxEnemies, c.gameConfig.suverEnemiesNum = u.levelConfig[e].suverEnemiesNum, c.gameConfig.SceneStr = u.levelConfig[e].map, c.gameConfig.enemyHp = u.levelConfig[e].enemyHp, c.gameConfig.enemyAtk = u.levelConfig[e].enemyAtk, cc.director.loadScene(c.gameConfig.SceneStr) }, t.prototype.showLeaderboard = function () { p.audioManager.playEffect("click"), this.loadView("LeaderboardView") }, t.prototype.onDisable = function () { }, r([_(cc.Node)], t.prototype, "Center", void 0), r([_(cc.Node)], t.prototype, "Player1", void 0), r([_(cc.Node)], t.prototype, "Player2", void 0), r([_(cc.Node)], t.prototype, "Player1Weapon", void 0), r([_(cc.Node)], t.prototype, "Player2Weapon", void 0), r([_(cc.Node)], t.prototype, "Player1Present", void 0), r([_(cc.Node)], t.prototype, "Player2Present", void 0), r([_(cc.Label)], t.prototype, "LevelLabel", void 0), r([_(cc.Label)], t.prototype, "GoldLabel", void 0), r([_(cc.Label)], t.prototype, "KeysLabel", void 0), r([_(cc.Node)], t.prototype, "Player1UI", void 0), r([_(cc.Node)], t.prototype, "Players2UI", void 0), r([_(cc.Node)], t.prototype, "levelProgress", void 0), r([_(cc.Node)], t.prototype, "indicatorLootbox1P", void 0), r([_(cc.Node)], t.prototype, "indicatorLootbox2P", void 0), r([_(cc.Node)], t.prototype, "indicatorArena", void 0), r([_(cc.Node)], t.prototype, "arenaNode", void 0), r([_(cc.Node)], t.prototype, "lootBoxBtnNode", void 0), r([_(cc.Node)], t.prototype, "lootBoxBtn2Node", void 0), r([_(cc.Node)], t.prototype, "ndHand", void 0), r([_(cc.Button)], t.prototype, "startBtn1P", void 0), r([_(cc.Button)], t.prototype, "skins1P", void 0), r([_(cc.Button)], t.prototype, "colors1P", void 0), r([_(cc.Button)], t.prototype, "weapons1P", void 0), r([_(cc.Button)], t.prototype, "settingsBtn", void 0), r([_(cc.Button)], t.prototype, "backBtn", void 0), r([_(cc.Node)], t.prototype, "lootboxNodes", void 0), r([_(cc.Node)], t.prototype, "leaderboardBtn", void 0), r([_(cc.Label)], t.prototype, "arenaLockedLabel", void 0), r([v], t) }(cc.Component); o.default = C, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/LevelManager": "LevelManager", "../Manager/TipsManager": "TipsManager", "../Manager/UserProfile": "UserProfile", "../Manager/WeaponManager": "WeaponManager", "../Manager/adManager": "adManager", "../Manager/localConfig": "localConfig", "../Utils/Utils": "Utils", "../scenes/RondOut": "RondOut", "../scenes/nicknames": "nicknames" }], ColorsItem: [function (e, t, o) { "use strict"; cc._RF.push(t, "e1b71BOGjdPP7nkCyKm+W7S", "ColorsItem"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../UI/ChooseView"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._views = null, t.sksName = null, t._target = null, t.state = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.Init = function (e, t, o) { this.node.color = e, this.sksName = e, this._views = t, this._target = o, this.state = 3 }, t.prototype.Init2 = function (e, t, o) { this.node.color = e, this.sksName = e, this._views = t, this._target = o, this.state = 4 }, t.prototype.clickEvent = function () { this._views.active = !1, cc.find("Canvas/ChooseView").getComponent(a.default).ChangeWeapons(this._target, "", this.state, this.sksName) }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../UI/ChooseView": "ChooseView" }], ColorsView: [function (e, t, o) { "use strict"; cc._RF.push(t, "59dc8jENSFGEIN0D+8mgAzs", "ColorsView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../ScrollItem/ColorsItem"), s = e("./ChooseView"), c = cc._decorator, p = c.ccclass, u = c.property, d = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Content = null, t.ItemNode = null, t } return i(t, e), t.prototype.onLoad = function () { this._init() }, t.prototype.start = function () { }, t.prototype._init = function () { this.Content.destroyAllChildren(), this._AddItem() }, t.prototype._AddItem = function () { var e = a.CustomColors, t = 2; "ColorsView" == this.node.name && (t = 1); for (var o = 0; o < 15; o++) { var n = e[o].colors, i = cc.instantiate(this.ItemNode); i.parent = this.Content, i.getComponent(l.default).Init(n, this.node, t) } }, t.prototype.CloseView = function () { cc.find("Canvas/ChooseView").getComponent(s.default).CloseView(), this.node.destroy() }, r([u(cc.Node)], t.prototype, "Content", void 0), r([u(cc.Prefab)], t.prototype, "ItemNode", void 0), r([p], t) }(cc.Component); o.default = d, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../ScrollItem/ColorsItem": "ColorsItem", "./ChooseView": "ChooseView" }], ConfigManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "ece8e5cnH9HRod19YlyxPqL", "ConfigManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.weaponColors = o.CustomColors = o.ScenePostions = o.gameConfig = o.JoyStickPos = o.PlayerGameState = void 0; var i = cc._decorator, r = i.ccclass; i.property, function (e) { e[e.None = 1] = "None", e[e.Player = 2] = "Player", e[e.AI = 3] = "AI" }(o.PlayerGameState || (o.PlayerGameState = {})), function (e) { e[e.Left = 1] = "Left", e[e.Right = 2] = "Right" }(o.JoyStickPos || (o.JoyStickPos = {})), o.gameConfig = { isMobile: !1, isCheck: 0, gameStart: !1, P1Run: !1, P2Run: !1, gameChooseViewNumber: 0, suverModel: !1, AllSkins: null, SceneStr: "S1", weaponsAddHp: 10, weaponsAddAtk: 5, player1AtkBuff: !1, player2AtkBuff: !1, aiAtkBuff: !1, player1ShieldBuff: !1, player2ShieldBuff: !1, aiShieldBuff: !1, WhoKill: null, suverEnemiesNum: 5, maxEnemies: 3, activeEnemies: 0, spawnEnemies: 0, killedEnemies: 0, enemyHp: 20, enemyAtk: 7, isLeftWin: !1, isShowFinishView: !1, maxLevel: 30, isStartMusic: !1, isPlayingAd: !1, isLoadingFinished: !1, isPass2PlayersTutorial: !1, isPass1PlayerTutorial: !1, isWatchedGoldAd: !1, isFirstFight: !0, lang: "en", lastBuyWeapon: null, lastBuySkin: null, chooseView: null }, o.ScenePostions = { S1: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S2: { pos1: cc.v2(-275, 500), pos2: cc.v2(305, 500), itemPos: [cc.v2(0, 0), cc.v2(-1110, 140), cc.v2(1110, 140)] }, S3: { pos1: cc.v2(-600, 256), pos2: cc.v2(600, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680)] }, S4: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S5: { pos1: cc.v2(-600, 256), pos2: cc.v2(600, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S6: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S7: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680)] }, S8: { pos1: cc.v2(-426, -314.635), pos2: cc.v2(426, -314.635), itemPos: [cc.v2(0, -60), cc.v2(-430, -60), cc.v2(430, -60)] }, S9: { pos1: cc.v2(-400, 350), pos2: cc.v2(400, 350), itemPos: [cc.v2(0, 460), cc.v2(-1120, 500), cc.v2(1120, 500)] }, S10: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680)] }, S11: { pos1: cc.v2(-425, -40), pos2: cc.v2(425, -40), itemPos: [cc.v2(0, 450), cc.v2(0, 900), cc.v2(0, 0), cc.v2(450, 450), cc.v2(-450, 450)] }, S12: { pos1: cc.v2(-450, 300), pos2: cc.v2(450, 300), itemPos: [cc.v2(0, 460), cc.v2(0, 730), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S13: { pos1: cc.v2(-340, 170), pos2: cc.v2(340, 170), itemPos: [cc.v2(0, 0), cc.v2(-1030, 0), cc.v2(1030, 0)] }, S14: { pos1: cc.v2(-410, -100), pos2: cc.v2(410, -100), itemPos: [cc.v2(0, 450), cc.v2(0, 900), cc.v2(0, 0), cc.v2(450, 450), cc.v2(-450, 450)] }, S15: { pos1: cc.v2(-300, 850), pos2: cc.v2(300, 850), itemPos: [cc.v2(1050, 450), cc.v2(-1050, 450), cc.v2(1050, -350), cc.v2(-1050, -350)] }, S16: { pos1: cc.v2(-200, 256), pos2: cc.v2(200, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S17: { pos1: cc.v2(-300, 850), pos2: cc.v2(300, 850), itemPos: [cc.v2(1050, 450), cc.v2(-1050, 450), cc.v2(1050, -350), cc.v2(-1050, -350)] }, S18: { pos1: cc.v2(-426, -314), pos2: cc.v2(426, -314), itemPos: [cc.v2(0, 0), cc.v2(1200, 0), cc.v2(-1200, 0)] }, S19: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S20: { pos1: cc.v2(-400, 400), pos2: cc.v2(400, 400), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S21: { pos1: cc.v2(-425, -40), pos2: cc.v2(425, -40), itemPos: [cc.v2(0, 450), cc.v2(0, 900), cc.v2(0, 600), cc.v2(450, 450), cc.v2(-450, 450)] }, S22: { pos1: cc.v2(-410, -100), pos2: cc.v2(410, -100), itemPos: [cc.v2(0, 450), cc.v2(0, 900), cc.v2(0, 0), cc.v2(450, 450), cc.v2(-450, 450)] }, S23: { pos1: cc.v2(-600, 400), pos2: cc.v2(600, 400), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S24: { pos1: cc.v2(-400, 656), pos2: cc.v2(400, 656), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S25: { pos1: cc.v2(-600, 256), pos2: cc.v2(600, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680)] }, S26: { pos1: cc.v2(-710, 100), pos2: cc.v2(710, 100), itemPos: [cc.v2(0, 100), cc.v2(0, -340), cc.v2(-1640, 100), cc.v2(1640, 100)] }, S27: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680)] }, S28: { pos1: cc.v2(-700, 280), pos2: cc.v2(700, 280), itemPos: [cc.v2(0, 230), cc.v2(0, -380), cc.v2(-1500, -360), cc.v2(1500, -360)] }, S29: { pos1: cc.v2(-400, 256), pos2: cc.v2(400, 256), itemPos: [cc.v2(0, 460), cc.v2(-1120, 680), cc.v2(1120, 680), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S30: { pos1: cc.v2(-450, 300), pos2: cc.v2(450, 300), itemPos: [cc.v2(0, 460), cc.v2(0, 730), cc.v2(-1650, -180), cc.v2(1650, -180)] }, S31: { pos1: cc.v2(-275, 55), pos2: cc.v2(305, 55), itemPos: [cc.v2(0, 0), cc.v2(1200, 0), cc.v2(-1200, 0), cc.v2(0, 650)] }, S32: { pos1: cc.v2(-305, 550), pos2: cc.v2(305, 550), itemPos: [cc.v2(0, 550), cc.v2(-1100, 850), cc.v2(1100, 850)] }, S33: { pos1: cc.v2(-440, 50), pos2: cc.v2(440, 50), itemPos: [cc.v2(0, -50), cc.v2(0, 400), cc.v2(0, 800)] }, S34: { pos1: cc.v2(-500, 900), pos2: cc.v2(500, 900), itemPos: [cc.v2(0, 70), cc.v2(0, 700), cc.v2(-1200, 1300), cc.v2(1200, 1300)] }, S35: { pos1: cc.v2(-275, 300), pos2: cc.v2(305, 300), itemPos: [cc.v2(0, 500), cc.v2(-1150, 700), cc.v2(1150, 700)] }, S36: { pos1: cc.v2(-400, 250), pos2: cc.v2(400, 250), itemPos: [cc.v2(0, -50), cc.v2(0, 450), cc.v2(-700, 450), cc.v2(700, 450)] }, S37: { pos1: cc.v2(-438, 590), pos2: cc.v2(438, 590), itemPos: [cc.v2(0, 550), cc.v2(-800, 250), cc.v2(800, 250)] }, S38: { pos1: cc.v2(-350, 460), pos2: cc.v2(350, 460), itemPos: [cc.v2(0, -100), cc.v2(0, 750), cc.v2(800, 200), cc.v2(-800, 200)] }, S39: { pos1: cc.v2(-430, 300), pos2: cc.v2(430, 300), itemPos: [cc.v2(0, 250), cc.v2(0, 1e3), cc.v2(-960, -150), cc.v2(960, -150)] }, S40: { pos1: cc.v2(-440, 100), pos2: cc.v2(440, 100), itemPos: [cc.v2(0, 100), cc.v2(-710, 100), cc.v2(710, 100), cc.v2(-710, 600), cc.v2(710, 600), cc.v2(0, 600)] } }, o.CustomColors = { 0: { colors: new cc.Color(128, 193, 52) }, 1: { colors: new cc.Color(31, 194, 120) }, 2: { colors: new cc.Color(8, 178, 232) }, 3: { colors: new cc.Color(46, 123, 255) }, 4: { colors: new cc.Color(0, 201, 201) }, 5: { colors: new cc.Color(154, 102, 255) }, 6: { colors: new cc.Color(230, 116, 230) }, 7: { colors: new cc.Color(231, 95, 136) }, 8: { colors: new cc.Color(229, 51, 42) }, 9: { colors: new cc.Color(255, 156, 0) }, 10: { colors: new cc.Color(233, 78, 27) }, 11: { colors: new cc.Color(255, 204, 0) }, 12: { colors: new cc.Color(231, 152, 106) }, 13: { colors: new cc.Color(149, 234, 249) }, 14: { colors: new cc.Color(163, 163, 163) } }, o.weaponColors = { yellow: { colors: new cc.Color(255, 182, 0) }, red: { colors: new cc.Color(224, 54, 87) }, blue: { colors: new cc.Color(0, 230, 255) }, green: { colors: new cc.Color(128, 193, 52) }, purple: { colors: new cc.Color(219, 76, 224) } }; var a = function () { function e() { } return n([r], e) }(); o.default = a, cc._RF.pop() }, {}], DragonBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "a45ab6WDANOxZIkOqYsiepi", "DragonBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("../Weapons/KatannaCollider"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.targetAngle = null, t.RunGoing = !1, t.runType = !1, t.effinvertal = 0, t.slowHpinvertal = 0, t._hp = 3, t.dmgAtk = 10, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.effinvertal = .5, this._hp = 3, this.dmgAtk = 10, this.user = o, this.targetEnemy = t, this._rigidBody = this.node.getComponent(cc.RigidBody), this.node.group = e, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.PhysicsBoxCollider).apply(), this.damageInverter = .5, "weapons1" == this.node.group ? (this.node.getChildByName("mo").getChildByName("bg").color = s.weaponColors.blue.colors, this.node.getChildByName("mo").getChildByName("bg").getChildByName("bg2").color = s.weaponColors.blue.colors, this.node.getChildByName("mo").getComponent(cc.MotionStreak).color = s.weaponColors.blue.colors) : (this.node.getChildByName("mo").getChildByName("bg").color = s.weaponColors.yellow.colors, this.node.getChildByName("mo").getChildByName("bg").getChildByName("bg2").color = s.weaponColors.yellow.colors, this.node.getChildByName("mo").getComponent(cc.MotionStreak).color = s.weaponColors.yellow.colors), this.node.angle <= 90 && this.node.angle >= -90 ? (this.node.getChildByName("mo").setScale(1, 1), this.runType = !1) : (this.node.getChildByName("mo").setScale(-1, 1), this.runType = !0) }, t.prototype.setVec = function (e) { if (null == this.fly) { this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(5e3), this._rigidBody.getWorldCenter(), !0), this.RunGoing = !0; var t = cc.v2(0, 0), o = e.normalize().mul(100), n = Math.atan2(o.y - t.y, o.x - t.x) * (180 / Math.PI); this.node.getChildByName("mo").angle = n, this.targetAngle = n, this.fly = !0 } }, t.prototype.onBeginContact = function (e, t, o) { if (this._rigidBody.fixedRotation = !1, this.RunGoing = !1, this.slowHpinvertal >= .5 && (this.slowHpinvertal = 0, this._hp--), this._hp > 0) if ("weapons1" == t.node.group) if (e.getWorldManifold(), s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)) } else "suverweapon" == o.node.group && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)); else "weapons2" == t.node.group && (e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "suverweapon" == o.node.group && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))); else null != this.fly && (this.fly = null, this.betweenDis = 0, this.targetAngle = null, this.targetEnemy.getComponent(u.default).skillEnds(), l.bulletFactory.putBullet(p.BulletType.dragon, this.node.parent)) }, t.prototype.start = function () { }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.getAngle = function () { var e = cc.v2(0, 0), t = this._rigidBody.linearVelocity.normalize(), o = Math.atan2(t.y - e.y, t.x - e.x) * (180 / Math.PI); this.runType ? o -= this.node.angle + 180 : o -= this.node.angle, this.node.getChildByName("mo").angle = o }, t.prototype.lateUpdate = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), this.effinvertal < .5 && (this.effinvertal += e), this.slowHpinvertal < .5 && (this.slowHpinvertal += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o); var n = cc.v2(Math.cos(this.getRadianByAngle(this.node.angle % 360)), Math.sin(this.getRadianByAngle(this.node.angle % 360))).normalize(); this._rigidBody.linearVelocity.len() <= n.mul(1500).len() && this._rigidBody.applyForceToCenter(n.mul(18e3), !0), this.getAngle(), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this.targetAngle = null, this.targetEnemy.getComponent(u.default).skillEnds(), l.bulletFactory.putBullet(p.BulletType.dragon, this.node.parent)), null == this.targetAngle || this.RunGoing || (this.node.angle % 360 <= this.targetAngle + 10 && this.node.angle % 360 >= this.targetAngle - 10 ? (this._rigidBody.angularVelocity = 0, this.RunGoing = !0, this._rigidBody.fixedRotation = !0) : this.node.angle > this.targetAngle ? this._rigidBody.angularVelocity = 500 : this.node.angle < this.targetAngle && (this._rigidBody.angularVelocity = -500)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "../Weapons/KatannaCollider": "KatannaCollider", "./BulletBase": "BulletBase" }], EffectManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "ab1a8ShkIxHIoPZ2Lf0NAjK", "EffectManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, i = this && this.__awaiter || function (e, t, o, n) { return new (o || (o = Promise))(function (i, r) { function a(e) { try { s(n.next(e)) } catch (t) { r(t) } } function l(e) { try { s(n.throw(e)) } catch (t) { r(t) } } function s(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof o ? t : new o(function (e) { e(t) })).then(a, l) } s((n = n.apply(e, t || [])).next()) }) }, r = this && this.__generator || function (e, t) { var o, n, i, r, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return r = { next: l(0), throw: l(1), return: l(2) }, "function" == typeof Symbol && (r[Symbol.iterator] = function () { return this }), r; function l(e) { return function (t) { return s([e, t]) } } function s(r) { if (o) throw new TypeError("Generator is already executing."); for (; a;)try { if (o = 1, n && (i = 2 & r[0] ? n.return : r[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, r[1])).done) return i; switch (n = 0, i && (r = [2 & r[0], i.value]), r[0]) { case 0: case 1: i = r; break; case 4: return a.label++, { value: r[1], done: !1 }; case 5: a.label++, n = r[1], r = [0]; continue; case 7: r = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === r[0] || 2 === r[0])) { a = 0; continue } if (3 === r[0] && (!i || r[1] > i[0] && r[1] < i[3])) { a.label = r[1]; break } if (6 === r[0] && a.label < i[1]) { a.label = i[1], i = r; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(r); break } i[2] && a.ops.pop(), a.trys.pop(); continue }r = t.call(e, a) } catch (l) { r = [6, l], n = 0 } finally { o = i = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } }, a = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, o = t && e[t], n = 0; if (o) return o.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }; Object.defineProperty(o, "__esModule", { value: !0 }), o.effectManager = o.EffectType = void 0; var l, s = e("../Bullet/SwordAce"), c = e("../Component/BigSkills"), p = e("../Controller/BigSkillBooms"), u = e("../Controller/ParticleCtrl"), d = cc._decorator, h = d.ccclass; d.property, function (e) { e[e.dieBoom = 0] = "dieBoom", e[e.smallBoom = 1] = "smallBoom", e[e.swordRun = 2] = "swordRun", e[e.deadBoom = 3] = "deadBoom", e[e.playerWeaponHit = 4] = "playerWeaponHit", e[e.noteRedBoom = 5] = "noteRedBoom", e[e.noteGreenBoom = 6] = "noteGreenBoom", e[e.notePurpleBoom = 7] = "notePurpleBoom", e[e.bootsBoom = 8] = "bootsBoom", e[e.scepterRedBoom = 9] = "scepterRedBoom", e[e.guiateRedEff = 10] = "guiateRedEff", e[e.bigSkillBooms = 11] = "bigSkillBooms", e[e.bigSkill = 12] = "bigSkill", e[e.bigSkillSwordAce = 13] = "bigSkillSwordAce", e[e.bigSkillSwordAce2 = 14] = "bigSkillSwordAce2", e[e.rewardEffect = 15] = "rewardEffect" }(l = o.EffectType || (o.EffectType = {})); var g = [{ type: l.smallBoom, url: "effect/smallBoom" }, { type: l.deadBoom, url: "effect/deadBoom" }, { type: l.playerWeaponHit, url: "effect/playerWeaponHit" }, { type: l.noteRedBoom, url: "effect/noteRedBoom" }, { type: l.noteGreenBoom, url: "effect/noteGreenBoom" }, { type: l.notePurpleBoom, url: "effect/notePurpleBoom" }, { type: l.bootsBoom, url: "effect/bootsboom" }, { type: l.scepterRedBoom, url: "effect/scepterRedBoom" }, { type: l.guiateRedEff, url: "effect/guiateRedEffs" }, { type: l.bigSkillBooms, url: "effect/bigSkillBooms" }, { type: l.bigSkill, url: "effect/bigSkill" }, { type: l.bigSkillSwordAce, url: "effect/swordAce" }, { type: l.bigSkillSwordAce2, url: "effect/swordAce2" }, { type: l.rewardEffect, url: "effect/rewardEffect" }], f = function () { function e() { this._bullets = new Map, this._pool = new Map } return e.prototype.Init = function () { var e = this; return Promise.all(g.map(function (t) { return i(e, void 0, void 0, function () { var e = this; return r(this, function () { return cc.assetManager.getBundle("prefabs").load(t.url, cc.Prefab, function (o, n) { o ? console.error(o) : e._bullets.set(t.type, n) }), [2] }) }) })) }, e.prototype.playEffect = function (e, t, o, n) { var i, r = this._pool.get(e); if ((i = r.size() > 0 ? r.get() : cc.instantiate(this._bullets.get(e))).parent = cc.find("Canvas"), o) { var a = o.convertToWorldSpaceAR(t); i.setPosition(cc.find("Canvas").convertToNodeSpaceAR(a)) } else a = cc.find("Canvas").convertToWorldSpaceAR(t), i.setPosition(cc.find("Canvas").convertToNodeSpaceAR(a)); n && (i.angle = n), i.active = !0; var l = i.getComponent(u.default); return l && l.playPar(e), i }, e.prototype.playSwordAce = function (e, t, o, n, i) { var r, a = this._pool.get(e); r = a.size() > 0 ? a.get() : cc.instantiate(this._bullets.get(e)); var l = t.parent.convertToWorldSpaceAR(o); r.parent = cc.find("Canvas"), r.setPosition(cc.find("Canvas").convertToNodeSpaceAR(l)), r.getComponent(s.default).setVec(n, i) }, e.prototype.playRewardEffect = function () { var e, t = l.rewardEffect; (e = cc.instantiate(this._bullets.get(t))).parent = cc.find("Canvas"), e.setPosition(cc.v2(0, 0)), e.active = !0 }, e.prototype.playOtherEffs = function (e, t, o, n) { var i, r = this._pool.get(e); (i = r.size() > 0 ? r.get() : cc.instantiate(this._bullets.get(e))).parent = cc.find("Canvas"), o && (i.color = o, i.opacity = 170), n && (i.angle = n), i.active = !0; var a = cc.find("Canvas").convertToWorldSpaceAR(t); i.setPosition(cc.find("Canvas").convertToNodeSpaceAR(a)) }, e.prototype.playPEff = function (e, t) { var o, n = this._pool.get(e); (o = n.size() > 0 ? n.get() : cc.instantiate(this._bullets.get(e))).parent = t, o.setPosition(cc.v2(0, 0)), o.active = !0 }, e.prototype.playBigSkills = function (e, t, o, n) { var i, r = this._pool.get(e); (i = r.size() > 0 ? r.get() : cc.instantiate(this._bullets.get(e))).parent = n, i.active = !0, i.setPosition(cc.v2(0, 0)), i.getComponent(c.default)._inits(t, o) }, e.prototype.playBigSkillEff = function (e, t, o, n) { var i, r = this._pool.get(e); (i = r.size() > 0 ? r.get() : cc.instantiate(this._bullets.get(e))).parent = n, i.setPosition(cc.v2(0, 0)), i.getComponent(p.default)._init(t, o) }, e.prototype.putEffect = function (e, t) { this._pool.get(e).put(t) }, e.prototype.createPool = function () { var e, t; try { for (var o = a(this._bullets.keys()), n = o.next(); !n.done; n = o.next()) { var i = n.value, r = new cc.NodePool; this._pool.set(i, r); for (var l = 0; l < 5; l++) { var s = cc.instantiate(this._bullets.get(i)); r.put(s) } } } catch (c) { e = { error: c } } finally { try { n && !n.done && (t = o.return) && t.call(o) } finally { if (e) throw e.error } } }, e.prototype.clearPool = function () { this._pool.forEach(function (e) { e.clear() }), this._pool.clear() }, n([h], e) }(); o.default = f, o.effectManager = new f, cc._RF.pop() }, { "../Bullet/SwordAce": "SwordAce", "../Component/BigSkills": "BigSkills", "../Controller/BigSkillBooms": "BigSkillBooms", "../Controller/ParticleCtrl": "ParticleCtrl" }], EndView: [function (e, t, o) { "use strict"; cc._RF.push(t, "2ff5f3ea25CWKkeD6w+pxQJ", "EndView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/adManager"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/UserProfile"), p = e("../scenes/Games"), u = e("../scenes/RondOut"), d = e("../Utils/Utils"), h = e("../Manager/LeaderboardManager"), g = e("../Manager/localConfig"), f = cc._decorator, y = f.ccclass, m = (f.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.gold = 0, t.goldReward = 0, t.isKeyPopup = !1, t } return i(t, e), t.prototype.start = function () { }, t.prototype.onEnable = function () { s.gameConfig.isShowFinishView = !0, navigator.sendBeacon("https://leveldata.poki.io/levels", "ecb23f7f-98a2-4c92-b33e-d1b7ac2c1c68"), void (0), s.gameConfig.isWatchedGoldAd = !1, l.audioManager.playEffect("finish"), cc.find("Canvas/MainView").active = !1, this.isKeyPopup = !1; var e = s.gameConfig.gameChooseViewNumber; if ("FinishView" == this.node.name) { this.node.getChildByName("golds").getChildByName("num").getComponent(cc.Label).string = c.userProfile.data.gold.toString(); var t = g.localConfig.instance.queryByID("locs", "fail")[s.gameConfig.lang]; this.gold = 30, 1 == e && (this.gold = 75), s.gameConfig.isLeftWin && (t = g.localConfig.instance.queryByID("locs", "victory")[s.gameConfig.lang], this.gold = 60, 1 == e && (this.gold = 150, h.leaderboardManager.addRating(10), this.node.getChildByName("ratingPanel").active = !0)), 2 == e && (t = g.localConfig.instance.queryByID("locs", "player2Win")[s.gameConfig.lang], s.gameConfig.isLeftWin && (t = g.localConfig.instance.queryByID("locs", "player1Win")[s.gameConfig.lang]), this.gold = 50), this.node.getChildByName("getGold").getComponentInChildren(cc.Label).string = "" + this.gold, this.goldReward = 2 * this.gold, this.goldReward < 150 && (this.goldReward = 150), this.node.getChildByName("getGoldReward").getComponentInChildren(cc.Label).string = this.goldReward.toString(), this.node.getChildByName("StatusLabel").getComponent(cc.Label).string = t } else t = g.localConfig.instance.queryByID("locs", "victory")[s.gameConfig.lang], 2 == s.gameConfig.WhoKill && (t = g.localConfig.instance.queryByID("locs", "fail")[s.gameConfig.lang]), 2 == e && (t = g.localConfig.instance.queryByID("locs", "player1Win")[s.gameConfig.lang], 2 == s.gameConfig.WhoKill && (t = g.localConfig.instance.queryByID("locs", "player2Win")[s.gameConfig.lang])), this.node.getChildByName("StatusLabel").getComponent(cc.Label).string = t }, t.prototype.GoHome = function (e) { void 0 === e && (e = 1), l.audioManager.playEffect("click"), s.gameConfig.isShowFinishView = !1, c.userProfile.data.gold += 1 == e ? this.gold : this.goldReward, 3 != s.gameConfig.gameChooseViewNumber || c.userProfile.data.isPassTutorial || (c.userProfile.data.isPassTutorial = !0), 2 != s.gameConfig.gameChooseViewNumber || c.userProfile.data.isPass2PlayersTutorial || (c.userProfile.data.isPass2PlayersTutorial = !0), 3 == s.gameConfig.gameChooseViewNumber && s.gameConfig.isLeftWin && c.userProfile.data.level++, c.userProfile.save(), 3 == s.gameConfig.gameChooseViewNumber && s.gameConfig.isLeftWin && c.userProfile.data.level % 3 == 0 && c.userProfile.data.level > 4 ? (this.node.getChildByName("getGold").active = !1, this.node.getChildByName("getGoldReward").active = !1, this.node.getChildByName("StatusLabel").active = !1, this.node.getChildByName("bgStatus").active = !1, this.node.getChildByName("keyPanel").active = !0, this.isKeyPopup = !0) : cc.find("Canvas").getComponent(p.default).closeGame() }, t.prototype.NextGame = function () { l.audioManager.playEffect("click"), a.default.instance.showInterstitialAd(this) }, t.prototype.afterInter = function () { var e = this; s.gameConfig.isShowFinishView = !1; var t, o = d.RandomRangeInt(1, 30); 2 == s.gameConfig.gameChooseViewNumber && (o = d.RandomRangeInt(1, 40)), t = "S" + o, s.gameConfig.suverModel = !1, s.gameConfig.SceneStr = t, cc.assetManager.getBundle("prefabs").load("views/RondOut", cc.Prefab, function (o, n) { var i = cc.instantiate(n); i.parent = e.node, i.active = !0, i.zIndex = 10, i.getComponent(u.default).init(t) }) }, t.prototype.getGold = function () { this.GoHome(1) }, t.prototype.reward = function (e) { e && (this.isKeyPopup ? this.GoHomeKey(3) : this.GoHome(2)) }, t.prototype.getGoldReward = function () { l.audioManager.playEffect("click"), a.default.instance.showRewardAd(this, "DoubleGold") }, t.prototype.GoHomeKey = function (e) { void 0 === e && (e = 1), l.audioManager.playEffect("click"), s.gameConfig.isShowFinishView = !1, c.userProfile.data.keys += 1 * e, c.userProfile.save(), cc.find("Canvas").getComponent(p.default).closeGame() }, t.prototype.getKey = function () { l.audioManager.playEffect("click"), this.GoHomeKey(1) }, t.prototype.getKeyReward = function () { l.audioManager.playEffect("click"), a.default.instance.showRewardAd(this, "X3Keys") }, r([y], t) }(cc.Component)); o.default = m, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/LeaderboardManager": "LeaderboardManager", "../Manager/UserProfile": "UserProfile", "../Manager/adManager": "adManager", "../Manager/localConfig": "localConfig", "../Utils/Utils": "Utils", "../scenes/Games": "Games", "../scenes/RondOut": "RondOut" }], EnergyBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "7f706mgF2dPD4fBAewblWZr", "EnergyBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("./BulletBase"), s = e("../Factory/BulletFactory"), c = e("../Manager/WeaponManager"), p = e("../Manager/ConfigManager"), u = e("../Manager/EffectManager"), d = e("../HumanStates/Human"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.effDis = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), o ? this.user = o : this.node.group = e, this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t), "weapons1" == this.node.group ? this.node.color = p.weaponColors.blue.colors : this.node.color = p.weaponColors.yellow.colors }, t.prototype.setVec = function (e) { null == this.fly && (this.effDis = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1500 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.setVecP = function (e) { null == this.fly2 && (this.effDis = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly2 = !0) }, t.prototype.onBeginContact = function (e, t, o) { "weapons1" == t.node.group ? p.gameConfig.suverModel ? "suverenemy" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), u.effectManager.playEffect(u.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(d.default) && o.node.parent.getComponent(d.default).lightSprcie(.2))) : "player2" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), u.effectManager.playEffect(u.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(d.default) && o.node.parent.getComponent(d.default).lightSprcie(.2))) : "weapons2" == t.node.group && (p.gameConfig.suverModel ? "suverenemy" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), u.effectManager.playEffect(u.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(d.default) && o.node.parent.getComponent(d.default).lightSprcie(.2))) : "player1" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), u.effectManager.playEffect(u.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(d.default) && o.node.parent.getComponent(d.default).lightSprcie(.2)))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid) { if (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), "saberBall" != this.node.name && (n = Math.floor(this.betweenDis / 10)) >= this.effDis + 20 && (this.effDis = n), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, s.bulletFactory.putBullet(c.BulletType.energyBall, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.activeTimer = 0, this.node.destroy()) } var n; if (null != this.fly2) t = cc.v2(0, 0), o = cc.v2(0, 0), this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), (n = Math.floor(this.betweenDis / 10)) >= this.effDis + 20 && (this.effDis = n), this.betweenDis >= this.atkRange && (this.fly2 = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, s.bulletFactory.putBullet(c.BulletType.energyBall, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([g], t) }(l.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], FauxCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "b366dr+hLlBVp1NiFofmXu+", "FauxCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._flyV2 = null, t.AtkFrequency = 0, t.atkInterval = 0, t.nd1 = null, t.polygonCollider = null, t.nd0 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.atkInterval = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.nd0 = this.node.getChildByName("0"), this.nd1 = this.node.getChildByName("body").getChildByName("1"), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && this.atkInterval >= 1 && (this.polygonCollider.density = 20, this.polygonCollider.apply(), this.nd0.active = !0, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fly = !0, this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; "weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly ? (this._rigidBody.applyForceToCenter(this._flyV2.mul(2300 * this._rigidBody.getMass()), !0), this.atkInterval -= e, "weapons2" == this.node.group ? this.nd1.color = s.weaponColors.yellow.colors : this.nd1.color = s.weaponColors.blue.colors, this.atkInterval <= 0 && (this.fly = null, this.nd0.active = !1, this._rigidBody.angularVelocity = 0, this.polygonCollider.density = .05, this.polygonCollider.apply())) : this.atkInterval < 1 ? (this.atkInterval += .004, this.attackProgress = this.atkInterval) : ("weapons2" == this.node.group ? this.nd1.color = s.weaponColors.red.colors : this.nd1.color = s.weaponColors.blue.colors, this.attackProgress = 1) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], FireCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "6c1c3OMWgBBFLLTFSJeHSJA", "FireCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/ConfigManager"), s = e("../Manager/EffectManager"), c = e("../Utils/Utils"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fireNodes = null, t.enemyV3 = new cc.Vec2, t.AtkFrequency = .5, t.pointList = [], t } return i(t, e), t.prototype.onEnable = function () { this.pointList = [], this.AtkFrequency = .5, this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0, this.node.angle = -90, this.addFiresPic() }, t.prototype.addFiresPic = function () { for (var e = function (e) { if (t.node.active && t.node.isValid) { var o = cc.instantiate(t.fireNodes), n = 1 * Math.random(), i = cc.color(255, 255 * Math.random(), 0); o.setParent(t.node), o.setPosition(cc.v2(0, 0)), o.getChildByName("mos").color = i, o.getChildByName("mos").getComponent(cc.MotionStreak).stroke = 35 * n, o.getChildByName("bg").color = i, cc.tween(o).set({ position: cc.v3(0, 0, 0), active: !0, opacity: 10, scale: n }).delay(.01 * e + .05 * Math.random()).to(.7 * Math.random(), { position: cc.v3(c.RandomRangeInt(200, 600), c.RandomRangeInt(-100, 100), 0), opacity: 255 }).call(function () { o && o.isValid && o.destroy() }).union().start() } }, t = this, o = 0; o < 100; o++)e(o) }, t.prototype.onDisable = function () { this.node.destroyAllChildren(), this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0 }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("fire1" == this.node.name) { var i = function () { var i = e.getWorldManifold(); if ("player1" == o.node.group && i.points[0] ? s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)) : "player2" == o.node.group && i.points[0] && s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), o.node.parent.getComponent(a.default) && n.AtkFrequency >= .5) { n.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(5); var r = o.node.getComponent(cc.RigidBody); n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var l = o.node.parent.convertToWorldSpaceAR(o.node.getPosition()), c = new cc.Vec2(0, 0); cc.Vec2.subtract(c, l, n.enemyV3), r.applyLinearImpulse(c.mul(1e3 * r.getMass()), r.getWorldCenter(), !0) } }; "weapons1" == t.node.group ? l.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player2" == o.node.group && i() : "weapons2" == t.node.group && (l.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player1" == o.node.group && i()) } }, t.prototype.update = function (e) { this.AtkFrequency < .5 && (this.AtkFrequency += e) }, r([d(cc.Prefab)], t.prototype, "fireNodes", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Utils/Utils": "Utils" }], FlailBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "0b94axUkRJEsJBm45Q3CcXc", "FlailBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.effinvertal = 0, t.AtkFrequency = 0, t } return i(t, e), t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) { var n = e.getWorldManifold(); if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(5), i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), i.applyLinearImpulse(n.normal.mul(2e4), n.points[0], !0)) } else "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (l.audioManager.playEffect("sword2"), this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))); else "player2" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.AtkFrequency >= .1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(5), i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), i.applyLinearImpulse(n.normal.mul(2e4), n.points[0], !0))) : "weapons2" == o.node.group && n.points[0] && this.effinvertal >= .5 && (l.audioManager.playEffect("sword2"), this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))) } else "weapons2" == t.node.group && (n = e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.AtkFrequency >= .1 && (o.node.parent.getComponent(a.default).setDamage(5), this.AtkFrequency = 0, i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), i.applyLinearImpulse(n.normal.mul(2e4), n.points[0], !0))) : "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (l.audioManager.playEffect("sword2"), this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))) : "player1" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.AtkFrequency >= .1 && (o.node.parent.getComponent(a.default).setDamage(5), this.AtkFrequency = 0, i.angularVelocity = 0, i.linearVelocity = cc.v2(0, 0), i.applyLinearImpulse(n.normal.mul(2e4), n.points[0], !0))) : "weapons1" == o.node.group && n.points[0] && this.effinvertal >= .5 && (l.audioManager.playEffect("sword2"), this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)))) }, t.prototype.lateUpdate = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < .1 && (this.AtkFrequency += e) }, r([u], t) }(cc.Component)); o.default = d, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager" }], FlailCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "7d626W1GxRDC6VDBAHt4j9D", "FlailCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t.flailRigidBody = null, t.boomDamage = !1, t.nd1 = null, t.flailNd = null, t.boomNd = null, t.circleCollider = null, t } return i(t, e), t.prototype._init = function () { this.isFlail = !0, this.effinvertal = .5, this.fly = null, this.betweenDis = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.fly = null, this.flailRigidBody = this.node.getChildByName("flail").getComponent(cc.RigidBody), this.nd1 = this.node.getChildByName("flail").getChildByName("1"), this.flailNd = this.node.getChildByName("flail"), this.boomNd = this.node.getChildByName("flail").getChildByName("boom"), this.circleCollider = this.node.getChildByName("flail").getComponent(cc.PhysicsCircleCollider) }, t.prototype.setMotionStrak = function (e) { e ? (this.flailRigidBody.linearVelocity = cc.v2(0, 0), this.flailRigidBody.angularVelocity = 0, this.flailRigidBody.fixedRotation = !0, this.flailRigidBody.gravityScale = 0, this.flailRigidBody.linearDamping = 1e6, this.flailRigidBody.angularDamping = 1e6, this.circleCollider.density = 100, this.circleCollider.apply()) : (this.flailRigidBody.fixedRotation = !1, this.flailRigidBody.gravityScale = 1, this.flailRigidBody.linearDamping = .3, this.flailRigidBody.angularDamping = .3, this.circleCollider.density = .02, this.circleCollider.apply()) }, t.prototype.setLimit = function (e) { void 0 === e && (e = null), null != e && this.flailRigidBody.applyForceToCenter(e.mul(200), !0) }, t.prototype.MotionStrakAtk = function () { var e = this; null == this.fly && null != this.SkillNumber && (this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.betweenDis = 0, l.audioManager.playEffect("explosion"), this.setMotionStrak(!0), this.boomDamage = !0, this.boomNd.setPosition(this.nd1.getPosition()), cc.tween(this.boomNd).set({ scale: 0, active: !0 }).to(.3, { scale: 1 }).call(function () { e.boomNd.active = !1, e.boomDamage = !1 }).union().start(), this.fly = !0, this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.v2(0, 0), t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.checkPos = function () { var e = this; if (this.boomDamage) { var t = this.node.convertToWorldSpaceAR(this.flailNd.getPosition()), o = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), n = !1; o.forEach(function (o) { var i = null; i = o.node.parent ? o.node.parent : cc.find("Canvas"); var r = o.node, l = cc.Vec2.ZERO; i.convertToWorldSpaceAR(r.getPosition(), l); var c = cc.Vec2.distance(t, l), p = cc.Vec2.ZERO; if (cc.Vec2.subtract(p, l, t), c <= 250) { var u, d = i.getComponent(a.default); s.gameConfig.suverModel ? d && "suverenemy" == i.group && d.setDamage(1) : "weapons2" == e.node.group ? d && "player1" == o.node.group && (n || (d.setDamage(1), n = !0, (u = i.getChildByName("body").getComponent(cc.RigidBody)).applyLinearImpulse(p.normalize().mul(1e3), u.getWorldCenter(), !0))) : d && "player2" == o.node.group && (n || (d.setDamage(1), n = !0, (u = i.getChildByName("body").getComponent(cc.RigidBody)).applyLinearImpulse(p.normalize().mul(1e3), u.getWorldCenter(), !0))) } }) } }, t.prototype.lateUpdate = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 4, this.skillTimer >= 4 && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, null != this.fly && (this.betweenDis += e, this.checkPos(), this.betweenDis >= 1 && (this.fly = null, this.betweenDis = 0, this.setMotionStrak(!1))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], FlailLines: [function (e, t, o) { "use strict"; cc._RF.push(t, "b2b9ehWi41Gkq1DJIu8gBfN", "FlailLines"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.target = null, t.target2 = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.lateUpdate = function () { if (null != this.target && null != this.target2) { var e = this.node.getComponent(cc.Graphics), t = this.target.parent.convertToWorldSpaceAR(this.target.getPosition()); t = this.node.parent.convertToNodeSpaceAR(t); var o = this.target2.parent.convertToWorldSpaceAR(this.target2.getPosition()); o = this.node.parent.convertToNodeSpaceAR(o), e.clear(), e.moveTo(t.x, t.y), e.lineTo(o.x, o.y), e.stroke() } }, r([s(cc.Node)], t.prototype, "target", void 0), r([s(cc.Node)], t.prototype, "target2", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], Games: [function (e, t, o) { "use strict"; cc._RF.push(t, "d68dbVGhcJKy7IefBk4EOmX", "Games"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, a = this && this.__awaiter || function (e, t, o, n) { return new (o || (o = Promise))(function (i, r) { function a(e) { try { s(n.next(e)) } catch (t) { r(t) } } function l(e) { try { s(n.throw(e)) } catch (t) { r(t) } } function s(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof o ? t : new o(function (e) { e(t) })).then(a, l) } s((n = n.apply(e, t || [])).next()) }) }, l = this && this.__generator || function (e, t) { var o, n, i, r, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return r = { next: l(0), throw: l(1), return: l(2) }, "function" == typeof Symbol && (r[Symbol.iterator] = function () { return this }), r; function l(e) { return function (t) { return s([e, t]) } } function s(r) { if (o) throw new TypeError("Generator is already executing."); for (; a;)try { if (o = 1, n && (i = 2 & r[0] ? n.return : r[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, r[1])).done) return i; switch (n = 0, i && (r = [2 & r[0], i.value]), r[0]) { case 0: case 1: i = r; break; case 4: return a.label++, { value: r[1], done: !1 }; case 5: a.label++, n = r[1], r = [0]; continue; case 7: r = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === r[0] || 2 === r[0])) { a = 0; continue } if (3 === r[0] && (!i || r[1] > i[0] && r[1] < i[3])) { a.label = r[1]; break } if (6 === r[0] && a.label < i[1]) { a.label = i[1], i = r; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(r); break } i[2] && a.ops.pop(), a.trys.pop(); continue }r = t.call(e, a) } catch (l) { r = [6, l], n = 0 } finally { o = i = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } }; Object.defineProperty(o, "__esModule", { value: !0 }); var s = e("../Factory/BulletFactory"), c = e("../Manager/ConfigManager"), p = e("../Factory/WeaponFactory"), u = e("../Controller/JoyStick"), d = e("../Weapons/Weapon"), h = e("../HumanStates/Human"), g = e("../Controller/CameraCtrl"), f = e("../Manager/UserProfile"), y = e("../Utils/Utils"), m = e("../Manager/AudioManager"), v = e("../Manager/EffectManager"), _ = e("../AI/AiCtrl"), C = e("../Factory/HumanFactory"), b = e("../Manager/TipsManager"), B = e("../Controller/HumanController"), w = cc._decorator, M = w.ccclass, k = w.property, P = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.player = null, t.enemy = null, t.playerJoy = null, t.enemyJoy = null, t.mainCamera = null, t.specrialTarget = null, t.bodyName = ["head", "neck", "body", "shoulderL", "shoulderR", "handL", "handR", "footL", "footR", "legL", "legR"], t.twoHandedWeapons = ["13", "19", "20", "39", "8", "33"], t.suverEnemy1 = [], t.suverEnemy2 = [], t.suverEnemy3 = [], t._CreateEnemy = !1, t._suverDt = 0, t._suverDt2 = 0, t._suverDt3 = 0, t.BoomTimers = null, t._CreateBuffItem = !1, t._itemTimer = 0, t._itemstate = [], t._itemLength = 0, t._dieNode = null, t.mainView = null, t } return i(t, e), t.prototype.onLoad = function () { if (cc.game.setFrameRate(59.9), null != this.specrialTarget && (this.BoomTimers = 40), void (0), cc.director.getPhysicsManager().enabledAccumulator = !0, cc.director.getScheduler().setTimeScale(1), cc.PhysicsManager.FIXED_TIME_STEP = 1 / 60, cc.director.getPhysicsManager().enabledAccumulator = !1, cc.director.getPhysicsManager().enabled = !0, c.gameConfig.gameStart = !0, s.bulletFactory.createPool(), v.effectManager.createPool(), C.humanFactory.createPool(), b.tipsManager.createPool(), this.mainView = this.node.getChildByName("MainView"), this._initGame(), c.gameConfig.P1Run = !1, c.gameConfig.P2Run = !1, this.mainView.getChildByName("StartView").active = !0, m.audioManager.playMusic("battle"), this.node.getComponentsInChildren(cc.Widget).forEach(function (e) { e.updateAlignment() }), !this._CreateBuffItem && c.ScenePostions[c.gameConfig.SceneStr].itemPos) { this._itemTimer = 10, this._itemLength = c.ScenePostions[c.gameConfig.SceneStr].itemPos.length, this._itemstate = []; for (var e = 0; e < this._itemLength; e++)this._itemstate.push(!1); this._CreateBuffItem = !0 } }, t.prototype._initGame = function () { this.player = C.humanFactory.getPlayer("StickMan1"), this.enemy = C.humanFactory.getPlayer("enemy"); var e, t = this.mainView.getChildByName("Joy"); (this.playerJoy = C.humanFactory.getAllPrefabs("Joy1", t), this.enemyJoy = C.humanFactory.getAllPrefabs("Joy2", t), this.mainCamera.target = this.node.getChildByName("MainPoint1"), this.mainCamera.target2 = this.node.getChildByName("MainPoint2"), this.mainCamera.enemyBody = this.enemy.getChildByName("body"), this.mainCamera.playerBody = this.player.getChildByName("body"), this._CreateEnemy = !0, c.gameConfig.suverModel) ? (this.player.active && (this.player.getComponent(B.default).hp = 50, this.player.getComponent(B.default).isDead = !1), this.enemy.active = !1, c.gameConfig.gameStart = !0) : (this.player.active && ((e = this.player.getChildByName("Centers").getChildByName("number")).active = !0, e.getChildByName("crown").active = 1 == c.gameConfig.WhoKill, e.getComponent(cc.Label).string = f.userProfile.data.player1Count + ""), this.enemy.active && ((e = this.enemy.getChildByName("Centers").getChildByName("number")).active = !0, e.getChildByName("crown").active = 2 == c.gameConfig.WhoKill, e.getComponent(cc.Label).string = f.userProfile.data.player2Count + "")); this.createHuman1Weapons(), this.createHuman2Weapons() }, t.prototype._extractWeaponComponent = function (e) { if (!e) return null; var t = e.getComponent(d.default); if (t) return t; var o = e.getChildByName("body"); if (o && (t = o.getComponent(d.default))) return t; var n = e.getComponentsInChildren(d.default); return n && n.length > 0 ? n[0] : null }, t.prototype.createHuman1Weapons = function () { return a(this, void 0, void 0, function () { var e, t, o, n, i, r, a, s, d, g, m, v, _, C, b, w = this; return l(this, function (l) { switch (l.label) { case 0: for (e = [], t = 0; t < 40; t++)o = "allBlue_" + t.toString(), f.userProfile.data.weaponsUnLock[o] && e.push(o); return n = e[y.RandomRangeInt(0, e.length)], null != f.userProfile.data.weapons1 && (n = f.userProfile.data.weapons1), i = n.split("_")[1], r = f.userProfile.data.skins1, (a = this.player.getChildByName("present").getChildByName("Center")).active = !1, null != r && (a.active = !0, a.getComponent(cc.Sprite).spriteFrame = c.gameConfig.AllSkins.getSpriteFrame(r)), s = null, null != f.userProfile.data.Allcolor1 && (s = f.userProfile.data.Allcolor1), null != s && this.player.children.forEach(function (e) { if (-1 != w.bodyName.indexOf(e.name)) { var t = new cc.Color; t._val = s._val, e.color = t } }), d = null, g = this.playerJoy.getComponent(u.default), m = this.enemyJoy.getComponent(u.default), v = this.player.getChildByName("handR"), _ = this.player.getChildByName("handL"), C = null, f.userProfile.data.playerState2 != c.PlayerGameState.AI ? [3, 11] : f.userProfile.data.playerJoy1 != c.JoyStickPos.Left ? [3, 5] : -1 != this.twoHandedWeapons.indexOf(i) ? [3, 2] : [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0)]; case 1: return C = l.sent(), [3, 4]; case 2: return [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0, _)]; case 3: C = l.sent(), l.label = 4; case 4: return b = this._extractWeaponComponent(C), d = b, g.setWeapons(b), g.isPlayer1 = 1, g.sethuman(this.player.getComponent(h.default), !0), this.playerJoy.active = !0, this.enemyJoy.active = !1, [3, 10]; case 5: return -1 == this.twoHandedWeapons.indexOf(i) ? [3, 7] : [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0, _)]; case 6: return C = l.sent(), [3, 9]; case 7: return [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0)]; case 8: C = l.sent(), l.label = 9; case 9: b = this._extractWeaponComponent(C), d = b, m.setWeapons(b), m.isPlayer1 = 1, m.sethuman(this.player.getComponent(h.default), !1), this.playerJoy.active = !1, this.enemyJoy.active = !0, l.label = 10; case 10: return [3, 16]; case 11: return -1 == this.twoHandedWeapons.indexOf(i) ? [3, 13] : [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0, _)]; case 12: return C = l.sent(), [3, 15]; case 13: return [4, p.weaponFactory.getWeapons(this.enemy, n, v, !0)]; case 14: C = l.sent(), l.label = 15; case 15: b = this._extractWeaponComponent(C), d = b, g.setWeapons(b), g.isPlayer1 = 1, g.sethuman(this.player.getComponent(h.default), !0), this.playerJoy.active = !0, l.label = 16; case 16: return null != d && f.userProfile.data.playerState1 != c.PlayerGameState.None && (this.player.getComponent(B.default).hp = 50, this.player.getComponent(B.default).maxhp = 50), [2] } }) }) }, t.prototype.createHuman2Weapons = function () { return a(this, void 0, void 0, function () { var e, t, o, n, i, r, a, s, d, g, m, v, C, b, w, M, k = this; return l(this, function (l) { switch (l.label) { case 0: if (c.gameConfig.suverModel) return [2]; if (e = "allRed_0", 2 == c.gameConfig.gameChooseViewNumber) { for (t = [], o = 0; o < 40; o++)n = "allRed_" + o.toString(), f.userProfile.data.weaponsUnLock[n] && t.push(n); e = t[y.RandomRangeInt(0, t.length)] } else e = "allRed_" + y.RandomRangeInt(0, 40); return null != f.userProfile.data.weapons2 && (e = f.userProfile.data.weapons2), i = e.split("_")[1], r = f.userProfile.data.skins2, (a = this.enemy.getChildByName("present").getChildByName("Center")).active = !1, null != r && (a.active = !0, a.getComponent(cc.Sprite).spriteFrame = c.gameConfig.AllSkins.getSpriteFrame(r)), s = null, null != f.userProfile.data.Allcolor2 && (s = f.userProfile.data.Allcolor2), null != s && this.enemy.children.forEach(function (e) { if (-1 != k.bodyName.indexOf(e.name)) { var t = new cc.Color; t._val = s._val, e.color = t } }), d = null, g = this.enemyJoy.getComponent(u.default), m = this.enemy.getChildByName("handR"), v = this.enemy.getChildByName("handL"), C = null, f.userProfile.data.playerState2 != c.PlayerGameState.Player ? [3, 5] : -1 != this.twoHandedWeapons.indexOf(i) ? [3, 2] : [4, p.weaponFactory.getWeapons(this.player, e, m, !1)]; case 1: return C = l.sent(), [3, 4]; case 2: return [4, p.weaponFactory.getWeapons(this.player, e, m, !1, v)]; case 3: C = l.sent(), l.label = 4; case 4: return M = this._extractWeaponComponent(C), d = M, g.setWeapons(M), g.isPlayer1 = 2, g.sethuman(this.enemy.getComponent(h.default), !1), this.enemyJoy.active = !0, [3, 10]; case 5: return f.userProfile.data.playerState2 != c.PlayerGameState.AI ? [3, 10] : ((b = this.enemy.getChildByName("Centers").getChildByName("name")).active = !0, b.getComponent(cc.Label).string = f.userProfile.data.enemyName, f.userProfile.data.playerState1 != c.PlayerGameState.Player && (this.enemyJoy.active = !1), w = this.enemy.addComponent(_.default), -1 == this.twoHandedWeapons.indexOf(i) ? [3, 7] : [4, p.weaponFactory.getWeapons(this.player, e, m, !1, v)]); case 6: return C = l.sent(), [3, 9]; case 7: return [4, p.weaponFactory.getWeapons(this.player, e, m, !1)]; case 8: C = l.sent(), l.label = 9; case 9: M = this._extractWeaponComponent(C), d = M, w.setWeapons(M), w.aiLevel = 1, w.isPlayer1 = 2, w.sethuman(this.enemy.getComponent(h.default)), w.setTarget(this.player), l.label = 10; case 10: return null != d && f.userProfile.data.playerState2 != c.PlayerGameState.None && (this.enemy.getComponent(B.default).hp = 50, this.enemy.getComponent(B.default).maxhp = 50), [2] } }) }) }, t.prototype.createEnemyAi = function () { if (this.suverEnemy1.length < 3) { var e = C.humanFactory.getPrefab("AI", this.player, this.enemy); this.suverEnemy1.push(e) } this.checkHuman() }, t.prototype.createEnemyAi2 = function () { if (this.suverEnemy2.length < 2) { var e = C.humanFactory.getPrefab("AI2", this.player, this.enemy); this.suverEnemy2.push(e) } this.checkHuman() }, t.prototype.createEnemyAi3 = function () { if (this.suverEnemy3.length < 2) { var e = C.humanFactory.getPrefab("AI3", this.player, this.enemy); this.suverEnemy3.push(e) } this.checkHuman() }, t.prototype.start = function () { }, t.prototype.closeGame = function () { cc.director.resume(), cc.director.loadScene("main") }, t.prototype.checkHuman = function () { for (var e = this.suverEnemy1.length - 1; e >= 0; e--)this.suverEnemy1[e].isValid || (this.suverEnemy1[e].destroy(), this.suverEnemy1.splice(e, 1)); for (var t = this.suverEnemy2.length - 1; t >= 0; t--)this.suverEnemy2[t].isValid || (this.suverEnemy2[t].destroy(), this.suverEnemy2.splice(t, 1)); for (var o = this.suverEnemy3.length - 1; o >= 0; o--)this.suverEnemy3[o].isValid || (this.suverEnemy3[o].destroy(), this.suverEnemy3.splice(o, 1)) }, t.prototype.clearnHuman = function () { this._CreateEnemy = !1; for (var e = this.suverEnemy1.length - 1; e >= 0; e--)this.suverEnemy1[e] && (this.suverEnemy1[e].destroy(), this.suverEnemy1.splice(e, 1)); for (var t = this.suverEnemy2.length - 1; t >= 0; t--)this.suverEnemy2[t] && (this.suverEnemy2[t].destroy(), this.suverEnemy2.splice(t, 1)); for (var o = this.suverEnemy3.length - 1; o >= 0; o--)this.suverEnemy3[o] && (this.suverEnemy3[o].destroy(), this.suverEnemy3.splice(o, 1)) }, t.prototype.StopGames = function () { void (0), cc.director.pause(), this.mainView.getChildByName("Stop").active = !1, this.mainView.getChildByName("StopView").active = !0, m.audioManager.pauseMusics() }, t.prototype.resumeGames = function () { void (0), cc.director.resume(), this.mainView.getChildByName("Stop").active = !0, this.mainView.getChildByName("StopView").active = !1, m.audioManager.resumeMusics() }, t.prototype.deadAi = function (e) { var t = this.suverEnemy1.indexOf(e), o = this.suverEnemy2.indexOf(e), n = this.suverEnemy3.indexOf(e); -1 != t && this.suverEnemy1.splice(t, 1), -1 != o && this.suverEnemy2.splice(t, 1), -1 != n && this.suverEnemy3.splice(t, 1) }, t.prototype.onDestroy = function () { b.tipsManager.clearPool(), s.bulletFactory.clearPool(), v.effectManager.clearPool(), C.humanFactory.clearPool() }, t.prototype.update = function (e) { if (c.gameConfig.suverModel) { var t = c.gameConfig; this._CreateEnemy && t.spawnEnemies < t.suverEnemiesNum && t.activeEnemies < t.maxEnemies && (this.suverEnemy1.length < 3 && (this._suverDt += e, this._suverDt > 1.4 && t.spawnEnemies < t.suverEnemiesNum && t.activeEnemies < t.maxEnemies && (this._suverDt = 0, this.createEnemyAi(), t.spawnEnemies++, t.activeEnemies++)), this.suverEnemy2.length < 2 && (this._suverDt2 += e, this._suverDt2 > 2.9 && t.spawnEnemies < t.suverEnemiesNum && t.activeEnemies < t.maxEnemies && (this._suverDt2 = 0, this.createEnemyAi2(), t.spawnEnemies++, t.activeEnemies++)), this.suverEnemy3.length < 2 && (this._suverDt3 += e, this._suverDt3 > 4 && t.spawnEnemies < t.suverEnemiesNum && t.activeEnemies < t.maxEnemies && (this._suverDt3 = 0, this.createEnemyAi3(), t.spawnEnemies++, t.activeEnemies++))) } if (c.gameConfig.gameStart && this.node && this.node.isValid && this._CreateBuffItem && (this._itemTimer -= e, this._itemTimer <= 0)) { this._itemTimer = 10; var o = []; if (this._itemstate.forEach(function (e, t) { 0 == e && o.push(t) }), o.length > 0) { var n = y.RandomRangeInt(0, o.length); c.ScenePostions[c.gameConfig.SceneStr].itemPos[o[n]] && (C.humanFactory.getItemPrefabs("BuffItem", c.ScenePostions[c.gameConfig.SceneStr].itemPos[o[n]], o[n]), this._itemstate[o[n]] = !0) } } null != this.specrialTarget && null != this.BoomTimers && (this.BoomTimers -= e, this.specrialTarget.getChildByName("Timer").getComponent(cc.Label).string = "" + Math.floor(this.BoomTimers), this.BoomTimers < 0 && (this.specrialTarget.getChildByName("Timer").getComponent(cc.Label).string = "0", this.BoomEvents())) }, t.prototype.slowStates = function (e) { this._itemstate[e] = !1 }, t.prototype.BoomEvents = function () { this.BoomTimers = null; var e = cc.find("Canvas/BoomEffects"); e && (e.setPosition(this.specrialTarget.getPosition()), e.active = !0), this.specrialTarget.active = !1 }, r([k(cc.Node)], t.prototype, "player", void 0), r([k(cc.Node)], t.prototype, "enemy", void 0), r([k(cc.Node)], t.prototype, "playerJoy", void 0), r([k(cc.Node)], t.prototype, "enemyJoy", void 0), r([k(g.default)], t.prototype, "mainCamera", void 0), r([k(cc.Node)], t.prototype, "specrialTarget", void 0), r([M], t) }(cc.Component); o.default = P, cc._RF.pop() }, { "../AI/AiCtrl": "AiCtrl", "../Controller/CameraCtrl": "CameraCtrl", "../Controller/HumanController": "HumanController", "../Controller/JoyStick": "JoyStick", "../Factory/BulletFactory": "BulletFactory", "../Factory/HumanFactory": "HumanFactory", "../Factory/WeaponFactory": "WeaponFactory", "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/TipsManager": "TipsManager", "../Manager/UserProfile": "UserProfile", "../Utils/Utils": "Utils", "../Weapons/Weapon": "Weapon" }], GantBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "730cdozoMtJnZNq92lCEIqb", "GantBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.RunGoing = !1, t.runType = !1, t.effinvertal = 0, t.slowHpinvertal = 0, t._hp = 3, t.dmgAtk = 10, t } return i(t, e), t.prototype._init = function (e, t, o, n) { this.effinvertal = .5, this._hp = 3, this.dmgAtk = 10, this.user = o, this.targetEnemy = t, this._rigidBody = this.node.getComponent(cc.RigidBody), this.node.group = e, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.PhysicsBoxCollider).apply(), "2" == n ? (this.node.getChildByName("bg").scaleX = -1.1, this.node.getChildByName("1").scaleX = -1) : (this.node.getChildByName("bg").scaleX = 1.1, this.node.getChildByName("1").scaleX = 1), this.damageInverter = .5 }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = this._flyV2.mul(1200), this.RunGoing = !0, this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (e.getWorldManifold(), s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)) } else "suverweapon" == o.node.group && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)); else "weapons2" == t.node.group && (e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "suverweapon" == o.node.group && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.dmgAtk), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))) }, t.prototype.start = function () { }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.getAngle = function () { var e = cc.v2(0, 0), t = this._rigidBody.linearVelocity.normalize(), o = Math.atan2(t.y - e.y, t.x - e.x) * (180 / Math.PI); o -= this.node.angle + 90, this.node.getChildByName("mo").angle = o, this.node.getChildByName("bg").angle = o, this.node.getChildByName("1").angle = o }, t.prototype.lateUpdate = function (e) { this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), this.effinvertal < .5 && (this.effinvertal += e), this.slowHpinvertal < .5 && (this.slowHpinvertal += e), null != this.fly && (this.betweenDis += e, this.getAngle(), this.betweenDis >= 3 && (this.fly = null, this.betweenDis = 0, "gantBall2" == this.node.name ? l.bulletFactory.putBullet(p.BulletType.GantBall2, this.node) : l.bulletFactory.putBullet(p.BulletType.GantBall, this.node)))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], GantsCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "4c241cNHadHyKiXQlgvFn88", "GantsCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && (this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.fly = !0) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.v2(0, 0), t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.endFly = function () { this.fly = null }, t.prototype.lateUpdate = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly && this._rigidBody.applyForceToCenter(this._flyV2.mul(5e3), !0) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], Gants: [function (e, t, o) { "use strict"; cc._RF.push(t, "ebd72FUU65LOKYNIprL8uY6", "Gants"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Factory/BulletFactory"), l = e("./GantsCollider"), s = e("./Weapon"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t._children1 = null, t._children2 = null, t.child1 = null, t.child2 = null, t.nd1 = null, t.nd2 = null, t.effinvertal = 0, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.betweenDis = 0, this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this._children1 = this.node.getChildByName("1"), this._children2 = this.node.getChildByName("2"), this.child1 = this._children1.getComponent(l.default), this.child2 = this._children2.getComponent(l.default), this.AtkFrequency = 0, this.SkillNumber = 0, this.initchildren() }, t.prototype.initchildren = function () { var e = this, t = function (t) { t.human = e.human, t.checkName = e.checkName, t.Atk = e.Atk, t.atkRange = e.atkRange, t.damageInverter = e.damageInverter, e.boomTimer && (t.boomTimer = e.boomTimer), t.SkillType = e.SkillType, t.special = e.special, t.bulletType = e.bulletType, t.targetEnemy = e.targetEnemy, t._init() }; t(this.child1), t(this.child2) }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && null != this.SkillNumber && (this._flyV2 = e, this.betweenDis = 0, this.fly = !0, this.child1.MotionStrakAtk(e), this.child2.MotionStrakAtk(e), this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.Fires = function () { var e = a.bulletFactory.getBullet(this.bulletType[0], this._children1, this.checkName, this._flyV2).getComponent("BulletBase"); e._init(this.node.group, this.node, this.human, "1"), e.setVec(this._flyV2); var t = a.bulletFactory.getBullet(this.bulletType[0], this._children2, this.checkName, this._flyV2).getComponent("BulletBase"); t._init(this.node.group, this.node, this.human, "2"), t.setVec(this._flyV2) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = a.bulletFactory.getBullet(this.bulletType[0], this._children1, this.checkName, o).getComponent("BulletBase"); n._init(this.node.group, this.node, this.human, "1"), n.setVec(o) } }, t.prototype.endFires = function () { this.child1.endFly(), this.child2.endFly() }, t.prototype.lateUpdate = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, null != this.fly && (this.betweenDis += e, this._target.applyForceToCenter(this._flyV2.mul(1e4), !0), this.betweenDis >= 1 && (this.fly = null, this.betweenDis = 0, this.Fires(), this.endFires())) }, r([p], t) }(s.default)); o.default = u, cc._RF.pop() }, { "../Factory/BulletFactory": "BulletFactory", "./GantsCollider": "GantsCollider", "./Weapon": "Weapon" }], GauntletGreen: [function (e, t, o) { "use strict"; cc._RF.push(t, "e5078nXD4pHe7rjYXyciZdm", "GauntletGreen"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("./BulletBase"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.showUpTimer = null, t.flyTimer = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this._rigidBody = this.node.getComponent(cc.RigidBody), this.fly = null, this.user = o, this.node.group = e, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody) }, t.prototype.setVec = function () { null == this.fly && (this.flyTimer = 0, this.fly = !0) }, t.prototype._checkSlow = function () { var e = this, t = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (o) { var n = null; n = o.node.parent ? o.node.parent : cc.find("Canvas"); var i = o.node, r = new cc.Vec2(0, 0); n.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t, r) <= 1e3 && (a.gameConfig.suverModel ? "suverenemy" == n.group && (o.linearVelocity = cc.v2(0, 0), o.angularVelocity = 0) : "weapons2" == e.node.group ? "player1" != o.node.group && "weapons1" != o.node.group && "bomb1" != o.node.group && "rebound1" != o.node.group && "box" != o.node.group && "special1" != o.node.group || (o.linearVelocity = cc.v2(0, 0), o.angularVelocity = 0) : "weapons1" == e.node.group && ("player2" != o.node.group && "weapons2" != o.node.group && "bomb2" != o.node.group && "rebound2" != o.node.group && "box" != o.node.group && "special2" != o.node.group || (o.linearVelocity = cc.v2(0, 0), o.angularVelocity = 0))) }) }, t.prototype.update = function (e) { null != this.fly && (this.flyTimer += e, this._checkSlow(), this.flyTimer >= 2 && (this.fly = null, this.flyTimer = 0, this.node.destroy())) }, r([c], t) }(l.default)); o.default = p, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "./BulletBase": "BulletBase" }], GrappinBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "24f2dtIOxJJ4pusTUJfzlWW", "GrappinBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/GroundCollider"), l = e("../Controller/HumanController"), s = e("../Factory/BulletFactory"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("../Manager/WeaponManager"), d = e("../Weapons/GrappinCollider"), h = e("./BulletBase"), g = cc._decorator, f = g.ccclass, y = (g.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.isBoomTimers = null, t.par = null, t.lastDis = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.group = e, this.node.getComponent(cc.PhysicsPolygonCollider).sensor = !1, this.node.getComponent(cc.PhysicsPolygonCollider).density = 1, this.node.getComponent(cc.PhysicsPolygonCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this._rigidBody.gravityScale = 1, this._rigidBody.linearDamping = .3, this._rigidBody.angularDamping = 10, this._rigidBody.fixedRotation = !1, this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.MotorJoint).connectedBody = t.getComponent(cc.RigidBody), this.node.getComponent(cc.MotorJoint).maxForce = 0, this.node.getComponent(cc.MotorJoint).maxTorque = 0, this.node.getComponent(cc.MotorJoint).apply(), this.par = t, this.damageInverter = .5, this.lastDis = null }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(1200 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("grappinBullet" == this.node.name || "grappinBullet2" == this.node.name) { var i = function () { var t = e.getWorldManifold(); ("bomb1" != o.node.group && "weapons1" != o.node.group || !t.points[0]) && ("bomb2" != o.node.group && "weapons2" != o.node.group || !t.points[0]) || p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2)), n.fly = null, n.isBoom = !0, n.isTimer = 0, n._rigidBody.linearVelocity = cc.v2(0, 0), n._rigidBody.angularVelocity = 0, n._rigidBody.fixedRotation = !0, n._rigidBody.gravityScale = 0, n._rigidBody.linearDamping = 1e6, n._rigidBody.angularDamping = 1e6, n.node.getComponent(cc.PhysicsPolygonCollider).density = 100, n.node.getComponent(cc.PhysicsPolygonCollider).apply(), n.node.getComponent(cc.MotorJoint).maxForce = 3e3, n.node.getComponent(cc.MotorJoint).maxTorque = 100, n.node.getComponent(cc.MotorJoint).apply(); var i = o.node.getComponent(cc.RigidBody); o.node.parent.getComponent(l.default) && n.damageInverter >= .5 && (n.damageInverter = 0, o.node.parent.getComponent(l.default).setDamage(10), i.applyLinearImpulse(n._flyV2.mul(4e4), i.getWorldCenter(), !0)) }; if (!this.isBoom) if ("special1" == t.node.group) { var r = e.getWorldManifold(); c.gameConfig.suverModel ? ("suverenemy" == o.node.group ? i() : "bomb2" == o.node.group || "water" == o.node.group || "suverweapon" == o.node.group || "weapons2" == o.node.group || "ground" == o.node.group && (o.node.getComponent(cc.Sprite) && null != o.node.getComponent(cc.Sprite).spriteFrame || o.node.getComponent(a.default)) || "box" == o.node.group ? i() : "ground" == o.node.group && (null == o.node.getComponent(cc.Sprite) || null == o.node.getComponent(cc.Sprite)) || null != o.node.getComponent(cc.Sprite) && (null == o.node.getComponent(cc.Sprite).spriteFrame || null == o.node.getComponent(cc.Sprite).spriteFrame) ? this.putThis() : "water" == o.node.group && this.putThis(), "suverweapon" == o.node.group && r.points[0] && p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(r.points[0].x - cc.winSize.width / 2, r.points[0].y - cc.winSize.height / 2))) : ("player2" == o.node.group ? i() : "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && i() : "bomb2" == o.node.group || "ground" == o.node.group && (o.node.getComponent(cc.Sprite) && null != o.node.getComponent(cc.Sprite).spriteFrame || o.node.getComponent(a.default)) || "box" == o.node.group ? i() : "ground" == o.node.group && (null == o.node.getComponent(cc.Sprite) || null == o.node.getComponent(cc.Sprite)) || null != o.node.getComponent(cc.Sprite) && (null == o.node.getComponent(cc.Sprite).spriteFrame || null == o.node.getComponent(cc.Sprite).spriteFrame) ? this.putThis() : "water" == o.node.group && this.putThis(), "bomb2" != o.node.group && "weapons2" != o.node.group || !r.points[0] || p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(r.points[0].x - cc.winSize.width / 2, r.points[0].y - cc.winSize.height / 2))) } else "special2" == t.node.group && (c.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb1" == o.node.group || "water" == o.node.group || "suverweapon" == o.node.group || "weapons1" == o.node.group || "ground" == o.node.group && (o.node.getComponent(cc.Sprite) && null != o.node.getComponent(cc.Sprite).spriteFrame || o.node.getComponent(a.default)) || "box" == o.node.group ? i() : "ground" == o.node.group && (null == o.node.getComponent(cc.Sprite) || null == o.node.getComponent(cc.Sprite)) || null != o.node.getComponent(cc.Sprite) && (null == o.node.getComponent(cc.Sprite).spriteFrame || null == o.node.getComponent(cc.Sprite).spriteFrame) ? this.putThis() : "water" == o.node.group && this.putThis() : "player1" == o.node.group ? i() : "weapons1" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && i() : "bomb1" == o.node.group || "ground" == o.node.group && (o.node.getComponent(cc.Sprite) && null != o.node.getComponent(cc.Sprite).spriteFrame || o.node.getComponent(a.default)) || "box" == o.node.group ? i() : "ground" == o.node.group && (null == o.node.getComponent(cc.Sprite) || null == o.node.getComponent(cc.Sprite)) || null != o.node.getComponent(cc.Sprite) && (null == o.node.getComponent(cc.Sprite).spriteFrame || null == o.node.getComponent(cc.Sprite).spriteFrame) ? this.putThis() : "water" == o.node.group && this.putThis()) } }, t.prototype.putThis = function () { this.fly = null, this.isBoom = !0, this.isTimer = 0, this.isBoomTimers = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.node.getComponent(cc.MotorJoint).connectedBody = null, this.node.getComponent(cc.MotorJoint).maxForce = 0, this.node.getComponent(cc.MotorJoint).maxTorque = 0, this.node.getComponent(cc.MotorJoint).apply(), this._rigidBody.gravityScale = 1, this._rigidBody.linearDamping = 0, this._rigidBody.angularDamping = 0, this.par.getComponent(d.default).changeSkill(), s.bulletFactory.putBullet(u.BulletType.grappins, this.node) }, t.prototype.update = function (e) { if (this.node.parent.isValid) if (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly) this.isTimer += e, this.isTimer >= 1.5 && !this.isBoom && this.putThis(); else if (this.isBoom && null == this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this.par.getComponent(cc.RigidBody).getWorldPosition(t), this._rigidBody.getWorldPosition(o); var n = cc.Vec2.distance(t, o); null != this.lastDis && this.lastDis - n <= 2 && (this.node.getComponent(cc.PhysicsPolygonCollider).sensor || (this.node.getComponent(cc.PhysicsPolygonCollider).sensor = !0, this.node.getComponent(cc.PhysicsPolygonCollider).apply(), this._rigidBody.linearDamping = .3, this._rigidBody.angularDamping = 10)), this.lastDis = n, n <= 100 && this.putThis() } }, r([f], t) }(h.default)); o.default = y, cc._RF.pop() }, { "../Controller/GroundCollider": "GroundCollider", "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "../Weapons/GrappinCollider": "GrappinCollider", "./BulletBase": "BulletBase" }], GrappinCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "a193b0LdLhAppgmmRToHHQX", "GrappinCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Component/LineWidth"), l = e("../Controller/HumanController"), s = e("../Factory/BulletFactory"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t.line = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.skillInverter = 3, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.attackProgress = 1, this.line = this.node.getChildByName("line"), this.nd1 = this.node.getChildByName("1"), this.line.active = !1, this.nd1.active = !0 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber && 0 == this.SkillNumber) { var t = this.node, o = s.bulletFactory.getBullet(this.bulletType[0], t, this.checkName, cc.Vec2.ZERO), n = "special1"; "grappin2" == this.node.name && (n = "special2"); var i = o.getComponent("BulletBase"); i._init(n, t, this.human), i.setVec(e), this.line.getChildByName("lineWidth").getComponent(a.default).target = o, this.nd1.active = !1, this.line.active = !0, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function () { p.effectManager.playBigSkills(p.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.changeSkill = function () { this.nd1.active = !0, this.line.active = !1, this.SkillNumber = 0, this.attackProgress = 1 }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(l.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.v2(0, 0), t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Component/LineWidth": "LineWidth", "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], GreenBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "43496QhNGNIG4Vk72SZauez", "GreenBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("../Utils/Utils"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isTimer = 0, t.groundBody = null, t.nextVec = null, t.effinvertal = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.groundBody = null, this.effinvertal = .5, this.isTimer = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(8 * this._rigidBody.getMass()), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { null != this.groundBody && this.groundBody || ("weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.damageInverter = 0, this.changeType(o.node), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)))) : "suverweapon" == o.node.group && (this.betweenDis = 0, this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))) : "player2" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.damageInverter = 0, this.changeType(o.node), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))) : "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.damageInverter = 0, this.changeType(o.node), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)))) : "suverweapon" == o.node.group && (this.betweenDis = 0, this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))) : "player1" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.damageInverter = 0, this.changeType(o.node), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent)))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent))))) }, t.prototype.start = function () { }, t.prototype.changeType = function (e) { e.parent.getComponent(a.default).setDamage(5), this.isTimer = 2, this.groundBody = !0; var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); o = e.parent.convertToWorldSpaceAR(e.getPosition()), this.node.getComponent(cc.WeldJoint).enabled = !0, this.node.getComponent(cc.WeldJoint).anchor = this.node.convertToNodeSpaceAR(o), this.node.getComponent(cc.WeldJoint).connectedBody = t, this.node.getComponent(cc.WeldJoint).apply(); var n = new cc.Vec2(0, 0); cc.Vec2.random(n, u.RandomRangeInt(-30, 30)), this._rigidBody.linearVelocity = this._rigidBody.linearVelocity.add(o) }, t.prototype.update = function (e) { this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), this.effinvertal < .5 && (this.effinvertal += e), null != this.fly && (this.isTimer += e, this.isTimer >= 4 && (this.fly = null, this.isTimer = 0, this.groundBody && (this.node.getComponent(cc.WeldJoint).connectedBody.applyLinearImpulse(this.node.getComponent(cc.WeldJoint).anchor.mul(1e3 * this._rigidBody.getMass()), this.node.getComponent(cc.WeldJoint).connectedBody.getWorldCenter(), !0), this.node.getComponent(cc.WeldJoint).enabled = !1, this.node.getComponent(cc.WeldJoint).anchor = cc.v2(0, 0), this.node.getComponent(cc.WeldJoint).connectedBody = null, this.node.getComponent(cc.WeldJoint).apply()), l.bulletFactory.putBullet(p.BulletType.GreenBall, this.node), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition())))) }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "../Utils/Utils": "Utils", "./BulletBase": "BulletBase" }], GroundCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "fd118A/zKZA5ZjjNPKwv2ZA", "GroundCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../HumanStates/Human"), l = e("../Weapons/BootsCollider"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onBeginContact = function (e, t, o) { "footL" == o.node.name || "footR" == o.node.name ? o.node.parent.getComponent(a.default) && (o.node.parent.getComponent(a.default)._bodyState || (o.node.parent.getComponent(a.default)._bodyState = 0), o.node.parent.getComponent(a.default).footChangeTimes = 0, 1 == o.node.parent.getComponent(a.default)._bodyState && (o.node.parent.getComponent(a.default)._bodyState = 0, o.node.parent.getComponent(a.default)._jumpProgress >= 150 && (o.node.parent.getComponent(a.default)._jumpProgress = 0))) : o.node.parent && ("boot" != o.node.parent.name && "boot2" != o.node.parent.name || o.node.getComponent(l.default).human.getComponent(a.default) && (o.node.getComponent(l.default).human.getComponent(a.default)._bodyState || (o.node.getComponent(l.default).human.getComponent(a.default)._bodyState = 0), o.node.getComponent(l.default).human.getComponent(a.default).footChangeTimes = 0, 1 == o.node.getComponent(l.default).human.getComponent(a.default)._bodyState && (o.node.getComponent(l.default).human.getComponent(a.default)._bodyState = 0, o.node.getComponent(l.default).human.getComponent(a.default)._jumpProgress >= 150 && (o.node.getComponent(l.default).human.getComponent(a.default)._jumpProgress = 0)))) }, t.prototype.start = function () { }, r([c], t) }(cc.Component)); o.default = p, cc._RF.pop() }, { "../HumanStates/Human": "Human", "../Weapons/BootsCollider": "BootsCollider" }], GuitaRed: [function (e, t, o) { "use strict"; cc._RF.push(t, "3772fsKkytPUZ4NJiYcpczr", "GuitaRed"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("../Manager/WeaponManager"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t._flyV22 = null, t._flyV23 = null, t.randomTimers = 0, t.upstate = null, t.changeOnce = !1, t.changeNumber = 1, t } return i(t, e), t.prototype._init = function (e, t, o) { this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVecH = function (e, t, o) { if (null == this.fly) { var n = e.normalize(), i = Math.atan2(n.y, n.x) * (180 / Math.PI); this.node.getChildByName("bg").angle = i, this.upstate = Math.random() > .5, this.randomTimers = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._flyV22 = t.normalize(), this._flyV23 = o.normalize(), this.changeOnce = !1, this.changeNumber = .5, this._rigidBody.angularVelocity = 0, this.fly = !0 } }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (c.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)) } else "suverweapon" == o.node.group && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)); else "weapons2" == t.node.group && (c.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "suverweapon" == o.node.group && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { this.randomTimers += e, this.randomTimers >= this.changeNumber && (this.randomTimers = 0, this.upstate = !this.upstate); var t = cc.v2(0, 0); this.upstate ? (cc.Vec2.lerp(t, this._flyV23, this._flyV22, 1 - this.randomTimers / this.changeNumber), this._rigidBody.linearVelocity = t.normalize().mul(700)) : (cc.Vec2.lerp(t, this._flyV23, this._flyV22, this.randomTimers / this.changeNumber), this._rigidBody.linearVelocity = t.normalize().mul(700)); var o = cc.v2(0, 0), n = cc.v2(0, 0); this._target.getWorldPosition(o), this._rigidBody.getWorldPosition(n), this.betweenDis = cc.Vec2.distance(o, n), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(u.BulletType.GuitaRed, this.node)) } }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], GuitareCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "7c31aG0bR9FW6yLQ4ZUyCOd", "GuitareCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.isFire = null, t.fireTimer = 0, t.upTimers = 0, t.isUp = !1, t.slowTimer = 0, t.isSlow = !1, t.nd1 = null, t.nd2 = null, t.nd3 = null, t.nd4 = null, t.particle2 = null, t.particle3 = null, t.rb4 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.nd3 = this.node.getChildByName("3"), this.nd4 = this.node.getChildByName("4"), this.particle2 = this.nd2.getComponent(cc.ParticleSystem), this.particle3 = this.nd3.getComponent(cc.ParticleSystem), this.rb4 = this.nd4.getComponent(cc.RigidBody), this.AtkFrequency = 0, this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .3 ? 0 : e > .3 && e <= .6 ? 1 : 2, this.nd1.active = !0, 0 == this.SkillNumber ? this.nd1.color = s.weaponColors.red.colors : 1 == this.SkillNumber ? this.nd1.color = s.weaponColors.green.colors : this.nd1.color = s.weaponColors.purple.colors, this.attackProgress = 1 }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.MotionStrakAtk = function () { if (null != this.SkillNumber) { if (0 == this.SkillNumber) { var e = (this.node.angle % 360 + 360) % 360, t = e > 180 ? e - 360 : e; this.nd4.scaleY = t >= 0 && t <= 180 ? 1 : -1, this.nd4.active = !0, this.rb4.linearVelocity = cc.Vec2.ZERO, this.rb4.angularVelocity = 0, c.effectManager.playPEff(c.EffectType.guiateRedEff, this.nd4), this._rigidBody.fixedRotation = !0, this.isFire = !0, this.fireTimer = 0 } else 1 == this.SkillNumber ? (this.nd2.active = !0, this.particle2.resetSystem(), this.isUp = !0, this.upTimers = 0) : (this.nd3.active = !0, this.particle3.resetSystem(), this.isSlow = !0, this.slowTimer = 0); l.audioManager.playEffect("guitar"), this.nd1.color = cc.Color.WHITE, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._checkUp = function () { var e = this, t = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (o) { var n = null; n = o.node.parent ? o.node.parent : cc.find("Canvas"); var i = o.node, r = new cc.Vec2(0, 0); if (n.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t, r) <= 500) { var l = n.getComponent(a.default); s.gameConfig.suverModel ? l && "suverenemy" == n.group && e.AtkFrequency >= e.damageInverter && (e.AtkFrequency = 0, l.setDamage(e.Atk[1])) : "weapons2" == e.node.group ? l && "player1" == o.node.group && e.AtkFrequency >= e.damageInverter && (e.AtkFrequency = 0, l.setDamage(e.Atk[1])) : l && "player2" == o.node.group && e.AtkFrequency >= e.damageInverter && (e.AtkFrequency = 0, l.setDamage(e.Atk[1])); var c = o.node.group; "player1" != c && "player2" != c && "suverenemy" != c && "weapons1" != c && "weapons2" != c && "suverweapons" != c || o.applyForceToCenter(cc.Vec2.UP.mul(4e3), !0) } }) }, t.prototype._checkSlow = function () { var e = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (t) { var o = null; o = t.node.parent ? t.node.parent : cc.find("Canvas"); var n = t.node, i = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(n.getPosition(), i), cc.Vec2.distance(e, i) <= 300) { var r = t.node.name; "lancespear" != r && "lancespear2" != r && (t.linearVelocity = cc.Vec2.ZERO, t.angularVelocity = 0) } }) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill())) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.isFire && (this.fireTimer += e, this.fireTimer >= 2 && (this._rigidBody.fixedRotation = !1, this.isFire = null, this.fireTimer = 0, this.nd4.active = !1)), this.isUp && (this.upTimers += e, this._checkUp(), this.upTimers >= 2 && (this.isUp = !1, this.upTimers = 0, this.particle2.stopSystem())), this.isSlow && (this.slowTimer += e, this._checkSlow(), this.slowTimer >= 1 && (this.isSlow = !1, this.slowTimer = 0, this.particle3.stopSystem(), this._checkSlow())) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], Guncollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "51619TlfdhB0Y28lynXC/bR", "Guncollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.nd1 = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.fireInverter = 1, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.isFire = !1, this.nd1 = this.node.getChildByName("1"), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint) }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.ChangeAc = function (e) { e ? (this.node.scaleY = 1, this.revoluteJoint.anchor.y = -12.7, this.revoluteJoint.apply()) : (this.node.scaleY = -1, this.revoluteJoint.anchor.y = 12.7, this.revoluteJoint.apply()) }, t.prototype.MotionStrakAtk = function (e, t, o) { if (this.isFire = !1, null != this.SkillNumber && null == this.fly) { this._flyV2 = e; var n = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVecP(e), this.SkillNumber = null; var i = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); i._init(this.node.group, null, this.human), i.setVecP(t); var r = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); r._init(this.node.group, null, this.human), r.setVecP(o), this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { this.bulletNumber++; var e = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO); if (e) { var t = e.getComponent("BulletBase"); t._init(this.node.group, null, this.human), t.setVec(this._flyV2) } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire ? (this.fireInverter += e, this.bulletNumber < 4 ? this.fireInverter > 1 && (this.fireInverter = 0, this._fire()) : this.fireInverter > 4 && (this.fireInverter = 0, this.bulletNumber = 0)) : (this.fireInverter += e, this.bulletNumber >= 4 && this.fireInverter > 3 && (this.fireInverter = 1, this.bulletNumber = 0)) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], HammerCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "dc95fo8uxRLNqFrZdUOzke1", "HammerCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("./Weapon"), p = e("../Manager/EffectManager"), u = cc._decorator, d = u.ccclass, h = u.property, g = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.eneryBar = null, t.nd2 = null, t.barNode = null, t.progressBar = null, t.AtkFrequency = 0, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.nd2 = this.node.getChildByName("2"), this.nd2.active = !1, this.barNode = this.eneryBar.getChildByName("bar"), this.progressBar = this.eneryBar.getComponent(cc.ProgressBar), this.progressBar.progress = 1, this.barNode.color = s.weaponColors.blue.colors }, t.prototype.MotionStrakAtk = function () { null == this.fly && this.progressBar.progress >= 1 && (this.nd2.active = !0, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fly = !0, this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; p.effectManager.playSwordAce("StickMan1" == this.human.name ? p.EffectType.bigSkillSwordAce : p.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(this.fly ? 12e4 : 4e4), t.points[0], !0)) }, t.prototype.contactWeapon = function () { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var e = p.EffectType.playerWeaponHit; p.effectManager.playEffect(e, this.nd2.getPosition(), this.node) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly ? (this._rigidBody.applyTorque(25e3, !0), this.progressBar.progress -= 1 / 75, this.progressBar.progress <= 0 && (this.fly = null, this.nd2.active = !1)) : this.progressBar.progress < 1 ? (this.progressBar.progress += .005, this.attackProgress = this.progressBar.progress) : this.attackProgress = 1 }, r([h(cc.Node)], t.prototype, "eneryBar", void 0), r([d], t) }(c.default); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], HarpCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "6ff38VTpHNJ5LejoE9mNvp6", "HarpCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = e("../Manager/AudioManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.isHarp = !0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.nd1 = this.node.getChildByName("1"), this.AtkFrequency = 0, this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .3 ? 0 : e > .3 && e <= .6 ? 1 : 2, this.nd1.active = !0, 0 == this.SkillNumber ? this.nd1.color = s.weaponColors.red.colors : 1 == this.SkillNumber ? this.nd1.color = s.weaponColors.purple.colors : this.nd1.color = s.weaponColors.green.colors }, t.prototype.ChangeAc = function (e) { this.node.scaleY = e ? 1 : -1 }, t.prototype.MotionStrakAtk = function (e, t, o) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) { var n = e; (i = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), i.setVecH(n, t, o) } else if (1 == this.SkillNumber) n = e, (i = l.bulletFactory.getBullet(this.bulletType[1], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), i.setVec(n); else { var i; n = e, (i = l.bulletFactory.getBullet(this.bulletType[2], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), i.setVec(n) } u.audioManager.playEffect("harp"), this.nd1.active = !1, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, this.targetEnemy, this.human), n.setVecH(o, o, o) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, u.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([h], t) }(p.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], HumanController: [function (e, t, o) { "use strict"; cc._RF.push(t, "d4c1cJtPS9NJqyNpMiraMBy", "HumanController"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../HumanStates/Human"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("./CameraCtrl"), p = e("../scenes/Games"), u = e("../Manager/EffectManager"), d = e("../Manager/UserProfile"), h = cc._decorator, g = h.ccclass, f = h.property, y = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.HumanCenter = null, t.BodysRigid = null, t.HealthBar = null, t.isDead = !1, t.hp = 50, t.maxhp = 50, t.addAtk = 0, t.weaponsAtk = 0, t.hpTimer = 0, t.onceShield = 0, t.isSuver = !1, t.isInvincible = !1, t.isSlowShieldTimer = null, t.isShieldInvincible = !1, t.flashColor = cc.Color.WHITE, t.originalColor = null, t.flashTimer = 0, t.flashInterval = .125, t.isCanChangeColor = !1, t } return i(t, e), t.prototype.onLoad = function () { var e = this; this.isSlowShieldTimer = null, this.isShieldInvincible = !1, this.isInvincible = !1, this.isDead = !1, this.hpTimer = 0, this._hpProgress = this.HealthBar.getComponent(cc.ProgressBar).progress, this.scheduleOnce(function () { e.originalColor = e.node.children[0].color.clone(), e.isCanChangeColor = !0 }, .5) }, t.prototype.start = function () { this.showHp() }, t.prototype.setFullHp = function () { this.hp = this.maxhp, this.HealthBar.getComponent(cc.ProgressBar).progress = this.hp / this.maxhp, this.showHp() }, t.prototype.addHP = function (e) { this.hp += e, this.HealthBar.getComponent(cc.ProgressBar).progress = this.hp / this.maxhp, this.showHp() }, t.prototype.showHp = function () { this.hpTimer = 3, this.HealthBar.active || (this.HealthBar.active = !0) }, t.prototype.flash = function () { if (this.isCanChangeColor) { if (this.flashTimer <= 0) for (var e = 0; e < 10; e++) { var t = this.node.children[e]; t && t.isValid && (t.color = this.flashColor) } this.flashTimer = this.flashInterval } }, t.prototype.setDamage = function (e, t) { var o = this; if (void 0 === t && (t = !1), !this.isDead && (null == e && (e = 5), !this.isShieldInvincible && !this.isInvincible)) { if (this.onceShield > 0) this.onceShield--, this.onceShield <= 0 && this.node.getComponent(a.default).offShieldsNode(), this.isShieldInvincible = !0, this.isSlowShieldTimer = .2; else { var n = e + this.addAtk + this.weaponsAtk; s.gameConfig.player2AtkBuff && "StickMan1" == this.node.name ? n *= 1.2 : s.gameConfig.player1AtkBuff && "enemy" == this.node.name && (n *= 1.2), this.hp -= n } if (this.flash(), this.HealthBar.getComponent(cc.ProgressBar).progress = this.hp / this.maxhp, t || l.audioManager.playEffect("inhit"), this.hpTimer = 3, this.HealthBar.active || (this.HealthBar.active = !0), !s.gameConfig.isShowFinishView && this.hp <= 0) if (this.isSuver) this.isDead = !0, cc.find("Canvas").getComponent(p.default).deadAi(this.node), this.node.getComponent(a.default).dead(), this.node.opacity = 80, this.scheduleOnce(function () { o.node && o.node.destroy(), s.gameConfig.killedEnemies++, s.gameConfig.activeEnemies--, s.gameConfig.isShowFinishView || s.gameConfig.killedEnemies >= s.gameConfig.suverEnemiesNum && (s.gameConfig.isLeftWin = !0, s.gameConfig.isShowFinishView = !0, cc.assetManager.getBundle("prefabs").load("views/FinishView", cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 }), s.gameConfig.WhoKill = null, cc.find("Canvas/MainView/Joy").active = !1, s.gameConfig.gameStart = !1) }, .5); else { if (this.isDead = !0, s.gameConfig.suverModel) s.gameConfig.gameStart && (s.gameConfig.isLeftWin = !1, s.gameConfig.isShowFinishView = !0, cc.assetManager.getBundle("prefabs").load("views/FinishView", cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 }), s.gameConfig.WhoKill = null, cc.find("Canvas").getComponent(p.default).clearnHuman(), cc.find("Canvas/MainView/Joy").active = !1, u.effectManager.playEffect(u.EffectType.deadBoom, this.node.getChildByName("body").getPosition(), this.node), s.gameConfig.gameStart = !1); else if (s.gameConfig.gameStart) { cc.find("Canvas/MainView/Joy").active = !1, u.effectManager.playEffect(u.EffectType.deadBoom, this.node.getChildByName("body").getPosition(), this.node), s.gameConfig.gameStart = !1; var i = "enemy" === this.node.name ? 2 : 1; d.userProfile.data.playerState2 === s.PlayerGameState.AI && (i = 3), cc.find("Canvas/MainCamera").getComponent(c.default).setTarget(i, this.node, function () { if (!s.gameConfig.isShowFinishView) { var e = cc.assetManager.getBundle("prefabs"); "enemy" == o.node.name ? (d.userProfile.data.player1Count++, s.gameConfig.WhoKill = 1, d.userProfile.save()) : (d.userProfile.data.player2Count++, s.gameConfig.WhoKill = 2, d.userProfile.save()), 3 == d.userProfile.data.player1Count || 3 == d.userProfile.data.player2Count ? (s.gameConfig.isLeftWin = 3 == d.userProfile.data.player1Count, s.gameConfig.isShowFinishView = !0, e.load("views/FinishView", cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 })) : (s.gameConfig.isShowFinishView = !0, e.load("views/EndView", cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 })) } }) } this.node.getComponent(a.default).dead() } } }, t.prototype.dead = function () { this.node.getChildByName("body").getComponent(cc.RigidBody).fixedRotation = !1; var e = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint); e.lowerAngle = -10, e.upperAngle = 10, e.apply(); var t = this.node.getChildByName("legR").getComponent(cc.RevoluteJoint); t.lowerAngle = -90, t.upperAngle = 90, t.apply(); var o = this.node.getChildByName("legL").getComponent(cc.RevoluteJoint); o.lowerAngle = -90, o.upperAngle = 90, o.apply(); var n = this.node.getChildByName("footL").getComponent(cc.RevoluteJoint); n.lowerAngle = -90, n.upperAngle = 90, n.apply(); var i = this.node.getChildByName("footR").getComponent(cc.RevoluteJoint); i.lowerAngle = -90, i.upperAngle = 90, i.apply() }, t.prototype.update = function (e) { if (null != this.BodysRigid && this.HumanCenter.setPosition(this.BodysRigid.node.getPosition()), !this.isDead && (this.hpTimer -= e, this.hpTimer <= 0 ? this.HealthBar.active = !1 : this.HealthBar.active = !0, null != this.isSlowShieldTimer && (this.isSlowShieldTimer -= e, this.isSlowShieldTimer <= 0 && (this.isSlowShieldTimer = null, this.isShieldInvincible = !1)), this.flashTimer > 0 && (this.flashTimer -= e, this.flashTimer <= 0))) { this.flashTimer = 0; for (var t = 0; t < 10; t++) { var o = this.node.children[t]; o && o.isValid && (o.color = this.originalColor) } } }, r([f(cc.Node)], t.prototype, "HumanCenter", void 0), r([f(cc.RigidBody)], t.prototype, "BodysRigid", void 0), r([f(cc.Node)], t.prototype, "HealthBar", void 0), r([g], t) }(cc.Component); o.default = y, cc._RF.pop() }, { "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/UserProfile": "UserProfile", "../scenes/Games": "Games", "./CameraCtrl": "CameraCtrl" }], HumanFactory: [function (e, t, o) { "use strict"; cc._RF.push(t, "5f110x2F8xMaYZEfzg2UT/d", "HumanFactory"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, i = this && this.__awaiter || function (e, t, o, n) { return new (o || (o = Promise))(function (i, r) { function a(e) { try { s(n.next(e)) } catch (t) { r(t) } } function l(e) { try { s(n.throw(e)) } catch (t) { r(t) } } function s(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof o ? t : new o(function (e) { e(t) })).then(a, l) } s((n = n.apply(e, t || [])).next()) }) }, r = this && this.__generator || function (e, t) { var o, n, i, r, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return r = { next: l(0), throw: l(1), return: l(2) }, "function" == typeof Symbol && (r[Symbol.iterator] = function () { return this }), r; function l(e) { return function (t) { return s([e, t]) } } function s(r) { if (o) throw new TypeError("Generator is already executing."); for (; a;)try { if (o = 1, n && (i = 2 & r[0] ? n.return : r[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, r[1])).done) return i; switch (n = 0, i && (r = [2 & r[0], i.value]), r[0]) { case 0: case 1: i = r; break; case 4: return a.label++, { value: r[1], done: !1 }; case 5: a.label++, n = r[1], r = [0]; continue; case 7: r = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === r[0] || 2 === r[0])) { a = 0; continue } if (3 === r[0] && (!i || r[1] > i[0] && r[1] < i[3])) { a.label = r[1]; break } if (6 === r[0] && a.label < i[1]) { a.label = i[1], i = r; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(r); break } i[2] && a.ops.pop(), a.trys.pop(); continue }r = t.call(e, a) } catch (l) { r = [6, l], n = 0 } finally { o = i = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } }, a = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, o = t && e[t], n = 0; if (o) return o.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }; Object.defineProperty(o, "__esModule", { value: !0 }), o.humanFactory = void 0; var l = e("../Controller/HumanController"), s = e("../Utils/Utils"), c = e("../AI/AiCtrl"), p = e("../HumanStates/Human"), u = e("../Weapons/Weapon"), d = e("../Manager/ConfigManager"), h = e("../Collider/BuffItemCollider"), g = cc._decorator, f = g.ccclass, y = (g.property, [{ name: "StickMan1", url: "player/StickMan1" }, { name: "enemy", url: "player/enemy" }, { name: "AI", url: "human/AI" }, { name: "AI2", url: "human/AI2" }, { name: "AI3", url: "human/AI3" }, { name: "Joy1", url: "views/JoyStick" }, { name: "Joy2", url: "views/JoyStick2" }, { name: "BuffItem", url: "Item/BuffItems" }]), m = function () { function e() { this._prefabs = new Map, this._pool = new Map } return e.prototype.Init = function () { var e = this; return Promise.all(y.map(function (t) { return i(e, void 0, void 0, function () { var e = this; return r(this, function () { return cc.assetManager.getBundle("prefabs").load(t.url, cc.Prefab, function (o, n) { o ? console.error(o) : e._prefabs.set(t.name, n) }), [2] }) }) })) }, e.prototype.getPrefab = function (e, t, o) { var n, i = this._pool.get(e); (n = i.size() > 0 ? i.get() : cc.instantiate(this._prefabs.get(e))).opacity = 255; var r = "AiPoint" + s.RandomRangeInt(1, 4), a = cc.find("Canvas/" + r).getPosition(); n.setPosition(a), n.parent = cc.find("Canvas"); var h = n.getComponent(l.default); h.isDead = !1, h.isSuver = !0, h.hp = d.gameConfig.enemyHp, h.maxhp = d.gameConfig.enemyHp; var g = n.getComponent(c.default), f = [1, 5, 9]; return g.aiLevel = f[s.RandomRangeInt(0, f.length)], g.setWeapons(n.getChildByName("handR").getChildByName("weapons").getComponent(u.default)), g.sethuman(n.getComponent(p.default)), g.setTarget(t), o && g.setTarget2(o), n }, e.prototype.getPlayer = function (e) { var t, o = this._pool.get(e); t = o.size() > 0 ? o.get() : cc.instantiate(this._prefabs.get(e)); var n = d.ScenePostions[d.gameConfig.SceneStr].pos1; return "enemy" == e && (n = d.ScenePostions[d.gameConfig.SceneStr].pos2), t.setPosition(n), t.parent = cc.find("Canvas/humans"), t.active = !0, t }, e.prototype.getAllPrefabs = function (e, t) { var o, n = this._pool.get(e); return (o = n.size() > 0 ? n.get() : cc.instantiate(this._prefabs.get(e))).parent = t, o.active = !0, o }, e.prototype.getItemPrefabs = function (e, t, o) { var n, i = this._pool.get(e); return (n = i.size() > 0 ? i.get() : cc.instantiate(this._prefabs.get(e))).parent = cc.find("Canvas/Items"), n.getComponent(h.default)._init(o), n.setPosition(t), n.active = !0, n }, e.prototype.putPrefab = function (e, t) { this._pool.get(e).put(t) }, e.prototype.createPool = function () { var e, t; try { for (var o = a(this._prefabs.keys()), n = o.next(); !n.done; n = o.next()) { var i = n.value, r = new cc.NodePool; this._pool.set(i, r); for (var l = 0; l < 5; l++) { var s = cc.instantiate(this._prefabs.get(i)); r.put(s) } } } catch (c) { e = { error: c } } finally { try { n && !n.done && (t = o.return) && t.call(o) } finally { if (e) throw e.error } } }, e.prototype.clearPool = function () { this._pool.forEach(function (e) { e.clear() }), this._pool.clear() }, n([f], e) }(); o.default = m, o.humanFactory = new m, cc._RF.pop() }, { "../AI/AiCtrl": "AiCtrl", "../Collider/BuffItemCollider": "BuffItemCollider", "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Utils/Utils": "Utils", "../Weapons/Weapon": "Weapon" }], Human: [function (e, t, o) { "use strict"; cc._RF.push(t, "5fa34i+uVlI3aq/kza3joiI", "Human"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, a = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, o = t && e[t], n = 0; if (o) return o.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }; Object.defineProperty(o, "__esModule", { value: !0 }); var l, s, c, p = e("../Controller/HumanController"), u = e("../Manager/AudioManager"), d = e("../Manager/ConfigManager"), h = cc._decorator, g = h.ccclass, f = h.property; (function (e) { e[e.Run = 0] = "Run", e[e.Idel = 1] = "Idel", e[e.Jump = 2] = "Jump", e[e.IdelJump = 3] = "IdelJump", e[e.InDown = 4] = "InDown", e[e.ChangeOnce = 5] = "ChangeOnce" })(l || (l = {})), function (e) { e[e.Left = 0] = "Left", e[e.right = 1] = "right" }(s || (s = {})), function (e) { e[e.Ground = 0] = "Ground", e[e.Air = 1] = "Air" }(c || (c = {})); var y = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.JumpLines = null, t.shieldsNode = null, t.AtkBuffNode = null, t._jumpProgress = 0, t._HandrigidBody = null, t._BodyrigidBody = null, t._PlayerState = l.Idel, t._HumanMess = 0, t._adleIndex = 0, t.cfg = [{ name: "body", lv: [cc.v2(0, 200), cc.v2(0, 200), cc.v2(0, -200), cc.v2(0, -200)] }], t.limitbody = [{ name: "legL" }, { name: "legR" }], t._bodyState = c.Ground, t._IsTTState = !1, t.GroundToHead_h = 227, t.runState = s.Left, t.checkTimer = 0, t.checkRunOnce = 0, t.footChangeTimes = 0, t.checkChange = 0, t.tempV2 = new cc.Vec2(0, 0), t._forceState = !1, t.mainpoint = null, t._groups = new Map, t.rotBoots = !1, t.bananas = !1, t.bananaState = 1, t.ScieStates = !1, t.guantReds = !1, t.AtkBuffTimer = null, t } return i(t, e), t.prototype.onLoad = function () { var e, t; this.AtkBuffNode.active = !1, "enemy" == this.node.name ? this.mainpoint = cc.find("Canvas/MainPoint2") : "StickMan1" == this.node.name && (this.mainpoint = cc.find("Canvas/MainPoint1")), this._HandrigidBody = this.node.getChildByName("hdR").getComponent(cc.RigidBody), this._BodyrigidBody = this.node.getChildByName("body").getComponent(cc.RigidBody), this._PlayerState = l.Idel; try { for (var o = a(this.node.children), n = o.next(); !n.done; n = o.next()) { var i = n.value; if (i.getComponent(cc.RigidBody)) { var r = i.getComponent(cc.RigidBody); r && (r.syncPosition(!1), r.syncRotation(!1)) } } } catch (s) { e = { error: s } } finally { try { n && !n.done && (t = o.return) && t.call(o) } finally { if (e) throw e.error } } this.schedule(this.IdelInBody, .1), this.setBodyIdel(), this.humanctrl = this.node.getComponent(p.default) }, t.prototype.hpItem = function () { this.humanctrl.setFullHp() }, t.prototype.offShieldsNode = function () { this.shieldsNode && this.shieldsNode.active && (this.shieldsNode.active = !1) }, t.prototype.sheildItem = function () { this.humanctrl.onceShield = 1, this.shieldsNode.active = !0 }, t.prototype.atkBuffItem = function () { "enemy" == this.node.name ? (d.gameConfig.player2AtkBuff = !0, this.AtkBuffTimer = 10, this.AtkBuffNode.active = !0) : "StickMan1" == this.node.name && (d.gameConfig.player1AtkBuff = !0, this.AtkBuffTimer = 10, this.AtkBuffNode.active = !0) }, t.prototype.start = function () { this._initMess() }, t.prototype._getHumanGroup = function () { var e = this, t = "body1"; "player2" == this.node.group && (t = "body2"); var o = function (o) { e.node.getComponentsInChildren(cc.RigidBody).forEach(function (n) { o ? (n.node.group = e._groups.get(n.node.name), n.node.getComponent(cc.Collider).apply()) : (e._groups.set(n.node.name, n.node.group), n.node.group = t, n.node.getComponent(cc.Collider).apply()) }), cc.find("Canvas").getComponentsInChildren("Weapon").forEach(function (n) { n.human == e.node && (o ? (n.node.group = e._groups.get(n.node.name), n.node.getComponent(cc.Collider).apply()) : (e._groups.set(n.node.name, n.node.group), n.node.group = t, n.node.getComponent(cc.Collider).apply())) }), e.node.opacity = 255 }; o(!1), this.node.opacity = 100, cc.tween(this.node).delay(1.5).call(function () { o(!0) }).union().start() }, t.prototype._getHumanGroup2 = function () { var e = this, t = "body1"; "player2" == this.node.group && (t = "body2"); var o = function (o) { e.node.getComponentsInChildren(cc.RigidBody).forEach(function (n) { o ? (n.node.group = e._groups.get(n.node.name), n.node.getComponent(cc.Collider).apply()) : (e._groups.set(n.node.name, n.node.group), n.node.group = t, n.node.getComponent(cc.Collider).apply()) }), e.node.opacity = 255 }; o(!1), this.node.opacity = 100, cc.tween(this.node).delay(1).call(function () { o(!0) }).union().start() }, t.prototype._getHumanGroup3 = function (e) { var t = this, o = "body1"; "player2" == this.node.group && (o = "body2"); var n = function (e) { t.node.getComponentsInChildren(cc.RigidBody).forEach(function (n) { e ? (n.node.group = t._groups.get(n.node.name), n.node.getComponent(cc.Collider).apply()) : (t._groups.set(n.node.name, n.node.group), n.node.group = o, n.node.getComponent(cc.Collider).apply()) }), t.node.opacity = 255 }; n(!1), this._forceState = !0, this.node.opacity = 0, cc.tween(this.node).delay(e).call(function () { t._forceState = !1, n(!0) }).union().start() }, t.prototype._initMess = function () { var e, t, o = 0; try { for (var n = a(this.node.children), i = n.next(); !i.done; i = n.next()) { var r = i.value; r.active && r.getComponent(cc.RigidBody) && (o += r.getComponent(cc.RigidBody).getMass()) } } catch (l) { e = { error: l } } finally { try { i && !i.done && (t = n.return) && t.call(n) } finally { if (e) throw e.error } } this._HumanMess = o }, t.prototype.IdelInBody = function () { var e, t; this._IsTTState || (this._IsTTState = !0); try { for (var o = a(this.cfg), n = o.next(); !n.done; n = o.next()) { var i = n.value, r = this.node.getChildByName(i.name).getComponent(cc.RigidBody); r && i.lv && (r.linearVelocity = i.lv[this._adleIndex % i.lv.length]) } } catch (l) { e = { error: l } } finally { try { n && !n.done && (t = o.return) && t.call(o) } finally { if (e) throw e.error } } this._adleIndex++, this._adleIndex >= 100 && (this._adleIndex = 0) }, t.prototype.setVec = function (e, t) { this.tempV2.set(e), 0 == t ? this._PlayerState = l.Run : 1 == t ? this._PlayerState = l.Jump : 2 == t ? this._PlayerState = l.IdelJump : 3 == t && (this._PlayerState = l.InDown), this._IsTTState && (this._IsTTState = !1), this.unscheduleAllCallbacks() }, t.prototype.setAble = function () { this.JumpLines.active && (this.JumpLines.active = !1, this._jumpProgress = 0), this._PlayerState = l.Idel, this._bodyState != c.Air && (this._IsTTState = !0, this.schedule(this.IdelInBody, .05)), this.checkRunOnce <= .7 ? this.setBodyIdel(!0) : this.setBodyIdel(), this.checkRunOnce = 0, this.checkChange = 0 }, t.prototype.getHeadToGround = function () { var e = null; e = this.node.getChildByName("head").getComponent(cc.RigidBody).getWorldPosition(e); var t = cc.director.getPhysicsManager().rayCast(e, cc.v2(e.x, 10 * -cc.winSize.height), cc.RayCastType.All), o = null; if (t) for (var n = 0; n < t.length; n++) { var i = t[n]; if ("ground" == i.collider.node.group) { var r = null; e.y >= i.point.y && (r = e.y - i.point.y, o = null == o ? r : Math.min(o, r)) } } return o }, t.prototype.HumanIdel = function () { if (this.checkHeight()) { var e = this.node.getChildByName("head").getComponent(cc.RigidBody), t = this.getHeadToGround(); if (null != t && 0 != Math.floor(this.GroundToHead_h - t)) { var o = 100 * (this.GroundToHead_h - t); e.applyForceToCenter(cc.Vec2.UP.mul(o + 8e3), !0) } } }, t.prototype.WaterJump = function (e) { this.JumpLines.active = !1; var t = this.node.getChildByName("body").getComponent(cc.RigidBody); t.angularVelocity = 0, t.linearVelocity = cc.v2(0, 0); var o = cc.Vec2.UP.mul(5e4); e && (1 == e ? o = cc.Vec2.RIGHT_R.mul(5e4) : 2 == e && (o = cc.Vec2.RIGHT_R.mul(-5e4))), t.applyLinearImpulse(o, t.getWorldCenter(), !1), this._bodyState = c.Air }, t.prototype.dead = function () { this.unscheduleAllCallbacks(), this.node.getChildByName("body").getComponent(cc.RigidBody).fixedRotation = !1; var e = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint); e.lowerAngle = -10, e.upperAngle = 10, e.apply(); var t = this.node.getChildByName("legR").getComponent(cc.RevoluteJoint); t.lowerAngle = -90, t.upperAngle = 90, t.apply(); var o = this.node.getChildByName("legL").getComponent(cc.RevoluteJoint); o.lowerAngle = -90, o.upperAngle = 90, o.apply(); var n = this.node.getChildByName("footL").getComponent(cc.RevoluteJoint); n.lowerAngle = -90, n.upperAngle = 90, n.apply(); var i = this.node.getChildByName("footR").getComponent(cc.RevoluteJoint); i.lowerAngle = -90, i.upperAngle = 90, i.apply() }, t.prototype.HumanJump = function () { if (this._bodyState == c.Ground) if (this._jumpProgress < 150) this._jumpProgress += 4, this.JumpLines.active = !0, this.JumpLines.getChildByName("bg").width = this._jumpProgress; else { u.audioManager.playEffect("jump"), this.JumpLines.active = !1; var e = this.node.getChildByName("body").getComponent(cc.RigidBody); e.angularVelocity = 0, e.linearVelocity = cc.v2(0, 0); var t = this.tempV2.mul(20); e.applyLinearImpulse(t, e.getWorldCenter(), !1), this._bodyState = c.Air } }, t.prototype.RunToAddForce = function () { var e = this.node.getChildByName("body").getComponent(cc.RigidBody), t = this.node.getChildByName("footL").getComponent(cc.RevoluteJoint), o = this.node.getChildByName("footR").getComponent(cc.RevoluteJoint); if (2 == this.checkChange) { var n = cc.Vec2.RIGHT.negate().mul(this._HumanMess + 3e3); e.applyForceToCenter(n, !0), t.lowerAngle = 0, t.upperAngle = 90, o.lowerAngle = 0, o.upperAngle = 90, o.apply() } else 1 == this.checkChange && (n = cc.Vec2.RIGHT.mul(this._HumanMess + 3e3), e.applyForceToCenter(n, !0), t.lowerAngle = -90, t.upperAngle = 0, t.apply(), o.lowerAngle = -90, o.upperAngle = 0); t.apply(), o.apply() }, t.prototype.ChangeFootAngel = function (e) { this.checkChange = e ? 1 : 2 }, t.prototype.MoveLegTorque = function () { var e = this, t = 0, o = this.node.getChildByName("legL").getComponent(cc.RevoluteJoint), n = this.node.getChildByName("legR").getComponent(cc.RevoluteJoint); this.runState == s.Left ? (t = -1, o.lowerAngle = -65, o.upperAngle = -60, n.lowerAngle = 60, n.upperAngle = 65) : this.runState == s.right && (t = 1, o.lowerAngle = 60, o.upperAngle = 65, n.lowerAngle = -65, n.upperAngle = -60), o.apply(), n.apply(); var i = this.node.getChildByName("neck").getComponent(cc.RigidBody); this.checkHeight() && i.applyForceToCenter(cc.Vec2.UP.mul(this._HumanMess + 2e3), !0); var r = function (o, n) { var i = e.node.getChildByName(o).getComponent(cc.RigidBody); i.angularVelocity = 0, i.applyTorque(n * t, !0) }; r("legL", 2e4), r("legR", -2e4), r("footL", 4e3), r("footR", -4e3) }, t.prototype.setBodyIdel = function (e) { var t = this; void 0 === e && (e = !1); var o = !0, n = this.node.getChildByName("footL").position, i = this.node.getChildByName("footR").position, r = function (e, o, n, i) { var r = t.node.getChildByName(e).getComponent(cc.RevoluteJoint); r.lowerAngle = -53, r.upperAngle = -50, r.apply(); var a = t.node.getChildByName(o).getComponent(cc.RevoluteJoint); a.lowerAngle = 50, a.upperAngle = 53, a.apply(); var l = t.node.getChildByName(n).getComponent(cc.RevoluteJoint); l.lowerAngle = -45, l.upperAngle = 0, l.apply(); var s = t.node.getChildByName(i).getComponent(cc.RevoluteJoint); s.lowerAngle = 0, s.upperAngle = 45, s.apply() }, a = function (e, o) { var n = t.node.getChildByName(e).getComponent(cc.RigidBody); n.angularVelocity = 0, n.applyAngularImpulse(o * t._HumanMess, !1) }; e ? (o = n.x > i.x) ? (r("legL", "legR", "footR", "footL"), a("footL", -6e3), a("footR", 6e3), a("legL", -6e3), a("legR", 6e3)) : (r("legR", "legL", "footL", "footR"), a("footL", 6e3), a("footR", -6e3), a("legL", 6e3), a("legR", -6e3)) : (n.x > i.x && (o = !1), o ? r("legL", "legR", "footR", "footL") : r("legR", "legL", "footL", "footR")) }, t.prototype.setDown = function () { this._BodyrigidBody.fixedRotation || (this._BodyrigidBody.node.angle = 0, this._BodyrigidBody.fixedRotation = !0); var e = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint); e.lowerAngle = -90, e.upperAngle = 90, e.apply(); var t = this.node.getChildByName("legR").getComponent(cc.RevoluteJoint); t.lowerAngle = -90, t.upperAngle = 90, t.apply(); var o = this.node.getChildByName("legL").getComponent(cc.RevoluteJoint); if (o.lowerAngle = -90, o.upperAngle = 90, o.apply(), this.runState == s.Left) (n = this.node.getChildByName("footL").getComponent(cc.RevoluteJoint)).lowerAngle = 0, n.upperAngle = 90, n.apply(), (i = this.node.getChildByName("footR").getComponent(cc.RevoluteJoint)).lowerAngle = 0, i.upperAngle = 90, i.apply(); else if (this.runState == s.right) { var n, i; (n = this.node.getChildByName("footL").getComponent(cc.RevoluteJoint)).lowerAngle = -90, n.upperAngle = 0, n.apply(), (i = this.node.getChildByName("footR").getComponent(cc.RevoluteJoint)).lowerAngle = -90, i.upperAngle = 0, i.apply() } }, t.prototype.checkHeight = function () { return !(this.getHeadToGround() > 1.3 * this.GroundToHead_h) }, t.prototype.checkHeight2 = function () { return !(this.getHeadToGround() > this.GroundToHead_h) }, t.prototype.lightSprcie = function (e) { var t = this; void 0 === e && (e = .2); var o = function (e) { t.node.getComponentsInChildren(cc.RigidBody).forEach(function (t) { t.fixedRotation = e }) }; o(!0), cc.tween(this.node).delay(e).call(function () { o(!1) }).union().start() }, t.prototype.setForces = function (e, t) { var o, n, i, r, l = this; if (void 0 === t && (t = !1), this.unscheduleAllCallbacks(), e) { try { for (var c = a(this.limitbody), p = c.next(); !p.done; p = c.next()) { var u = p.value, d = this.node.getChildByName(u.name).getComponent(cc.RevoluteJoint); "legL" == u.name ? (d.lowerAngle = -90, d.upperAngle = 0) : (d.lowerAngle = 0, d.upperAngle = 90), d.apply() } } catch (y) { o = { error: y } } finally { try { p && !p.done && (n = c.return) && n.call(c) } finally { if (o) throw o.error } } this.tempV2 = cc.v2(0, 0), (f = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint)).lowerAngle = -15, f.upperAngle = 15, f.apply() } else { try { for (var h = a(this.limitbody), g = h.next(); !g.done; g = h.next())u = g.value, d = this.node.getChildByName(u.name).getComponent(cc.RevoluteJoint), this.runState == s.Left ? "legL" == u.name ? (d.lowerAngle = -65, d.upperAngle = -60) : (d.lowerAngle = 60, d.upperAngle = 65) : this.runState == s.right && ("legR" == u.name ? (d.lowerAngle = -65, d.upperAngle = -60) : (d.lowerAngle = 60, d.upperAngle = 65)), d.enableLimit = !0, d.apply() } catch (m) { i = { error: m } } finally { try { g && !g.done && (r = h.return) && r.call(h) } finally { if (i) throw i.error } } var f; this.tempV2 = cc.v2(0, 0), (f = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint)).lowerAngle = -5, f.upperAngle = 5, f.apply(), this._IsTTState = !0, this.schedule(this.IdelInBody, .05) } this._forceState = e, t && cc.tween(this.node).delay(3).call(function () { l.setForces(!1) }).union().start() }, t.prototype.checkAngle = function () { this.node.getChildByName("neck").angle %= 360, this.node.getChildByName("body").angle %= 360, this.node.getChildByName("footR").angle %= 360, this.node.getChildByName("footL").angle %= 360, this.node.getChildByName("legR").angle %= 360, this.node.getChildByName("legL").angle %= 360 }, t.prototype.getHeadTow = function () { var e = null; e = this.node.getChildByName("head").getComponent(cc.RigidBody).getWorldPosition(e); var t = cc.director.getPhysicsManager().rayCast(e, cc.v2(e.x, 2 * -cc.winSize.height), cc.RayCastType.All), o = null, n = null, i = !1; if (t) for (var r = 0; r < t.length; r++) { var a = t[r]; if ("water" == a.collider.node.group) { var l = null; e.y >= a.point.y && (l = e.y - a.point.y, null == o && (o = l, i = !0)) } "ground" == a.collider.node.group && (l = null, e.y >= a.point.y && (l = e.y - a.point.y, n = null == n ? l : Math.min(n, l))) } return i && (i = null != o && !(o > n)), i }, t.prototype.runofPoint = function () { var e = this.node.getChildByName("MainPoint"), t = new cc.Vec2(0, 0); if (this._BodyrigidBody.node.parent.convertToWorldSpaceAR(this._BodyrigidBody.node.getPosition(), t), cc.Vec2.lerp(t, e.parent.convertToWorldSpaceAR(e.getPosition()), t, .125), e.setPosition(e.parent.convertToNodeSpaceAR(t)), null != this.mainpoint) { var o = new cc.Vec2(0, 0); this._BodyrigidBody.node.parent.convertToWorldSpaceAR(this._BodyrigidBody.node.getPosition(), o), cc.Vec2.lerp(o, this.mainpoint.parent.convertToWorldSpaceAR(this.mainpoint.getPosition()), o, .125), this.mainpoint.setPosition(this.mainpoint.parent.convertToNodeSpaceAR(o)) } }, t.prototype.checkMainPosLength = function () { var e = new cc.Vec2(0, 0); this._BodyrigidBody.node.parent.convertToWorldSpaceAR(this._BodyrigidBody.node.getPosition(), e); var t = new cc.Vec2(0, 0); return this.mainpoint.parent.convertToWorldSpaceAR(this.mainpoint.getPosition(), t), cc.Vec2.distance(t, e) }, t.prototype.flyBoots = function (e) { e ? (this.rotBoots = !0, this._BodyrigidBody.fixedRotation = !1) : this.rotBoots = !1 }, t.prototype.flyScies = function (e) { e ? (this.ScieStates = !0, this._BodyrigidBody.fixedRotation = !1) : this.ScieStates = !1 }, t.prototype.bananaFly = function () { var e = this; this.bananaState = 1, Math.random() >= .5 && (this.bananaState = -1), this._BodyrigidBody ? this._BodyrigidBody.fixedRotation = !1 : (this._BodyrigidBody = this.node.getChildByName("body").getComponent(cc.RigidBody), this._BodyrigidBody.fixedRotation = !1), this.bananas = !0, cc.tween(this.node).delay(1).call(function () { e.bananas = !1 }).union().start() }, t.prototype.lateUpdate = function (e) { if (this.AtkBuffNode.active && (this.AtkBuffTimer -= e, this.AtkBuffTimer <= 0 && ("enemy" == this.node.name ? d.gameConfig.player2AtkBuff = !1 : "StickMan1" == this.node.name && (d.gameConfig.player1AtkBuff = !1), this.AtkBuffNode.active = !1)), this.checkAngle(), null != this.mainpoint && (d.gameConfig.P1Run || d.gameConfig.P2Run ? this.runofPoint() : this.checkHeight2() ? this._PlayerState != l.Idel ? this.runofPoint() : this._IsTTState ? this.checkMainPosLength() > 5 && this.runofPoint() : this.runofPoint() : this.runofPoint()), this._forceState) return this._HandrigidBody.linearVelocity = cc.v2(0, 0), void (this._HandrigidBody.linearVelocity = this.tempV2.mul(4)); if (this.node.isValid && !this.humanctrl.isDead && !this.rotBoots) { if (this.bananas) return this._HandrigidBody.linearVelocity = cc.v2(0, 0), this._HandrigidBody.linearVelocity = this.tempV2.mul(.5), void this._BodyrigidBody.applyTorque(5e5 * this.bananaState, !0); if (this.ScieStates) return this._HandrigidBody.linearVelocity = cc.v2(0, 0), void (this._HandrigidBody.linearVelocity = this.tempV2.mul(.5)); if (this._PlayerState != l.Idel ? this._PlayerState != l.InDown ? ((n = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint)).lowerAngle = -5, n.upperAngle = 5, n.apply(), this.RunToAddForce(), this._bodyState != c.Air && this.checkHeight() && (this.HumanIdel(), this._BodyrigidBody.fixedRotation && (this._BodyrigidBody.fixedRotation = !1)), this._HandrigidBody.linearVelocity = cc.v2(0, 0), this._HandrigidBody.linearVelocity = this.tempV2.mul(1.5)) : (this.setDown(), this._HandrigidBody.linearVelocity = cc.v2(0, 0), this._HandrigidBody.linearVelocity = this.tempV2) : this._bodyState != c.Air && this.checkHeight() && ((n = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint)).lowerAngle = -5, n.upperAngle = 5, n.apply(), this.HumanIdel(), this._IsTTState || (this._IsTTState = !0, this.schedule(this.IdelInBody, .05))), !this._BodyrigidBody.fixedRotation) { var t = this._BodyrigidBody.node.angle, o = this._BodyrigidBody.angularVelocity; t <= 5 && t >= -5 ? (this._BodyrigidBody.angularVelocity = o % 50, this._BodyrigidBody.node.angle = 0, this._BodyrigidBody.fixedRotation = !0) : t > 5 ? this._BodyrigidBody.applyTorque(-1e5, !0) : t < -5 && this._BodyrigidBody.applyTorque(1e5, !0) } var n; if (this._PlayerState != l.Run && this._PlayerState != l.ChangeOnce && this._PlayerState != l.IdelJump && this._PlayerState != l.Jump || (this.checkTimer += e, this.runState == s.Left ? this.checkTimer >= .5 && Math.abs(this.node.getChildByName("legR").angle - this.node.getChildByName("body").angle) >= 60 && (this._PlayerState == l.ChangeOnce ? this.footChangeTimes > 0 || (this.runState = s.right, this.checkTimer = 0, this.footChangeTimes++) : this._PlayerState == l.IdelJump ? this.footChangeTimes >= 1 || (this.runState = s.right, this.checkTimer = 0, this.footChangeTimes++) : this._PlayerState == l.Run && (this.runState = s.right, this.checkTimer = 0, this.footChangeTimes++)) : this.runState == s.right && this.checkTimer >= .5 && Math.abs(this.node.getChildByName("legL").angle - this.node.getChildByName("body").angle) >= 60 && (this._PlayerState == l.ChangeOnce ? this.footChangeTimes > 0 || (this.runState = s.Left, this.checkTimer = 0, this.footChangeTimes++) : this._PlayerState == l.IdelJump ? this.footChangeTimes >= 1 || (this.runState = s.Left, this.checkTimer = 0, this.footChangeTimes++) : this._PlayerState == l.Run && (this.runState = s.Left, this.checkTimer = 0, this.footChangeTimes++)), this.MoveLegTorque()), !this.checkHeight()) this._PlayerState != l.InDown && ((n = this.node.getChildByName("neck").getComponent(cc.RevoluteJoint)).lowerAngle = -5, n.upperAngle = 5, n.apply()), this._BodyrigidBody.applyForceToCenter(cc.Vec2.UP.mul(-320 * this._HumanMess), !0) } }, r([f(cc.Node)], t.prototype, "JumpLines", void 0), r([f(cc.Node)], t.prototype, "shieldsNode", void 0), r([f(cc.Node)], t.prototype, "AtkBuffNode", void 0), r([g], t) }(cc.Component); o.default = y, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager" }], IceCreamCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "edb4ajFArZPMJ4Sw07VjKDr", "IceCreamCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = e("../Manager/AudioManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.firepoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.skillInverter = 3, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.firepoint = this.node.getChildByName("firepoint"), this.changeSkill() }, t.prototype.changeSkill = function () { this.SkillNumber = 0 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO), o = "bomb1"; "weapons2" == this.node.group && (o = "bomb2"); var n = t.getComponent("BulletBase"); n._init(o, this.targetEnemy, this.human), n.setVec(e), u.audioManager.playEffect("scepter"), this.SkillNumber = null, this.skillInverter = 2, this.attackProgress = 0 } }, t.prototype.BigDamage = function () { c.effectManager.playBigSkills(c.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e) { this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber])) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([h], t) }(p.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], IceMotagne: [function (e, t, o) { "use strict"; cc._RF.push(t, "92bbeonSj1L7JEanY3M5Xvt", "IceMotagne"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.isTimer = 0, t.damageAtk = 5, t.targetlist = [], t.isplayer = !1, t } return i(t, e), t.prototype._init = function (e, t, o, n) { this.damageAtk = 5, this.targetlist = [], this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = .2, this.targetEnemy = t, this.fly = null, this.isTimer = 0, this.isplayer = !0, "2" == n && (this.isplayer = !1) }, t.prototype.setVec = function () { this.fly = !0, this.isTimer = 0, cc.tween(this.node).set({ scale: 0 }).to(.2, { scale: 1 }).union().start() }, t.prototype.onBeginContact = function (e, t, o) { this.isplayer ? s.gameConfig.suverModel ? ("suverenemy" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))), "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "box" != o.node.group && "special1" != o.node.group && "special2" != o.node.group && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : ("player2" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))), "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "box" != o.node.group && "special1" != o.node.group && "special2" != o.node.group && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : this.isplayer || (s.gameConfig.suverModel ? ("suverenemy" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))), "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "box" != o.node.group && "special1" != o.node.group && "special2" != o.node.group && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node)) : ("player1" == o.node.group && (o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))), "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "box" != o.node.group && "special1" != o.node.group && "special2" != o.node.group && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node))) }, t.prototype.onEndContact = function (e, t, o) { "box" == t.node.group && -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1) }, t.prototype.getHeadToGround = function (e) { var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this.node.getComponent(cc.RigidBody).getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = Math.abs(i.len()); t.applyForceToCenter(cc.Vec2.UP.mul(Math.abs(this.node.width / 2 - r) * t.getMass() * 200), !0) }, t.prototype.update = function (e) { var t = this; this.node.parent.isValid && (this.damageInverter < .1 && (this.damageInverter += e), this.targetlist.length > 0 && this.targetlist.forEach(function (e) { t.getHeadToGround(e) }), null != this.fly && (this.isTimer += e, this.isTimer >= 2 && (this.isTimer = 0, this.node.scale = 0, l.bulletFactory.putBullet(c.BulletType.IceMontagne, this.node), this.fly = null))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], IronHandCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "33a67IJQodEmpcyC/hWoqbb", "IronHandCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.flyTimer = 2, t.isFire = null, t._angle = 0, t._stype = null, t.nd2 = null, t.firesmall = null, t.fire1 = null, t.fire1Rb = null, t.firepoint = null, t.humanRb = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this.isFire = null, this.flyTimer = 2, this.isSniper = !0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.nd2 = this.node.getChildByName("2"), this.firesmall = this.node.getChildByName("firesmall"), this.fire1 = this.node.getChildByName("fire1"), this.fire1Rb = this.fire1.getComponent(cc.RigidBody), this.firepoint = this.node.getChildByName("firepoint"), this.humanRb = this.human.getChildByName("body").getComponent(cc.RigidBody), this.changeSkill() }, t.prototype.setAngle = function (e) { this._angle = e }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .3 ? 0 : e > .3 && e <= .6 ? 1 : 2, this.nd2.active = !0, 0 == this.SkillNumber ? this.nd2.color = c.weaponColors.red.colors : 1 == this.SkillNumber ? this.nd2.color = c.weaponColors.green.colors : this.nd2.color = c.weaponColors.purple.colors, this.firesmall.active && (this.firesmall.active = !1), this.fire1.active && (this.fire1.active = !1) }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (this.flyTimer = 0, this.nd2.active = !1, 0 == this.SkillNumber) this.fire1Rb.linearVelocity = cc.Vec2.ZERO, this.fire1Rb.angularVelocity = 0, this.fire1.active = !0, this.isFire = !0; else if (1 == this.SkillNumber) this.firesmall.angle = -90, this.firesmall.active = !0, this.fly = !0; else { var t = l.bulletFactory.getBullet(this.bulletType[2], this.firepoint, this.checkName, cc.Vec2.ZERO), o = "rebound1"; "IronHand2" == this.node.name && (o = "rebound2"); var n = t.getComponent("BulletBase"); n._init(o, this.targetEnemy, this.human), n.setVec(e) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[2], this.firepoint, this.checkName, cc.Vec2.ZERO), i = "rebound1"; "IronHand2" == this.node.name && (i = "rebound2"); var r = n.getComponent("BulletBase"); r._init(i, this.targetEnemy, this.human), r.setVec(o) } }, t.prototype.start = function () { }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(5), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5 && (s.audioManager.playEffect("sword2"), this.effinvertal = 0, t.points[0])) { var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && this.contactWeapon(i, n, t)) }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.update = function (e) { if (this.AtkFrequency < .5 && (this.AtkFrequency += e), this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 3, this.skillTimer >= 3 && (this.SkillNumber = 0, this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, null != this.fly) if (this.flyTimer += e, this.flyTimer >= 2 && (this.firesmall.active = !1, this.fly = null), this._angle <= -40 && this._angle >= -130) { var t = this.getRadianByAngle(this._angle), o = cc.v2(Math.cos(t), Math.sin(t)).normalize(); this.humanRb.applyForceToCenter(o.neg().mul(5e4), !0) } else this._angle >= 70 && this._angle <= 110 && (t = this.getRadianByAngle(this._angle), o = cc.v2(Math.cos(t), Math.sin(t)).normalize(), this.humanRb.applyForceToCenter(o.neg().mul(5e4), !0)); null != this.isFire && (this.flyTimer += e, this.flyTimer >= 2 && (this.fly = null, this.fire1.active = !1)) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], JBFireCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "2d25dFqUn9FfI8Q1Za4YkBA", "JBFireCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.enemyV3 = new cc.Vec2, t.AtkFrequency = .5, t.angles = 0, t } return i(t, e), t.prototype.onEnable = function () { this.AtkFrequency = .5, this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0, this.node.angle = -90, this.node.getChildByName("fire").getComponent(cc.ParticleSystem).resetSystem() }, t.prototype.onDisable = function () { this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0 }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("firesmall" == this.node.name) { var i = function () { if (e.getWorldManifold(), n.AtkFrequency >= .5) { n.AtkFrequency = 0; var i = o.node.getComponent(cc.RigidBody); n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var r = o.node.parent.convertToWorldSpaceAR(o.node.getPosition()), a = new cc.Vec2(0, 0); cc.Vec2.subtract(a, r, n.enemyV3), i.applyLinearImpulse(a.mul(2e3 * i.getMass()), i.getWorldCenter(), !0) } }; "weapons1" == t.node.group ? a.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player2" != o.node.group && "weapons2" != o.node.group || i() : "weapons2" == t.node.group && (a.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player1" != o.node.group && "weapons1" != o.node.group || i()) } }, t.prototype.update = function (e) { this.AtkFrequency < .5 && (this.AtkFrequency += e) }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager" }], JoyStick: [function (e, t, o) { "use strict"; cc._RF.push(t, "85c25Ycnn9E6YDAe2f86NOg", "JoyStick"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../HumanStates/Human"), l = e("../Manager/ConfigManager"), s = e("../Manager/WeaponManager"), c = e("../Manager/AudioManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.stick = null, t.stickBg = null, t.human2 = null, t.SkillProgress = null, t.attackProgress = null, t.isPlayer1 = null, t.stopTime = null, t.stopMove = !1, t._stickPos = cc.v2(0, 0), t._radian = 0, t._angle = 0, t.turnAngle = 0, t.handPos = cc.v2(0, 0), t.handPos2 = cc.v2(0, 0), t.handPos3 = cc.v2(0, 0), t.attackState = !1, t.isStartAttack = !1, t._BigSkillPos = [], t.bigSkillTimer = 0, t.bigSkillState = !1, t.lrBool = null, t.iskeyDown = !1, t.iskeycodes = [], t } return i(t, e), Object.defineProperty(t.prototype, "MoveState", { get: function () { return this.stopMove }, set: function (e) { this.stopMove = e }, enumerable: !1, configurable: !0 }), t.prototype.onLoad = function () { var e = this; if (this.setStickVisible(!0), this._initTouchEvent(), this.bigSkillState = !1, this.attackState = !1, cc.winSize.width / cc.winSize.height < 1.65 && (this.node.scale = .7), 2 == l.gameConfig.gameChooseViewNumber) if (l.gameConfig.isMobile) { if ("JoyStick" == this.node.name) { this.SkillProgress.node.active = !1, this.attackProgress.node.active = !1; var t = this.node.getChildByName("stickbg"); this.SkillProgress = t.getChildByName("item3Mob").getComponent(cc.ProgressBar), this.attackProgress = t.getChildByName("item4Mob").getComponent(cc.ProgressBar), this.SkillProgress.node.active = !0, this.attackProgress.node.active = !0 } } else this.SkillProgress.node.active = !1, this.attackProgress.node.active = !1, this.SkillProgress = this.node.getChildByName("item3PC").getComponent(cc.ProgressBar), this.attackProgress = this.node.getChildByName("item4PC").getComponent(cc.ProgressBar), this.SkillProgress.node.active = !0, this.attackProgress.node.active = !0; l.gameConfig.isMobile && (this.SkillProgress.node.scale = 1.25, this.attackProgress.node.scale = 1.25), this.stick.opacity = 0, this.stickBg.opacity = 0, this.scheduleOnce(function () { e.stick.opacity = l.gameConfig.isMobile ? 255 : 0, e.stickBg.opacity = l.gameConfig.isMobile ? 255 : 0 }, 1.6) }, t.prototype.onEnable = function () { var e = this; this.scheduleOnce(function () { e.isStartAttack = !0 }, .3) }, t.prototype._onKeyDown = function (e) { l.gameConfig.isShowFinishView || null != this.lrBool && (this.lrBool ? (e.keyCode == cc.macro.KEY.w && (this.iskeycodes[0] = cc.macro.KEY.w, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.s && (this.iskeycodes[1] = cc.macro.KEY.s, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.a && (this.iskeycodes[2] = cc.macro.KEY.a, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.d && (this.iskeycodes[3] = cc.macro.KEY.d, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.space && this.showbigs(), e.keyCode == cc.macro.KEY.e && this.showattack(), 2 != l.gameConfig.gameChooseViewNumber && this.checkArowsDown(e)) : (this.checkArowsDown(e), e.keyCode == cc.macro.KEY.enter && this.showbigs(), e.keyCode == cc.macro.KEY.shift && this.showattack())) }, t.prototype.checkArowsDown = function (e) { e.keyCode == cc.macro.KEY.up && (this.iskeycodes[0] = cc.macro.KEY.up, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.down && (this.iskeycodes[1] = cc.macro.KEY.down, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.left && (this.iskeycodes[2] = cc.macro.KEY.left, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1), e.keyCode == cc.macro.KEY.right && (this.iskeycodes[3] = cc.macro.KEY.right, this._moveTouch(this.checkHaspos()), this.iskeyDown = !1) }, t.prototype._areHandPositionsSet = function () { return [this.handPos, this.handPos2, this.handPos3].every(function (e) { return 0 !== e.x && 0 !== e.y }) }, t.prototype.showbigs = function () { if (!cc.director.isPaused() && this.bigSkillState) if (c.audioManager.playEffect("explosion"), this._weapons.EndSkillType == s.WeaponsSkillType.Melee) this._areHandPositionsSet() ? this._weapons.BigDamage([this.handPos, this.handPos2, this.handPos3]) : this._weapons.BigDamage(this._getAcePos()), this.bigSkillTimer = 0, this.bigSkillState = !1; else if (0 == this._BigSkillPos.length) { var e = this.stickBg.width / 2 - this.stick.width / 2, t = this.getAngle(cc.v2(0, 0)); this._weapons.BigDamage(this._getBigPos(t, e)), this.bigSkillTimer = 0, this.bigSkillState = !1 } else this._weapons.BigDamage(this._BigSkillPos), this.bigSkillTimer = 0, this.bigSkillState = !1 }, t.prototype.showattack = function () { if (!cc.director.isPaused() && this.attackState) { var e = this._weapons.node.name; "harp" != e && "harp2" != e && "guitar" != e && "guitar2" != e && "scepter" != e && "scepter2" != e && "iceCream" != e && "iceCream2" != e && c.audioManager.playEffect("skill"), this._weapons.isGun || this._weapons.isHarp ? this._weapons.MotionStrakAtk(this.handPos, this.handPos2, this.handPos3) : this._weapons.MotionStrakAtk(this.handPos), this.attackState = !1 } }, t.prototype._onKeyUP = function (e) { var t = this; if (l.gameConfig.isShowFinishView) this._endTouch(); else if (null != this.lrBool) { var o = function () { null == t.iskeycodes[0] && null == t.iskeycodes[1] && null == t.iskeycodes[2] && null == t.iskeycodes[3] ? t._endTouch() : t._moveTouch(t.checkHaspos()) }; this.lrBool ? (e.keyCode == cc.macro.KEY.w && (this.iskeycodes[0] = null, o()), e.keyCode == cc.macro.KEY.s && (this.iskeycodes[1] = null, o()), e.keyCode == cc.macro.KEY.a && (this.iskeycodes[2] = null, o()), e.keyCode == cc.macro.KEY.d && (this.iskeycodes[3] = null, o()), 2 != l.gameConfig.gameChooseViewNumber && this.checkArrowsUp(e, o)) : this.checkArrowsUp(e, o) } }, t.prototype.checkArrowsUp = function (e, t) { e.keyCode == cc.macro.KEY.up && (this.iskeycodes[0] = null, t()), e.keyCode == cc.macro.KEY.down && (this.iskeycodes[1] = null, t()), e.keyCode == cc.macro.KEY.left && (this.iskeycodes[2] = null, t()), e.keyCode == cc.macro.KEY.right && (this.iskeycodes[3] = null, t()) }, t.prototype.checkHaspos = function () { var e = cc.v2(0, 0); return null != this.iskeycodes[0] && (e.y = 200), null != this.iskeycodes[1] && (e.y = -200), null != this.iskeycodes[2] && (e.x = -200), null != this.iskeycodes[3] && (e.x = 200), e }, t.prototype.sethuman = function (e, t) { void 0 === t && (t = null), this.human2 = e, this.lrBool = t }, t.prototype.setWeapons = function (e) { this._weapons = e }, t.prototype.setStickVisible = function (e) { this.stick.active = e, this.stickBg.active = e }, t.prototype._initTouchEvent = function () { var e = this.stickBg; e.on(cc.Node.EventType.TOUCH_START, this._touchStartEvent, this), e.on(cc.Node.EventType.TOUCH_MOVE, this._touchMoveEvent, this), e.on(cc.Node.EventType.TOUCH_END, this._touchEndEvent, this), e.on(cc.Node.EventType.TOUCH_CANCEL, this._touchEndEvent, this), cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this._onKeyDown, this), cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this._onKeyUP, this) }, t.prototype.start = function () { }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.getAngle = function (e) { var t = this.stickBg.getPosition(); return this._angle = Math.atan2(e.y - t.y, e.x - t.x) * (180 / Math.PI), this._angle }, t.prototype.getDistance = function (e, t) { return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)) }, t.prototype._touchStartEvent = function (e) { 1 == this.isPlayer1 && (l.gameConfig.P1Run = !0), 2 == this.isPlayer1 && (l.gameConfig.P2Run = !0); var t = this.stickBg.convertToNodeSpaceAR(e.getLocation()); this._stickPos = t; var o = this.stickBg.getPosition().x + t.x, n = this.stickBg.getPosition().y + t.y, i = this.stickBg.width / 2, r = this.getDistance(t, cc.v2(0, 0)), a = this.stickBg.width / 2 - this.stick.width / 2; this._CheckPos = cc.v2(o, n); var s = this.getAngle(cc.v2(o, n)); this.turnAngle = this._angle; var c = cc.v2(0, 0), p = cc.v2(0, 0), u = cc.v2(0, 0), d = s + 45, h = s - 45, g = this.getRadianByAngle(s), f = this.getRadianByAngle(d), y = this.getRadianByAngle(h); if (p = cc.v2(Math.cos(f) * a, Math.sin(f) * a).normalize(), u = cc.v2(Math.cos(y) * a, Math.sin(y) * a).normalize(), c = cc.v2(Math.cos(g) * a, Math.sin(g) * a).normalize(), this._getBigPos(s, a), a > r) this.stick.setPosition(cc.v2(o, n)); else { var m = this.stickBg.x + Math.cos(g) * a, v = this.stickBg.y + Math.sin(g) * a; this.stick.setPosition(cc.v2(m, v)) } return c.x > 0 ? (this.human2 && this.human2.ChangeFootAngel(!0), this._weapons.isGun && this._weapons.ChangeAc(!0), this._weapons.isChangeAc && this._weapons.ChangeAc(!0)) : c.x < 0 && (this.human2 && this.human2.ChangeFootAngel(!1), this._weapons.isGun && this._weapons.ChangeAc(!1), this._weapons.isChangeAc && this._weapons.ChangeAc(!1)), this.handPos = c, this.handPos2 = p, this.handPos3 = u, !(i < r || (this.stick.setPosition(cc.v2(o, n)), 0)) }, t.prototype._moveTouch = function (e) { 1 == this.isPlayer1 && (l.gameConfig.P1Run = !0), 2 == this.isPlayer1 && (l.gameConfig.P2Run = !0), this.stopMove = !0, this.stopTime = null; var t = e, o = this.getDistance(t, cc.v2(0, 0)), n = this.stickBg.width / 2 - this.stick.width / 2, i = this.stickBg.x + t.x, r = this.stickBg.y + t.y; this._CheckPos = cc.v2(i, r); var a = this.getAngle(cc.v2(i, r)); this.turnAngle = this._angle; var s = cc.v2(0, 0), c = cc.v2(0, 0), p = cc.v2(0, 0), u = a + 25, d = a - 25; this._weapons.isGun && (u = a + 25, d = a - 25), this._weapons.isHarp && (u = a + 60, d = a - 60); var h = this.getRadianByAngle(a), g = this.getRadianByAngle(u), f = this.getRadianByAngle(d); if (c = cc.v2(Math.cos(g) * n, Math.sin(g) * n).normalize(), p = cc.v2(Math.cos(f) * n, Math.sin(f) * n).normalize(), this._getBigPos(a, n), n > o) this.stick.setPosition(cc.v2(i, r)), s = cc.v2(t.x, t.y).normalize(); else { var y = this.stickBg.x + Math.cos(h) * n, m = this.stickBg.y + Math.sin(h) * n; this.stick.setPosition(cc.v2(y, m)), s = cc.v2(Math.cos(h) * n, Math.sin(h) * n).normalize() } s.x > 0 ? (this.human2 && this.human2.ChangeFootAngel(!0), (this._weapons.isGun || this._weapons.isHarp) && this._weapons.ChangeAc(!0), this._weapons.isChangeAc && this._weapons.ChangeAc(!0)) : s.x < 0 && (this.human2 && this.human2.ChangeFootAngel(!1), (this._weapons.isGun || this._weapons.isHarp) && this._weapons.ChangeAc(!1), this._weapons.isChangeAc && this._weapons.ChangeAc(!1)), this.handPos = s, this.handPos2 = c, this.handPos3 = p }, t.prototype._endTouch = function () { this.stopMove = !1, this.stick.setPosition(this.stickBg.getPosition()), this.human2 && (this.human2._PlayerState = 1, this.human2.setAble()), 1 == this.isPlayer1 && (l.gameConfig.P1Run = !1), 2 == this.isPlayer1 && (l.gameConfig.P2Run = !1) }, t.prototype._getBigPos = function (e, t) { var o = cc.v2(0, 0), n = cc.v2(0, 0), i = cc.v2(0, 0), r = cc.v2(0, 0), a = cc.v2(0, 0), l = cc.v2(0, 0), s = e + 50, c = e + 30, p = e + 10, u = e - 10, d = e - 30, h = e - 50, g = this.getRadianByAngle(s), f = this.getRadianByAngle(c), y = this.getRadianByAngle(p), m = this.getRadianByAngle(u), v = this.getRadianByAngle(d), _ = this.getRadianByAngle(h); return o = cc.v2(Math.cos(g) * t, Math.sin(g) * t).normalize(), n = cc.v2(Math.cos(f) * t, Math.sin(f) * t).normalize(), i = cc.v2(Math.cos(y) * t, Math.sin(y) * t).normalize(), r = cc.v2(Math.cos(m) * t, Math.sin(m) * t).normalize(), a = cc.v2(Math.cos(v) * t, Math.sin(v) * t).normalize(), l = cc.v2(Math.cos(_) * t, Math.sin(_) * t).normalize(), this._BigSkillPos[0] = o, this._BigSkillPos[1] = n, this._BigSkillPos[2] = i, this._BigSkillPos[3] = r, this._BigSkillPos[4] = a, this._BigSkillPos[5] = l, this._BigSkillPos }, t.prototype._getAcePos = function () { var e = this.stickBg.width / 2 - this.stick.width / 2, t = this.getAngle(cc.v2(0, 0)), o = cc.v2(0, 0), n = cc.v2(0, 0), i = cc.v2(0, 0), r = t + 30, a = t - 30, l = this.getRadianByAngle(r), s = this.getRadianByAngle(a), c = this.getRadianByAngle(t); return n = cc.v2(Math.cos(l) * e, Math.sin(l) * e).normalize(), i = cc.v2(Math.cos(s) * e, Math.sin(s) * e).normalize(), o = cc.v2(Math.cos(c) * e, Math.sin(c) * e).normalize(), this.handPos = o, this.handPos2 = n, this.handPos3 = i, [this.handPos, this.handPos2, this.handPos3] }, t.prototype._touchMoveEvent = function (e) { this.stopMove = !0, this.stopTime = null; var t = this.stickBg.convertToNodeSpaceAR(e.getLocation()), o = this.getDistance(t, cc.v2(0, 0)), n = this.stickBg.width / 2 - this.stick.width / 2, i = this.stickBg.x + t.x, r = this.stickBg.y + t.y; this._CheckPos = cc.v2(i, r); var a = this.getAngle(cc.v2(i, r)); this.turnAngle = this._angle; var l = cc.v2(0, 0), s = cc.v2(0, 0), c = cc.v2(0, 0), p = a + 25, u = a - 25; this._weapons.isGun && (p = a + 25, u = a - 25), this._weapons.isHarp && (p = a + 60, u = a - 60); var d = this.getRadianByAngle(a), h = this.getRadianByAngle(p), g = this.getRadianByAngle(u); if (s = cc.v2(Math.cos(h) * n, Math.sin(h) * n).normalize(), c = cc.v2(Math.cos(g) * n, Math.sin(g) * n).normalize(), this._getBigPos(a, n), n > o) this.stick.setPosition(cc.v2(i, r)), l = cc.v2(t.x, t.y).normalize(); else { var f = this.stickBg.x + Math.cos(d) * n, y = this.stickBg.y + Math.sin(d) * n; this.stick.setPosition(cc.v2(f, y)), l = cc.v2(Math.cos(d) * n, Math.sin(d) * n).normalize() } l.x > 0 ? (this.human2 && this.human2.ChangeFootAngel(!0), (this._weapons.isGun || this._weapons.isHarp) && this._weapons.ChangeAc(!0), this._weapons.isChangeAc && this._weapons.ChangeAc(!0)) : l.x < 0 && (this.human2 && this.human2.ChangeFootAngel(!1), (this._weapons.isGun || this._weapons.isHarp) && this._weapons.ChangeAc(!1), this._weapons.isChangeAc && this._weapons.ChangeAc(!1)), this.handPos = l, this.handPos2 = s, this.handPos3 = c }, t.prototype._touchEndEvent = function () { this.stopMove = !1, this.stick.setPosition(this.stickBg.getPosition()), this.human2 && (this.human2._PlayerState = 1, this.human2.setAble()), 1 == this.isPlayer1 && (l.gameConfig.P1Run = !1), 2 == this.isPlayer1 && (l.gameConfig.P2Run = !1) }, t.prototype.lateUpdate = function (e) { if (this.stopMove) { var t = this.getAngle(this._CheckPos); this._weapons.isGun ? this._weapons.setLimit(this.handPos) : this._weapons.setLimit(), this._weapons.isSniper && this._weapons.setAngle(t), this._weapons.isFlail && this._weapons.setLimit(this.handPos), this._weapons.isScies && this._weapons.setLimit(this.handPos), this.human2 && (t >= 40 && t <= 140 ? this.human2.HumanJump() : (this.human2._jumpProgress = 0, this.human2.JumpLines.active = !1), t >= 80 && t <= 100 ? this.human2.setVec(this.handPos.mul(2e3), 2) : t <= -75 && t >= -105 ? this.human2.setVec(this.handPos.mul(2e3), 3) : this.human2.setVec(this.handPos.mul(3e3), 0)) } this.bigSkillState || (this.SkillProgress.node.getComponent(cc.Button).interactable = !1, this.SkillProgress.node.getChildByName("key").active = !1, this.SkillProgress.node.getChildByName("finger").active = !1, this.SkillProgress.node.getChildByName("mask").active = !0, this.bigSkillTimer += e, this.SkillProgress.progress = this.bigSkillTimer / 10, this.bigSkillTimer >= 10 && (this.bigSkillState = !0, this.SkillProgress.node.getChildByName("mask").active = !1, this.SkillProgress.node.getComponent(cc.Button).interactable = !0, this.SkillProgress.node.getChildByName("finger").active = !0, l.gameConfig.isMobile || (this.SkillProgress.node.getChildByName("key").active = !0))), this.isStartAttack && !this.attackState && this._weapons && (this.attackProgress.node.getComponent(cc.Button).interactable = !1, this.attackProgress.node.getChildByName("finger").active = !1, this.attackProgress.node.getChildByName("key").active = !1, this.attackProgress.node.getChildByName("mask").active = !0, this.attackProgress.progress = this._weapons.attackProgress, this._weapons.attackProgress >= 1 && (this.attackState = !0, this.attackProgress.node.getChildByName("mask").active = !1, this.attackProgress.node.getComponent(cc.Button).interactable = !0, this.attackProgress.node.getChildByName("finger").active = !0, l.gameConfig.isMobile || (this.attackProgress.node.getChildByName("key").active = !0))) }, r([d(cc.Node)], t.prototype, "stick", void 0), r([d(cc.Node)], t.prototype, "stickBg", void 0), r([d(a.default)], t.prototype, "human2", void 0), r([d(cc.ProgressBar)], t.prototype, "SkillProgress", void 0), r([d(cc.ProgressBar)], t.prototype, "attackProgress", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager" }], Jumper: [function (e, t, o) { "use strict"; cc._RF.push(t, "8775dU6ewdCA4LxQGl5zHew", "Jumper"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.force = 0, t.dirX = 0, t.dirY = 0, t.target = null, t.targetlist = [], t.isTween = !1, t } return i(t, e), t.prototype.getHeadToGround = function (e) { var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this.node.getComponent(cc.RigidBody).getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = Math.abs(i.len()), a = this.node.width, l = t.getMass(), s = new cc.Vec2(this.dirX, this.dirY).mul(Math.abs(a / 2 - r) * l * this.force); t.applyForceToCenter(s, !0) }, t.prototype.onBeginContact = function (e, t, o) { "deads" == t.node.group && "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "iceMontagne" != o.node.name && "lancespear" != o.node.name && "lancespear2" != o.node.name && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node) }, t.prototype.onEndContact = function (e, t, o) { var n = this; "deads" == t.node.group && -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1), this.isTween || (this.isTween = !0, cc.tween(this.node).to(.1, { scale: 1.2 }).to(.1, { scale: 1 }).call(function () { n.isTween = !1 }).start()) }, t.prototype.update = function () { var e = this; this.targetlist.length > 0 && this.targetlist.forEach(function (t) { e.getHeadToGround(t) }) }, r([s], t.prototype, "force", void 0), r([s], t.prototype, "dirX", void 0), r([s], t.prototype, "dirY", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], KatannaCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "adea05x3kBEN4vJgInryXMb", "KatannaCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.nd1 = this.node.getChildByName("1"), this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.changeSkill() }, t.prototype.ChangeAc = function (e) { this.node.scaleX = e ? -1 : 1 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber && null == this.fly) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, e).getChildByName("body").getComponent("BulletBase"); t._init(this.node.group, this.node, this.human), t.setVec(e), this.nd1.color = cc.Color.WHITE, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.changeSkill = function () { this.SkillNumber = 0, this.nd1.color = c.weaponColors.blue.colors }, t.prototype.skillEnds = function () { }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; p.effectManager.playSwordAce("StickMan1" == this.human.name ? p.EffectType.bigSkillSwordAce : p.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, s.audioManager.playEffect("sword2"); var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1 }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], KnifeCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "4d8fd1L3gdHDLsJjLCSkjM7", "KnifeCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._flyV2 = null, t.nextVec = 0, t.invtNumber = 0, t.AtkFrequency = 0, t.states = 1, t.nd0 = null, t.polygonCollider = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.invtNumber = 5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.nd0 = this.node.getChildByName("0"), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.states = 1, this.attackProgress = 1 }, t.prototype.MotionStrakAtk = function (e) { if (null == this.fly && this.invtNumber >= 5) { this.invtNumber = 0; var t = 5e4; 1 == this.states ? this.nextVec = 0 : 2 == this.states && (this.nextVec = 0, t = 1e5), this.polygonCollider.density = 20, this.polygonCollider.apply(), this.nd0.active = !0, this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(t), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly ? (this.nextVec += e, 1 == this.states ? this.nextVec >= .5 && (this.states = 2, this.nextVec = 1, this.fly = null, this.invtNumber = 5, this.attackProgress = 1, this.nd0.active = !1, this.polygonCollider.density = .05, this.polygonCollider.apply()) : 2 == this.states && this.nextVec >= 1 && (this.states = 0, this.nextVec = 0, this.fly = null, this.invtNumber = 0, this.nd0.active = !1, this.polygonCollider.density = .05, this.polygonCollider.apply())) : 0 == this.states && (this.invtNumber >= this.skillInverter ? (this.states = 1, this.nextVec = 0, this.fly = null, this.nd0.active = !1, this.invtNumber = 5, this.attackProgress = 1) : (this.invtNumber += e, this.attackProgress = this.invtNumber / this.skillInverter)) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], LaceSpearCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "fdfbcBvUOdNsZyrPvgWUtb/", "LaceSpearCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t.runTimer = 0, t.skillState = 0, t._handBody = null, t._forces = 0, t.nd1 = null, t.polygonCollider = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this._forces = 0, this.runTimer = 0, this.skillState = 0, this.effinvertal = .5, this.fly = null, this.betweenDis = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("body").getComponent(cc.RigidBody), this._handBody = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.nd1 = this.node.getChildByName("1"), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint), this.nd1.active = !0, "weapons1" == this.node.group ? this.nd1.color = s.weaponColors.blue.colors : this.nd1.color = s.weaponColors.yellow.colors, this.skillTimer = 2, this.skillState = 1, this.SkillNumber = 0 }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.MotionStrakAtk = function (e) { var t = this; null == this.fly && null != this.SkillNumber && (this.nd1.color = cc.Color.WHITE, this.skillTimer = 0, this._forces = 100, this.attackProgress = 0, 1 == this.skillState ? this.runTimer = 3 : 2 == this.skillState && (this.runTimer = 2, this._forces = 200), this._handBody.applyLinearImpulse(e.mul(this._forces), this._handBody.getWorldCenter(), !0), cc.tween(this.node).delay(1 / 60).call(function () { t.polygonCollider.sensor = !0, t.polygonCollider.apply(), t.revoluteJoint.enabled = !1; var e = t.human.getChildByName("handR").angle - 90, o = t.getRadianByAngle(e % 360), n = cc.v2(Math.cos(o), Math.sin(o)).normalize(); t._rigidBody.fixedRotation = !0, t._handBody.fixedRotation = !0, t._flyV2 = n.normalize(), t._rigidBody.linearVelocity = cc.Vec2.ZERO, t._rigidBody.angularVelocity = 0, t._rigidBody.applyLinearImpulse(t._flyV2.mul(t._forces), t._rigidBody.getWorldCenter(), !0), t.fly = !0 }).union().start()) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= .1 && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.points[0] && t.normal && t.points ? o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0) : null != this._flyV2 && o.applyLinearImpulse(this._flyV2.mul(2e4), o.getWorldCenter(), !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5 && (l.audioManager.playEffect("sword2"), this.effinvertal = 0, t.points[0])) { var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.lateUpdate = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < .2 && (this.AtkFrequency += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 4, this.skillTimer >= 4 && (this.skillTimer = 0, this.SkillNumber = 0, this.skillState = 1, this.attackProgress = 1, "weapons1" == this.node.group ? this.nd1.color = s.weaponColors.blue.colors : this.nd1.color = s.weaponColors.yellow.colors)) : this.attackProgress = 1, null == this.fly && 1 == this.skillState && (this.skillTimer += e, this.skillTimer >= 4 && (this.skillTimer = 0, this.skillState = 2, "weapons1" == this.node.group ? this.nd1.color = s.weaponColors.blue.colors : this.nd1.color = s.weaponColors.yellow.colors)), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._handBody.getWorldPosition(t), this._rigidBody.getWorldPosition(o); var n = t.sub(o); this._rigidBody.applyForceToCenter(n, !0), this.betweenDis = cc.Vec2.distance(t, o), this.fly ? this._flyV2.x > 0 ? this._rigidBody.linearVelocity.x < 0 && (this.fly = !1) : this._rigidBody.linearVelocity.x > 0 && (this.fly = !1) : this.betweenDis <= 150 && (this.revoluteJoint.enabled = !0, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.runTimer--, 0 == this.runTimer ? (this.revoluteJoint.enabled = !0, this.SkillNumber = null, this.skillTimer = 0, this.betweenDis = 0, this.fly = null, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.fixedRotation = !1, this._handBody.fixedRotation = !1, this._forces = 0, this.polygonCollider.sensor = !1, this.polygonCollider.apply()) : (this.betweenDis = 0, this.revoluteJoint.enabled = !1, this._rigidBody.applyLinearImpulse(this._flyV2.mul(this._forces), this._rigidBody.getWorldCenter(), !0))) } }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], LampCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "5972asQF7pAKKOjcvbTNAXg", "LampCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Bullet/LampGreen"), l = e("../Controller/HumanController"), s = e("../Factory/BulletFactory"), c = e("../Manager/AudioManager"), p = e("../Manager/ConfigManager"), u = e("../Manager/EffectManager"), d = e("./Weapon"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.lampGreen = null, t.nd1 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.lampGreen = this.node.getChildByName("lampGreen"), this.nd1 = this.node.getChildByName("1"), this.AtkFrequency = 0, this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); if (this.SkillNumber = e <= .3 ? 0 : e > .3 && e <= .6 ? 1 : 2, this.lampGreen.active) { var t = Math.random(); this.SkillNumber = t <= .5 ? 0 : 2 } this.nd1.active = !0, this.nd1.opacity = 255, 0 == this.SkillNumber ? this.nd1.color = p.weaponColors.red.colors : 1 == this.SkillNumber ? this.nd1.color = p.weaponColors.green.colors : this.nd1.color = p.weaponColors.purple.colors }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) this.nd1.color = cc.Color.WHITE, this.nd1.opacity = 120, (t = s.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(this.node.group, null, this.human), t.setVec(e); else if (1 == this.SkillNumber) this.nd1.color = cc.Color.WHITE, this.nd1.opacity = 120, this.lampGreen.setPosition(cc.Vec2.ZERO), this.lampGreen.active = !0, this.lampGreen.getComponent(a.default)._init(this.node); else { this.nd1.color = cc.Color.WHITE, this.nd1.opacity = 120; var t, o = "rebound1"; "weapons2" == this.node.group && (o = "rebound2"), (t = s.bulletFactory.getBullet(this.bulletType[2], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(o, null, this.human), t.setVec(e) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = s.bulletFactory.getBullet(this.bulletType[0], this.nd1, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= .2 && (this.AtkFrequency = 0, e.parent.getComponent(l.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, c.audioManager.playEffect("sword2"); var o = u.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); u.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; p.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < .3 && (this.AtkFrequency += e) }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Bullet/LampGreen": "LampGreen", "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], LampGreen: [function (e, t, o) { "use strict"; cc._RF.push(t, "1af5dhygx5LEL9v9f+o/DDm", "LampGreen"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.user = null, t._fly = null, t._flyTimer = 0, t } return i(t, e), t.prototype._init = function (e) { this._fly = !0, this._flyTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = e, this._target = this.user.getComponent(cc.RigidBody) }, t.prototype.onBeginContact = function (e, t, o) { if (o.node && o.node.parent && o.node.parent.getComponent(a.default)) { var n = o.node.getComponent(cc.RigidBody), i = n.node.parent.convertToWorldSpaceAR(n.node.getPosition()), r = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()).sub(i); n.applyLinearImpulse(r.normalize().mul(3e3), n.getWorldCenter(), !0) } }, t.prototype.update = function (e) { null != this._fly && (this._flyTimer += e, this._flyTimer >= 4 && (this._fly = null, this._flyTimer = 0, this.node.active = !1)) }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../Controller/HumanController": "HumanController" }], LampPurple: [function (e, t, o) { "use strict"; cc._RF.push(t, "e84b02+rdlOCoDKxtMim0Xs", "LampPurple"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Factory/BulletFactory"), l = e("../Manager/WeaponManager"), s = e("./BulletBase"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isboom = !1, t.isrunTimer = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this.isrunTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.PhysicsCircleCollider).sensor = !1, this.node.getComponent(cc.PhysicsCircleCollider).apply(), this.node.children[0].active = !0, this.node.children[1].active = !0, this.damageInverter = 0, this.targetEnemy = t }, t.prototype.setVec = function (e) { null == this.fly && (this.isboom = !1, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(1200), this.fly = !0) }, t.prototype.onBeginContact = function (e, t) { this.isboom || ("rebound1" == t.node.group ? this.addWall() : "rebound2" == t.node.group && this.addWall()) }, t.prototype.start = function () { }, t.prototype.addWall = function () { this.isboom = !0, this.node.getComponent(cc.PhysicsCircleCollider).sensor = !1, this.node.getComponent(cc.PhysicsCircleCollider).apply(), this.node.children[0].active = !1, this.node.children[1].active = !1; var e = a.bulletFactory.getBullet(l.BulletType.lampWall, this.node, this.checkNames, cc.v2(0, 0)); e.getComponent("BulletBase")._init(this.node.group, this.node, this.user), e.getComponent("BulletBase").setVec(this._flyV2), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0 }, t.prototype.update = function (e) { this.node.isValid && null != this.fly && (this.activeTimer += e, this.activeTimer >= 7 && !this.isboom && (this.fly = null, this.activeTimer = 0, a.bulletFactory.putBullet(l.BulletType.lampPurple, this.node)), this.isboom && (this.isrunTimer += e, this.isrunTimer >= 2 && (this.fly = null, this.activeTimer = 0, this.node && this.node.isValid && a.bulletFactory.putBullet(l.BulletType.lampPurple, this.node)))) }, r([p], t) }(s.default)); o.default = u, cc._RF.pop() }, { "../Factory/BulletFactory": "BulletFactory", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], LampRed: [function (e, t, o) { "use strict"; cc._RF.push(t, "a04cfHFdeRAEolPgPJlE7aI", "LampRed"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.PhysicsCircleCollider).apply(), this.damageInverter = 0, this.targetEnemy = t }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(1200), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) { if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(cc.Vec2.UP.mul(3e4), n.getWorldCenter(), !0)) } } else "player2" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(cc.Vec2.UP.mul(3e4), n.getWorldCenter(), !0))); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(cc.Vec2.UP.mul(3e4), n.getWorldCenter(), !0))) : "player1" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(cc.Vec2.UP.mul(3e4), n.getWorldCenter(), !0)))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.activeTimer += e, this.activeTimer >= 7 && (this.fly = null, this.activeTimer = 0, l.bulletFactory.putBullet(c.BulletType.lampRed, this.node)) } }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], LampWall: [function (e, t, o) { "use strict"; cc._RF.push(t, "eddc7wD/JhGpbiLrjfGlhuk", "LampWall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("./BulletBase"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t.fireTimer = 0, t._groups = null, t.overTimer = 0, t._pos = null, t.polygonCollider = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.fireTimer = 2, this._rigidBody = this.node.getComponent(cc.RigidBody), this._groups = "box", this.node.group = e, this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.polygonCollider.sensor = !0, this.polygonCollider.apply(), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = .5, this._pos = cc.v2(0, 0), t.getComponent(cc.RigidBody).getWorldPosition(this._pos) }, t.prototype.setVec = function () { null == this.fly && (this.overTimer = 0, this.fireTimer = 8, this.damageInverter = .5, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.betweenDis = 0, this._rigidBody.applyForceToCenter(cc.Vec2.UP.neg().mul(600 * this._rigidBody.getMass()), !0), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if (o.node.parent.getComponent(a.default)) { if ((p = e.getWorldManifold()).points[0]) { var n = o.node.getComponent(cc.RigidBody), i = t.node.getComponent(cc.RigidBody), r = cc.v2(0, 0), l = cc.v2(0, 0); i.getLinearVelocityFromWorldPoint(p.points[0], r), n.getLinearVelocityFromWorldPoint(p.points[0], l); var s = r.sub(l), c = l.sub(r); n.applyLinearImpulse(s.normalize().mul(500 * n.getMass()), n.getWorldCenter(), !0), i.applyLinearImpulse(c.normalize().mul(500 * n.getMass()), i.getWorldCenter(), !0) } } else { var p, u = o.node.group; "ground" != u && "water" != u && "default" != u && ("rebound1" == this.node.group && "weapons1" != u && "player1" != u ? this.node.group != this._groups && (this.node.group = this._groups, this.polygonCollider.sensor = !1, this.polygonCollider.apply(), this.betweenDis = 0) : "rebound2" == this.node.group && "weapons2" != u && "player2" != u && this.node.group != this._groups && (this.node.group = this._groups, this.polygonCollider.sensor = !1, this.polygonCollider.apply(), this.betweenDis = 0), (p = e.getWorldManifold()).points[0] && (n = o.node.getComponent(cc.RigidBody), i = t.node.getComponent(cc.RigidBody), r = cc.v2(0, 0), l = cc.v2(0, 0), i.getLinearVelocityFromWorldPoint(p.points[0], r), n.getLinearVelocityFromWorldPoint(p.points[0], l), s = r.sub(l), c = l.sub(r), n.applyLinearImpulse(s.normalize().mul(500 * n.getMass()), n.getWorldCenter(), !0), i.applyLinearImpulse(c.normalize().mul(500 * n.getMass()), i.getWorldCenter(), !0))) } }, t.prototype.update = function (e) { if (this.node.isValid && null != this.fly) { if (this.fireTimer -= e, this.overTimer += e, this.overTimer >= 2 && this.polygonCollider.sensor && (this.overTimer = 0, this.polygonCollider.sensor = !1, this.polygonCollider.apply()), this.node.group != this._groups && (this._rigidBody.applyForceToCenter(cc.Vec2.UP.neg().mul(600 * this._rigidBody.getMass()), !0), null != this._pos)) { var t = cc.v2(0, 0); this._rigidBody.getWorldPosition(t), this.betweenDis = cc.Vec2.distance(this._pos, t), this.betweenDis <= 100 && (this.node.group = this._groups, this.polygonCollider.sensor = !1, this.polygonCollider.apply(), this.betweenDis = 0) } this.fireTimer <= 0 && (this.fly = null, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.fireTimer = 5, this.node.destroy()) } }, r([c], t) }(l.default)); o.default = p, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "./BulletBase": "BulletBase" }], LeaderboardItem: [function (e, t, o) { "use strict"; cc._RF.push(t, "eaa37TldjxCUKzqwjdUaqDO", "LeaderboardItem"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.rankLabel = null, t.nameLabel = null, t.ratingLabel = null, t } return i(t, e), t.prototype.setData = function (e, t, o, n) { this.rankLabel && (this.rankLabel.string = e > 0 ? "#" + e : ""), this.nameLabel && (this.nameLabel.string = t), this.ratingLabel && (this.ratingLabel.string = o >= 0 ? "" + o : ""), n ? (this.rankLabel && (this.rankLabel.node.color = new cc.Color(255, 255, 100)), this.nameLabel && (this.nameLabel.node.color = new cc.Color(255, 255, 100)), this.ratingLabel && (this.ratingLabel.node.color = new cc.Color(255, 255, 100))) : 1 === e ? this.rankLabel && (this.rankLabel.node.color = new cc.Color(255, 215, 0)) : 2 === e ? this.rankLabel && (this.rankLabel.node.color = new cc.Color(192, 192, 192)) : 3 === e && this.rankLabel && (this.rankLabel.node.color = new cc.Color(205, 127, 50)) }, r([s(cc.Label)], t.prototype, "rankLabel", void 0), r([s(cc.Label)], t.prototype, "nameLabel", void 0), r([s(cc.Label)], t.prototype, "ratingLabel", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], LeaderboardManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "fbf0dMQSn5O0JTUO6FpqpR5", "LeaderboardManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.leaderboardManager = o.LeaderboardManager = void 0; var i = e("./UserProfile"), r = e("./localConfig"), a = cc._decorator.ccclass, l = function () { function e() { this.leaderboardData = [], this.initialized = !1 } return e.prototype.load = function () { if (!this.initialized) { var e = r.localConfig.instance.getTableArr("leaders"); e && e.length > 0 ? (this.leaderboardData = e, this.initialized = !0) : console.error("Failed to load leaderboard data from CSV") } }, e.prototype.addRating = function (e) { i.userProfile.data.rating += e, i.userProfile.save() }, e.prototype.getPlayerRank = function () { var e = i.userProfile.data.rating || 0; return Math.floor((5e3 - e) / 10) }, e.prototype.getPlayerEntry = function () { return { rank: this.getPlayerRank(), name: i.userProfile.data.playerName, rating: i.userProfile.data.rating || 0, isPlayer: !0 } }, e.prototype.getEntryByRank = function (e) { this.initialized || this.load(); var t = r.localConfig.instance.queryByID("leaders", e.toString()); return t ? { rank: parseInt(t.ID), name: t.nick, rating: parseInt(t.rating), isPlayer: !1 } : null }, e.prototype.getVisibleEntries = function () { this.initialized || this.load(); var e = this.getPlayerRank(), t = this.getPlayerEntry(), o = this.leaderboardData.length, n = [], i = new Set; if (e <= 10) for (var r = 1; r <= 10; r++)(l = this.getEntryByRank(r)) && (r === e ? n.push(t) : n.push(l), i.add(r)); else if (e >= o - 10) { for (r = 1; r <= 5; r++)(l = this.getEntryByRank(r)) && (n.push(l), i.add(r)); for (n.push({ rank: -1, name: "...", rating: -1, isPlayer: !1 }), r = o - 9; r <= o; r++)(l = this.getEntryByRank(r)) && (r === e ? n.push(t) : n.push(l), i.add(r)) } else { for (r = 1; r <= 5; r++)(l = this.getEntryByRank(r)) && (n.push(l), i.add(r)); for (n.push({ rank: -1, name: "...", rating: -1, isPlayer: !1 }), r = Math.max(6, e - 5); r < e; r++)i.has(r) || (l = this.getEntryByRank(r)) && (n.push(l), i.add(r)); n.push(t), i.add(e); var a = Math.min(o, e + 5); for (r = e + 1; r <= a; r++) { var l; (l = this.getEntryByRank(r)) && (n.push(l), i.add(r)) } } return n }, e.prototype.getTopEntries = function (e) { void 0 === e && (e = 10), this.initialized || this.load(); for (var t = [], o = 1; o <= Math.min(e, this.leaderboardData.length); o++) { var n = this.getEntryByRank(o); n && t.push(n) } return t }, n([a], e) }(); o.LeaderboardManager = l, o.leaderboardManager = new l, cc._RF.pop() }, { "./UserProfile": "UserProfile", "./localConfig": "localConfig" }], LeaderboardView: [function (e, t, o) { "use strict"; cc._RF.push(t, "38ce9et7aRH8pc0uuIcQbsW", "LeaderboardView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/LeaderboardManager"), l = e("../Manager/AudioManager"), s = e("./LeaderboardItem"), c = cc._decorator, p = c.ccclass, u = c.property, d = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.contentNode = null, t.leaderboardItemPrefab = null, t.scrollView = null, t.step = 85, t } return i(t, e), t.prototype.start = function () { this.loadLeaderboard() }, t.prototype.loadLeaderboard = function () { var e = this; if (this.contentNode) { this.contentNode.removeAllChildren(); var t = a.leaderboardManager.getVisibleEntries(); this.contentNode.setContentSize(780, t.length * this.step + this.step / 2); for (var o = 0; o < t.length; o++) { var n = t[o]; this.createLeaderboardItem(n, n.rank) } this.scheduleOnce(function () { e.scrollToPlayer(t) }, .1) } else console.error("Content node not set!") }, t.prototype.createLeaderboardItem = function (e, t) { var o, n, i, r; if (-1 !== t) if (this.leaderboardItemPrefab) { (r = cc.instantiate(this.leaderboardItemPrefab)).parent = this.contentNode; var a = r.getComponent(s.default); if (a) a.setData(t, e.name, e.rating, e.isPlayer); else { var l = null === (o = r.getChildByName("rank")) || void 0 === o ? void 0 : o.getComponent(cc.Label), c = null === (n = r.getChildByName("name")) || void 0 === n ? void 0 : n.getComponent(cc.Label), p = null === (i = r.getChildByName("rating")) || void 0 === i ? void 0 : i.getComponent(cc.Label); if (l && (l.string = t > 0 ? "#" + t : ""), c && (c.string = e.name), p && (p.string = e.rating >= 0 ? "" + e.rating : ""), e.isPlayer) { var u = r.getChildByName("bg"); u && (u.color = new cc.Color(100, 200, 100)), l && (l.node.color = new cc.Color(255, 255, 100)), c && (c.node.color = new cc.Color(255, 255, 100)), p && (p.node.color = new cc.Color(255, 255, 100)) } } } else (r = this.createSimpleItem(e, t)).parent = this.contentNode; else (r = this.createSeparatorItem()).parent = this.contentNode }, t.prototype.createSimpleItem = function (e, t) { var o = new cc.Node("LeaderboardItem"); o.setContentSize(700, 60); var n = new cc.Node("bg"); n.parent = o, n.addComponent(cc.Sprite).type = cc.Sprite.Type.SLICED, n.setContentSize(700, 60), n.color = e.isPlayer ? new cc.Color(100, 200, 100) : new cc.Color(50, 50, 50); var i = new cc.Node("rank"); i.parent = o, i.setPosition(-300, 0); var r = i.addComponent(cc.Label); r.string = "#" + t, r.fontSize = 28, r.horizontalAlign = cc.Label.HorizontalAlign.LEFT; var a = new cc.Node("name"); a.parent = o, a.setPosition(-100, 0); var l = a.addComponent(cc.Label); l.string = e.name, l.fontSize = 26, l.horizontalAlign = cc.Label.HorizontalAlign.CENTER, l.overflow = cc.Label.Overflow.CLAMP, a.setContentSize(300, 50); var s = new cc.Node("rating"); s.parent = o, s.setPosition(250, 0); var c = s.addComponent(cc.Label); return c.string = "" + e.rating, c.fontSize = 28, c.horizontalAlign = cc.Label.HorizontalAlign.RIGHT, o }, t.prototype.scrollToPlayer = function (e) { if (this.scrollView && this.contentNode) { var t = e.findIndex(function (e) { return e.isPlayer }); if (-1 !== t && t > 5) { var o = 65 * t, n = this.contentNode.height, i = this.scrollView.node.height, r = Math.max(0, n - i), a = Math.min(1, o / r); this.scrollView.scrollToPercentVertical(1 - a, .5) } } }, t.prototype.closeView = function () { l.audioManager.playEffect("click"), this.node.destroy() }, t.prototype.createSeparatorItem = function () { var e = new cc.Node("Separator"); e.setContentSize(700, 40); var t = e.addComponent(cc.Label); return t.string = "...", t.fontSize = 32, t.horizontalAlign = cc.Label.HorizontalAlign.CENTER, t.verticalAlign = cc.Label.VerticalAlign.CENTER, t.node.color = new cc.Color(150, 150, 150), e }, r([u(cc.Node)], t.prototype, "contentNode", void 0), r([u(cc.Prefab)], t.prototype, "leaderboardItemPrefab", void 0), r([u(cc.ScrollView)], t.prototype, "scrollView", void 0), r([p], t) }(cc.Component); o.default = d, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/LeaderboardManager": "LeaderboardManager", "./LeaderboardItem": "LeaderboardItem" }], LevelManager: [function (e, t, o) { "use strict"; var n; cc._RF.push(t, "a38dbNEvU9BwrwJXYJa7mX4", "LevelManager"), Object.defineProperty(o, "__esModule", { value: !0 }), o.levelConfig = void 0, o.levelConfig = ((n = {})[0] = { map: "S1", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 6, maxEnemies: 3 }, n[1] = { map: "S2", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 6, maxEnemies: 3 }, n[2] = { map: "S3", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[3] = { map: "S4", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[4] = { map: "S5", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[5] = { map: "S6", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[6] = { map: "S7", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[7] = { map: "S8", suverEnemiesNum: 3, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[8] = { map: "S9", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[9] = { map: "S10", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 7, maxEnemies: 3 }, n[10] = { map: "S11", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 6, maxEnemies: 3 }, n[11] = { map: "S12", suverEnemiesNum: 3, enemyHp: 22, enemyAtk: 8, maxEnemies: 3 }, n[12] = { map: "S13", suverEnemiesNum: 4, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[13] = { map: "S14", suverEnemiesNum: 4, enemyHp: 20, enemyAtk: 6, maxEnemies: 3 }, n[14] = { map: "S15", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[15] = { map: "S16", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[16] = { map: "S17", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[17] = { map: "S18", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[18] = { map: "S19", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[19] = { map: "S20", suverEnemiesNum: 5, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[20] = { map: "S21", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n[21] = { map: "S22", suverEnemiesNum: 3, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[22] = { map: "S23", suverEnemiesNum: 6, enemyHp: 25, enemyAtk: 9, maxEnemies: 4 }, n[23] = { map: "S24", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n[24] = { map: "S25", suverEnemiesNum: 3, enemyHp: 25, enemyAtk: 8, maxEnemies: 3 }, n[25] = { map: "S26", suverEnemiesNum: 6, enemyHp: 25, enemyAtk: 9, maxEnemies: 4 }, n[26] = { map: "S27", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n[27] = { map: "S28", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n[28] = { map: "S29", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n[29] = { map: "S30", suverEnemiesNum: 6, enemyHp: 30, enemyAtk: 9, maxEnemies: 4 }, n), cc._RF.pop() }, {}], LevelProgress: [function (e, t, o) { "use strict"; cc._RF.push(t, "d99ebEROM9OLIKuIez4mz2l", "LevelProgress"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/UserProfile"), l = cc._decorator, s = l.ccclass, c = l.property, p = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.spGoalDark = null, t.spGoalCur = null, t.spGoalPass = null, t.aryGoalLvls = [], t.keyIcon = null, t } return i(t, e), t.prototype.start = function () { this.checkGoal() }, t.prototype.checkGoal = function () { var e = a.userProfile.data, t = e.level + 1, o = t % 6; 0 == o && (o = 6), e.level >= 6 ? (this.keyIcon.active = !0, this.aryGoalLvls[2].getComponentInChildren(cc.Label).node.active = !1) : (this.keyIcon.active = !1, this.aryGoalLvls[2].getComponentInChildren(cc.Label).node.active = !0), o--; for (var n = 0; n < this.aryGoalLvls.length; n++)n < o ? (this.aryGoalLvls[n].getComponent(cc.Sprite).spriteFrame = this.spGoalPass, this.aryGoalLvls[n].getComponentInChildren(cc.Label).node.color = new cc.Color(22, 53, 122, 255)) : n == o ? (this.aryGoalLvls[n].getComponent(cc.Sprite).spriteFrame = this.spGoalCur, this.aryGoalLvls[n].getComponentInChildren(cc.Label).node.color = cc.Color.WHITE) : (this.aryGoalLvls[n].getComponent(cc.Sprite).spriteFrame = this.spGoalDark, this.aryGoalLvls[n].getComponentInChildren(cc.Label).node.color = new cc.Color(74, 96, 111, 255)), this.aryGoalLvls[n].getComponentInChildren(cc.Label).string = (t - o + n).toString() }, r([c(cc.SpriteFrame)], t.prototype, "spGoalDark", void 0), r([c(cc.SpriteFrame)], t.prototype, "spGoalCur", void 0), r([c(cc.SpriteFrame)], t.prototype, "spGoalPass", void 0), r([c([cc.Node])], t.prototype, "aryGoalLvls", void 0), r([c(cc.Node)], t.prototype, "keyIcon", void 0), r([s], t) }(cc.Component); o.default = p, cc._RF.pop() }, { "../Manager/UserProfile": "UserProfile" }], LineWidth: [function (e, t, o) { "use strict"; cc._RF.push(t, "43c8byIaZBGmbcZCzFdwIwm", "LineWidth"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.ptr = null, t.target = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.getAngle = function (e) { return Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI) }, t.prototype.lateUpdate = function () { if (null != this.target) { var e = cc.v2(0, 0), t = cc.v2(0, 0); this.ptr.getComponent(cc.RigidBody).getWorldPosition(e), this.target.getComponent(cc.RigidBody).getWorldPosition(t); var o = e.sub(t), n = this.getAngle(o); this.node.angle = n - this.ptr.angle, this.node.width = o.len() / .35 } }, r([s(cc.Node)], t.prototype, "ptr", void 0), r([s(cc.Node)], t.prototype, "target", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], LinghtsaberCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "b5981iEtD9I1KGm2VYgrYN5", "LinghtsaberCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Weapons/Weapon"), s = e("../Factory/BulletFactory"), c = e("../Manager/AudioManager"), p = e("../Manager/ConfigManager"), u = e("../Manager/EffectManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t.isCheck = !1, t.isCheckTimers = 0, t.boxCollider = null, t.ropeJoint = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.isCheck = null, this.isCheckTimers = 0, this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0; var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.boxCollider = this.node.getComponent(cc.PhysicsBoxCollider), this.ropeJoint = this.node.getComponent(cc.RopeJoint), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint) }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) null == this.fly && (this.revoluteJoint.enabled = !1, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.boxCollider.density = 1, this.boxCollider.apply(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(12e3), this._rigidBody.getWorldCenter(), !0), this.isCheck = null, this.isCheckTimers = 0, this.fly = !0); else if (1 == this.SkillNumber) { var t = s.bulletFactory.getBullet(this.bulletType[this.SkillNumber], this.node, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); t._init(this.node.group), t.setVec(e) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; u.effectManager.playSwordAce("StickMan1" == this.human.name ? u.EffectType.bigSkillSwordAce : u.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.someConnectBodys = function (e) { null == this.isCheck && (this.isCheck = !0, this._rigidBody.fixedRotation = !0, this.ropeJoint.enabled = !0, this.ropeJoint.connectedBody = e.getComponent(cc.RigidBody), this.ropeJoint.apply()) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, this.fly && this.someConnectBodys(e), t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(4e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, c.audioManager.playEffect("sword2"); var o = u.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); u.effectManager.playEffect(o, n), t.normal && t.points[0] && e.getComponent(cc.RigidBody).applyLinearImpulse(t.normal.mul(1e4), t.points[0], !0) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; p.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.lateUpdate = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber) { if (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter) { this.skillTimer = 0; var t = Math.random(); this.SkillNumber = t <= .5 ? 0 : 1, this.attackProgress = 1 } } else this.attackProgress = 1; if (this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { var o = cc.Vec2.ZERO, n = cc.Vec2.ZERO; this._target.getWorldPosition(o), this._rigidBody.getWorldPosition(n), this._rigidBody.applyTorque(4e3, !0), this._rigidBody.angularVelocity <= -1e3 && (this._rigidBody.angularVelocity = -1e3), this._rigidBody.angularVelocity >= 1e3 && (this._rigidBody.angularVelocity = 1e3); var i = o.sub(n), r = 15; if (this.isCheck && (r = 100), this._rigidBody.applyForceToCenter(i.mul(r), !0), this.betweenDis = cc.Vec2.distance(o, n), this.fly) this._flyV2.x > 0 ? this._rigidBody.linearVelocity.x < 0 && (this.fly = !1) : this._rigidBody.linearVelocity.x > 0 && (this.fly = !1); else { var a = this._rigidBody.linearVelocity, l = a.normalize(), s = a.x / l.x, c = a.y / l.y, p = cc.v2(i.normalize().x * s, i.normalize().y * c); this._rigidBody.linearVelocity = p, this.betweenDis <= 300 && (this.fly = null, this.revoluteJoint.enabled = !0, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.boxCollider.density = .05, this.boxCollider.apply(), 1 == this.isCheck && (this.isCheck = null, this.isCheckTimers = 0, this._rigidBody.fixedRotation = !1, this.ropeJoint.enabled = !1, this.ropeJoint.connectedBody = null, this.ropeJoint.apply()), this.isCheck = null) } } 1 == this.isCheck && (this.isCheckTimers += e, this.isCheckTimers >= .3 && (this.isCheck = !1, this.isCheckTimers = 0, this._rigidBody.fixedRotation = !1, this.ropeJoint.enabled = !1, this.ropeJoint.connectedBody = null, this.ropeJoint.apply())) }, r([h], t) }(l.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Weapons/Weapon": "Weapon" }], Load: [function (e, t, o) { "use strict"; cc._RF.push(t, "02715oq+jhBIaTuCq/MlqCM", "Load"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/AudioManager"), l = e("../Manager/UserProfile"), s = e("../Manager/ConfigManager"), c = e("../Factory/HumanFactory"), p = e("../Factory/BulletFactory"), u = e("../Manager/EffectManager"), d = e("../Manager/localConfig"), h = cc._decorator, g = h.ccclass, f = (h.property, ["mainScenes", "UI", "efffect", "prefabs", "res", "Map"]), y = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._totalLoadSteps = 0, t._completedLoadSteps = 0, t } return i(t, e), t.prototype.onLoad = function () { cc.game.setFrameRate(59.9), this.getLang(), s.gameConfig.isMobile = this.isMobile(), l.userProfile.load(), d.localConfig.instance.loadConfig(function () { }), l.userProfile.data.skinsUnLock.Skin_43 && (l.userProfile.data.skinsUnLock.Skin_43 = !1), l.userProfile.data.skinsUnLock.Skin_44 && (l.userProfile.data.skinsUnLock.Skin_44 = !1), l.userProfile.data.skinsUnLock.Skin_45 && (l.userProfile.data.skinsUnLock.Skin_45 = !1), "Skin_43" != l.userProfile.data.skins1 && "Skin_44" != l.userProfile.data.skins1 && "Skin_45" != l.userProfile.data.skins1 || (l.userProfile.data.skins1 = null), "Skin_43" != l.userProfile.data.skins2 && "Skin_44" != l.userProfile.data.skins2 && "Skin_45" != l.userProfile.data.skins2 || (l.userProfile.data.skins2 = null), this.loadBundles() }, t.prototype.getLang = function () { var e = navigator.language.slice(0, 2);["en", "fr", "es", "de", "ru", "tr", "pt", "it"].includes(e) && (s.gameConfig.lang = e) }, t.prototype.loadBundles = function () { var e = this; this._totalLoadSteps = f.length + 7; var t = f.map(function (t) { return e.trackStep(e.loadBundle(t)) }); Promise.all(t).then(function () { e.initGame() }) }, t.prototype.iOS = function () { return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document }, t.prototype.isMobile = function () { return !(!cc.sys.isMobile && !this.iOS() && cc.sys.platform.toString() != cc.sys.OS_IOS) }, t.prototype.initGame = function () { var e = this, t = [this.trackStep(a.audioManager.preloadMenuMusic()), this.trackStep(a.audioManager.preloadAudioClip()), this.trackStep(this.loadSkins()), this.trackStep(c.humanFactory.Init()), this.trackStep(p.bulletFactory.Init()), this.trackStep(this.preloadMain()), this.trackStep(u.effectManager.Init())]; Promise.all(t).then(function () { e.reportSplashProgress(!0), cc.director.loadScene("main") }).catch(function (e) { console.error("Error:", e) }) }, t.prototype.preloadMain = function () { return new Promise(function (e) { cc.director.preloadScene("main", function () { e(!0) }) }) }, t.prototype.trackStep = function (e) { var t = this; return e.then(function (e) { return t._completedLoadSteps++, t.reportSplashProgress(!1), e }) }, t.prototype.reportSplashProgress = function (e) { try { var t = window.__splashControl; if (t && "function" == typeof t.setLoadProgress) { var o = e ? 1 : this._totalLoadSteps > 0 ? this._completedLoadSteps / this._totalLoadSteps : 0; t.setLoadProgress(o) } } catch (n) { } }, t.prototype.loadSkins = function () { var e = cc.assetManager.getBundle("UI"); return new Promise(function (t) { e.load("newSkins/texture", cc.SpriteAtlas, function (e, o) { e ? console.error(e) : (console.log("Bundle loaded: Skins"), s.gameConfig.AllSkins = o, o.addRef(), t(!0)) }) }) }, t.prototype.loadBundle = function (e) { return new Promise(function (t, o) { cc.assetManager.loadBundle(e, null, function (n, i) { if (n) return cc.error("Error loading bundle:", n), void o(n); t(i), console.log("Bundle loaded:", e) }) }) }, r([g], t) }(cc.Component); o.default = y, cc._RF.pop() }, { "../Factory/BulletFactory": "BulletFactory", "../Factory/HumanFactory": "HumanFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/UserProfile": "UserProfile", "../Manager/localConfig": "localConfig" }], Magnit: [function (e, t, o) { "use strict"; cc._RF.push(t, "13396MVRpNLibb2V4cj4/NK", "Magnit"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.reTeck = !1, t.isCannonFire = !1, t.firepoint = null, t.nd1 = null, t.rond = null, t.fireNd = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.isGun = !0, this.fly = null, this.fireInverter = 0, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.AtkFrequency = 0, this.isFire = !1, this.reTeck = !0, this.firepoint = this.node.getChildByName("firepoint"), this.nd1 = this.node.getChildByName("1"), this.rond = this.node.getChildByName("rond"), this.fireNd = this.node.getChildByName("fire"), this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.nd1.active = !0, this.nd1.color = s.weaponColors.green.colors }, t.prototype.setLimit = function (e) { this.isFire = !0, e && (this._flyV2 = e) }, t.prototype.MotionStrakAtk = function (e) { if (this.isFire = !1, null != this.SkillNumber) { if (0 == this.SkillNumber) this._flyV2 = e, this.isCannonFire = !0, this._target.fixedRotation = !0; else if (1 == this.SkillNumber) { this.nd1.active = !1; var t = e, o = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO), n = "bomb1"; "weapons2" == this.node.group && (n = "bomb2"); var i = o.getComponent("BulletBase"); i._init(n, this.targetEnemy, this.human), i.setVec(t) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype._fire = function () { var e = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO); if (e) { var t = e.getComponent("BulletBase"); t._init(this.node.group, null, this.human, null, !0), t.setVec(this._flyV2) } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human, null, !0), n.setVec(o) } }, t.prototype._fireCannon = function () { var e = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); e._init(this.node.group, null, this.human), e.setVec(this._flyV2), this._target.fixedRotation = !1 }, t.prototype.update = function (e) { var t = this; this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.fly = null, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), this.isFire && (this.fireInverter += e, this.fireInverter > 1.5 && (this.fireInverter = 0, this._fire())), this.isCannonFire && (this.isCannonFire = !1, cc.tween(this.rond).set({ scale: 0, active: !0 }).to(.5, { scale: 0 }).call(function () { t.nd1.active = !1, t.rond.active = !1, t.fireNd.active = !0, t.fireNd.getComponent(cc.ParticleSystem).resetSystem(), t._fireCannon() }).union().start()) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], MainCanvas: [function (e, t, o) { "use strict"; cc._RF.push(t, "242fcYW+S5BEKVjOw7kDWF5", "MainCanvas"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onLoad = function () { cc.director.getPhysicsManager().enabled = !0 }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], MainViewFight: [function (e, t, o) { "use strict"; cc._RF.push(t, "392775dyYRMJ4b5qihLX+TU", "MainViewFight"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/UserProfile"), s = e("../scenes/Games"), c = cc._decorator, p = c.ccclass, u = c.property, d = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.rondIn = null, t } return i(t, e), t.prototype.onLoad = function () { this.rondIn && (this.rondIn.active = !0) }, t.prototype.start = function () { var e = this, t = cc.assetManager.getBundle("prefabs"); 2 != a.gameConfig.gameChooseViewNumber || a.gameConfig.isPass2PlayersTutorial || a.gameConfig.isMobile ? 2 == a.gameConfig.gameChooseViewNumber || a.gameConfig.isPass1PlayerTutorial || a.gameConfig.isMobile || t.load("views/Tutorial1Player", cc.Prefab, function (t, o) { var n = cc.instantiate(o); n.parent = e.node, a.gameConfig.isPass1PlayerTutorial = !0, l.userProfile.save(), e.scheduleOnce(function () { n.active = !1 }, 8) }) : t.load("views/Tutorial2Players", cc.Prefab, function (t, o) { var n = cc.instantiate(o); n.parent = e.node, a.gameConfig.isPass2PlayersTutorial = !0, l.userProfile.save(), e.scheduleOnce(function () { n.active = !1 }, 8) }) }, t.prototype.StopGames = function () { this.node.parent.getComponent(s.default).StopGames() }, t.prototype.resumeGames = function () { this.node.parent.getComponent(s.default).resumeGames() }, t.prototype.closeGame = function () { this.node.parent.getComponent(s.default).closeGame() }, r([u({ type: cc.Node })], t.prototype, "rondIn", void 0), r([p], t) }(cc.Component); o.default = d, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../scenes/Games": "Games" }], MainView: [function (e, t, o) { "use strict"; cc._RF.push(t, "12a0d9hRQlKcoIOdyaP4pG3", "MainView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/AudioManager"), l = e("../Manager/UserProfile"), s = e("../Manager/ConfigManager"), c = e("../Manager/TipsManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.ChooseView = null, t.player2Node = null, t.player1LineNd = null, t } return i(t, e), t.prototype.onLoad = function () { if (s.gameConfig.isStartMusic && a.audioManager.playMusic("bgm", l.userProfile.data.audioNumber), c.tipsManager.createPool(), l.userProfile.save(), !s.gameConfig.isLoadingFinished) { try { var e = window.__splashControl; if (e && "function" == typeof e.hide) e.setLoadProgress(1), e.hide(); else { var t = document.getElementById("splash"); t && (t.style.display = "none") } } catch (o) { } void (0), s.gameConfig.isLoadingFinished = !0 } s.gameConfig.isMobile || (l.userProfile.data.playerJoy1 = s.JoyStickPos.Left, l.userProfile.save()), cc.winSize.width / cc.winSize.height < 1.65 && (this.ChooseView.scale = .8, this.player1LineNd.active = !1, cc.winSize.width / cc.winSize.height < 1.3 && (this.ChooseView.scale = .7)) }, t.prototype.start = function () { if ((3 != s.gameConfig.gameChooseViewNumber || l.userProfile.data.isPassTutorial) && (2 != s.gameConfig.gameChooseViewNumber || l.userProfile.data.isPass2PlayersTutorial) && 0 != s.gameConfig.gameChooseViewNumber) { var e = 2 == s.gameConfig.gameChooseViewNumber ? 2 : 1; this.ShowChooseView(null, e) } }, t.prototype.onBtnGameMode = function (e, t) { a.audioManager.playEffect("click"), this.ShowChooseView(null, t) }, t.prototype.ShowChooseView = function (e, t) { var o = parseInt(t); s.gameConfig.isStartMusic || (s.gameConfig.isStartMusic = !0, a.audioManager.playMusic("bgm", l.userProfile.data.audioNumber)), s.gameConfig.gameChooseViewNumber = o, l.userProfile.data.enemyName = "", l.userProfile.data.player1Count = 0, l.userProfile.data.player2Count = 0, l.userProfile.data.playerState1 = s.PlayerGameState.Player, 1 == s.gameConfig.gameChooseViewNumber ? (l.userProfile.data.playerState2 = s.PlayerGameState.AI, this.player2Node.active = !1) : 2 == s.gameConfig.gameChooseViewNumber && (l.userProfile.data.playerState2 = s.PlayerGameState.Player, this.player2Node.active = !0), this.ChooseView.active = 4 != o }, t.prototype.showAudioView = function () { a.audioManager.playEffect("click"), cc.assetManager.getBundle("prefabs").load("views/AudioView", cc.Prefab, function (e, t) { var o = cc.instantiate(t); o.parent = cc.find("Canvas"), o.active = !0, o.zIndex = 5 }) }, t.prototype.onDisable = function () { c.tipsManager.clearPool() }, r([d(cc.Node)], t.prototype, "ChooseView", void 0), r([d(cc.Node)], t.prototype, "player2Node", void 0), r([d(cc.Node)], t.prototype, "player1LineNd", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/TipsManager": "TipsManager", "../Manager/UserProfile": "UserProfile" }], NewWeaponsView: [function (e, t, o) { "use strict"; cc._RF.push(t, "a8427OL6jVKBrg8rWl499+i", "NewWeaponsView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/AudioManager"), l = e("../Manager/ConfigManager"), s = e("../Manager/localConfig"), c = e("../Manager/RewardManager"), p = e("../Manager/UserProfile"), u = e("../Manager/WeaponManager"), d = e("./ChooseView"), h = cc._decorator, g = h.ccclass, f = h.property, y = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.lightNode = null, t.lootboxNode = null, t.titleLabel = null, t.icon = null, t.icon2 = null, t.icon3 = null, t.iconFinalPositions = [], t.iconSpawnPositions = [], t.iconPeakPositions = [], t.iconWeaponBgNodes = [], t.iconWeaponBgInitialScales = [], t.activeIconSprites = [], t.selectedRewardIds = [], t.isWeaponReward = !1, t.dropStarted = !1, t.iconButtons = [], t.iconButtonHandlers = [], t.selectionFinalized = !1, t.titleInitialScale = 1, t.topInitialPos = null, t.bottomInitialPos = null, t } return i(t, e), t.prototype.start = function () { this.lightRun() }, t.prototype.onEnable = function () { var e = this, t = c.rewardConfig[p.userProfile.data.reward.toString()], o = [this.icon, this.icon2, this.icon3], n = Object.values(p.userProfile.data.weaponsUnLock).every(function (e) { return !0 === e }), i = Object.values(p.userProfile.data.skinsUnLock).every(function (e) { return !0 === e }); if (n && i) return p.userProfile.data.reward++, p.userProfile.save(), void this.onClose(); n && t.isWeapon ? t.isWeapon = !1 : i && !t.isWeapon && (t.isWeapon = !0), this.isWeaponReward = t.isWeapon; var r = o.length; if (this.selectedRewardIds = this.selectRandomRewards(this.isWeaponReward, r), this.activeIconSprites = o.slice(0, this.selectedRewardIds.length), this.iconButtons = new Array(this.activeIconSprites.length), this.activeIconSprites.forEach(function (t, o) { e.setupIconButton(t, o) }), this.titleLabel) { var a = this.isWeaponReward ? "newWeapon" : "newSkin", d = s.localConfig.instance.queryByID("locs", a); this.titleLabel.string = d[l.gameConfig.lang] } this.iconWeaponBgNodes = new Array(this.selectedRewardIds.length), this.iconWeaponBgInitialScales = new Array(this.selectedRewardIds.length), this.selectedRewardIds.forEach(function (t, o) { var n = e.activeIconSprites[o]; if (n) if (e.isWeaponReward) { e.loadWeapon(t, n.node); var i = u.weaponConfig["allBlue_" + t], r = s.localConfig.instance.queryByID("locs", i.prefabName); e.updateIconTitle(n, r[l.gameConfig.lang]); var a = n.node.getChildByName("weaponsbg"); (c = n.node.getChildByName("skin")).active = !1, (d = n.node.getChildByName("bg")).active = !1, a && (e.iconWeaponBgNodes[o] = a, e.iconWeaponBgInitialScales[o] = a.scale, a.active = !1, a.opacity = 0, a.scale = .85 * e.iconWeaponBgInitialScales[o]) } else { var c = n.node.getChildByName("skin"), d = n.node.getChildByName("bg"), h = new cc.Color; h._val = p.userProfile.data.Allcolor1._val, d.color = h; var g = "Skin_" + t; if (l.gameConfig.AllSkins) { var f = l.gameConfig.AllSkins.getSpriteFrame(g); f && (c.getComponent(cc.Sprite).spriteFrame = f) } e.updateIconTitle(n, g), (a = n.node.getChildByName("weaponsbg")) && (a.active = !1), e.iconWeaponBgNodes[o] = a, e.iconWeaponBgInitialScales[o] = a ? a.scale : 1 } }), o.forEach(function (t, o) { o >= e.activeIconSprites.length && (t.node.active = !1) }), this.prepareLootboxAnimation(), this.playLootboxAnimation() }, t.prototype.loadWeapon = function (e, t) { var o = u.weaponConfig["allBlue_" + e].prefabName; cc.assetManager.getBundle("prefabs").load("weaponsIcons/" + o, cc.Prefab, function (e, o) { var n = cc.instantiate(o); n.scale = 1.4, n.parent = t }) }, t.prototype.lightRun = function () { cc.tween(this.lightNode).repeatForever(cc.tween().by(15, { angle: 360 })).start() }, t.prototype.prepareLootboxAnimation = function () { var e = this; if (this.titleLabel && this.titleLabel.node && (cc.Tween.stopAllByTarget(this.titleLabel.node), this.titleInitialScale = this.titleLabel.node.scale, this.titleLabel.node.active = !1, this.titleLabel.node.opacity = 255, this.titleLabel.node.scale = this.titleInitialScale), this.dropStarted = !1, this.iconFinalPositions = [], this.iconSpawnPositions = [], this.iconPeakPositions = [], this.activeIconSprites.length > 0 && this.activeIconSprites.forEach(function (t) { var o = t.node; cc.Tween.stopAllByTarget(o); var n = o.getPosition(); e.iconFinalPositions.push(cc.v3(n.x, n.y, 0)), o.active = !1, o.opacity = 255, o.scale = 1, o.angle = 0 }), this.lootboxNode) { var t = this.lootboxNode.getChildByName("Top"), o = this.lootboxNode.getChildByName("Bottom"); cc.Tween.stopAllByTarget(t), t.angle = 0; var n = t.getPosition(); this.topInitialPos = cc.v3(n.x, n.y, 0), t.setPosition(this.topInitialPos), cc.Tween.stopAllByTarget(o); var i = o.getPosition(); this.bottomInitialPos = cc.v3(i.x, i.y, 0), o.setPosition(this.bottomInitialPos) } if (this.activeIconSprites.length > 0 && this.lootboxNode) { var r = this.lootboxNode.getChildByName("Bottom"), a = -105, l = 160; if (r && r.getContentSize) { var s = r.getContentSize(); a = -(.5 * s.height + 25), l = .5 * s.height + 160 } this.activeIconSprites.forEach(function (t, o) { var n = e.iconFinalPositions[o], i = cc.v3(n.x, n.y - 80, 0), s = cc.v3(n.x, n.y + 160, 0), c = t.node.parent; if (c && r) { var p = r.convertToWorldSpaceAR(cc.v2(0, a)), u = r.convertToWorldSpaceAR(cc.v2(0, l)), d = c.convertToNodeSpaceAR(p), h = c.convertToNodeSpaceAR(u); i = cc.v3(d.x, d.y, 0), s = cc.v3(h.x, h.y, 0) } var g = 0; 1 === o ? g = e.isWeaponReward ? 275 : 200 : 2 === o && (g = e.isWeaponReward ? -275 : -200); var f = cc.v3(n.x + g, n.y, n.z); e.iconFinalPositions[o] = f; var y = cc.v3(i.x + g, i.y, i.z), m = cc.v3(s.x + g, s.y, s.z); e.iconSpawnPositions.push(y), e.iconPeakPositions.push(m) }) } }, t.prototype.playLootboxAnimation = function () { var e = this; if (this.lootboxNode) { var t = this.lootboxNode.getChildByName("Bottom"), o = t.y; cc.tween(t).delay(.45).to(.18, { y: o + 12 }, { easing: "quadOut" }).to(.24, { y: o }, { easing: "bounceOut" }).start(); var n = this.lootboxNode.getChildByName("Top"), i = cc.v3(this.topInitialPos.x, this.topInitialPos.y, 0), r = cc.v3(i.x, i.y + 50, 0), a = cc.v3(i.x + 160, i.y, 0); cc.tween(n).delay(.52).to(.18, { position: r }, { easing: "quadOut" }).to(.16, { position: a }, { easing: "sineOut" }).to(.28, { angle: -110 }, { easing: "quartOut" }).to(.16, { angle: -90 }, { easing: "backOut" }).call(function () { e.animateIconDrop(n) }).start() } else this.revealRewardUI() }, t.prototype.animateIconDrop = function () { this.activeIconSprites && 0 !== this.activeIconSprites.length ? (this.dropStarted || (this.dropStarted = !0, this.dropShellDuringReveal()), this.animateIconByIndex(0)) : this.revealRewardUI() }, t.prototype.animateIconByIndex = function (e) { var t = this; if (e >= this.activeIconSprites.length) this.revealRewardUI(); else { var o = this.activeIconSprites[e].node, n = this.iconFinalPositions[e] || cc.v3(), i = this.iconSpawnPositions[e] || cc.v3(n.x, n.y - 80, 0), r = this.iconPeakPositions[e] || cc.v3(n.x, n.y + 160, 0); o.active = !0, o.opacity = 0, o.scale = .45, o.angle = -12, o.setPosition(i), cc.tween(o).to(.3, { position: r, opacity: 255, scale: 1.15, angle: 10 }, { easing: "quartOut" }).to(.35, { position: n, scale: 1, angle: 0 }, { easing: "bounceOut" }).call(function () { o.setPosition(n), t.showWeaponBgForIndex(e), t.animateIconByIndex(e + 1) }).start() } }, t.prototype.dropShellDuringReveal = function () { if (this.lootboxNode) { var e = this.lootboxNode.getChildByName("Bottom"), t = e.getPosition(), o = cc.v3(t.x, t.y, 0), n = cc.v3(o.x, o.y - 100, 0); cc.tween(e).to(.25, { position: n }, { easing: "quartIn" }).to(.25, { scale: 0 }).start(); var i = this.lootboxNode.getChildByName("Top"), r = i.getPosition(), a = cc.v3(r.x, r.y, 0), l = cc.v3(a.x, a.y - 100, 0); cc.tween(i).to(.25, { position: l }, { easing: "quartIn" }).to(.25, { scale: 0 }).start() } }, t.prototype.revealRewardUI = function () { if (this.titleLabel && this.titleLabel.node) { var e = this.titleLabel.node; e.active = !0, e.opacity = 0, e.scale = .85 * this.titleInitialScale, cc.tween(e).to(.22, { opacity: 255, scale: 1.05 * this.titleInitialScale }, { easing: "backOut" }).to(.12, { scale: this.titleInitialScale }, { easing: "backIn" }).start() } this.activeIconSprites.length > 0 && this.activeIconSprites.forEach(function (e) { e.node.active = !0, e.node.opacity = 255 }) }, t.prototype.selectRandomRewards = function (e, t) { if (t <= 0) return []; var o = e ? this.getLockedWeaponIds() : this.getLockedSkinIds(); if (0 === o.length) return []; for (var n = Math.min(t, o.length), i = o.slice(), r = [], a = 0; a < n; a++) { var l = Math.floor(Math.random() * i.length); r.push(i.splice(l, 1)[0]) } for (; r.length < t;) { var s = Math.floor(Math.random() * n); r.push(r[s]) } return r }, t.prototype.setupIconButton = function (e, t) { var o = this; if (e && e.node) { var n = e.node.getComponent(cc.Button); if (n) { var i = function () { o.onIconSelected(t) }; n.node.on("click", i, this), n.node.on(cc.Node.EventType.TOUCH_END, i, this), this.iconButtons[t] = n, this.iconButtonHandlers.push({ button: n, handler: i }) } } }, t.prototype.onIconSelected = function (e) { if (!(this.selectionFinalized || e < 0 || e >= this.selectedRewardIds.length)) { var t = this.selectedRewardIds[e]; void 0 !== t && (this.selectionFinalized = !0, this.isWeaponReward ? this.applyWeaponSelection(t) : this.applySkinSelection(t), p.userProfile.data.reward++, p.userProfile.save(), this.onClose()) } }, t.prototype.showWeaponBgForIndex = function (e) { if (this.isWeaponReward) { var t = this.iconWeaponBgNodes[e]; t && (t.active = !0, t.opacity = 0, t.scale = .85 * this.iconWeaponBgInitialScales[e], cc.tween(t).to(.18, { opacity: 255, scale: 1.05 * this.iconWeaponBgInitialScales[e] }, { easing: "backOut" }).to(.12, { scale: this.iconWeaponBgInitialScales[e] }, { easing: "backIn" }).start()) } }, t.prototype.onClose = function () { a.audioManager.playEffect("click"), cc.find("Canvas/ChooseView").getComponent(d.default).updateGold(), this.node.destroy() }, t.prototype.applyWeaponSelection = function (e) { var t = "allBlue_" + e, o = "allRed_" + e; l.gameConfig.lastBuyWeapon = e, p.userProfile.data.weaponsUnLock.hasOwnProperty(t) && (p.userProfile.data.weaponsUnLock[t] = !0), p.userProfile.data.weaponsUnLock.hasOwnProperty(o) && (p.userProfile.data.weaponsUnLock[o] = !0), cc.find("Canvas/ChooseView").getComponent(d.default).ChangeWeapons(1, t, 1) }, t.prototype.applySkinSelection = function (e) { var t = "Skin_" + e; l.gameConfig.lastBuySkin = e, p.userProfile.data.skinsUnLock.hasOwnProperty(t) && (p.userProfile.data.skinsUnLock[t] = !0), cc.find("Canvas/ChooseView").getComponent(d.default).ChangeWeapons(1, t, 2) }, t.prototype.updateIconTitle = function (e, t) { e.node.getChildByName("weaponsbg").getChildByName("name").getComponent(cc.Label).string = t }, t.prototype.getLockedWeaponIds = function () { if (0 == p.userProfile.data.openedWeapons) return p.userProfile.data.openedWeapons++, ["1", "3", "13"]; if (1 == p.userProfile.data.openedWeapons) return p.userProfile.data.openedWeapons++, ["6", "11", "33"]; var e = p.userProfile.data.weaponsUnLock, t = []; for (var o in e) o.startsWith("allBlue_") && e.hasOwnProperty(o) && !e[o] && t.push(o.replace("allBlue_", "")); return t }, t.prototype.getLockedSkinIds = function () { var e = p.userProfile.data.skinsUnLock, t = []; for (var o in e) o.startsWith("Skin_") && e.hasOwnProperty(o) && !e[o] && t.push(o.replace("Skin_", "")); return t }, r([f(cc.Node)], t.prototype, "lightNode", void 0), r([f(cc.Node)], t.prototype, "lootboxNode", void 0), r([f(cc.Label)], t.prototype, "titleLabel", void 0), r([f(cc.Sprite)], t.prototype, "icon", void 0), r([f(cc.Sprite)], t.prototype, "icon2", void 0), r([f(cc.Sprite)], t.prototype, "icon3", void 0), r([g], t) }(cc.Component); o.default = y, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/RewardManager": "RewardManager", "../Manager/UserProfile": "UserProfile", "../Manager/WeaponManager": "WeaponManager", "../Manager/localConfig": "localConfig", "./ChooseView": "ChooseView" }], NicknameView: [function (e, t, o) { "use strict"; cc._RF.push(t, "01e47jAZZhNRbFdsBQL/hHy", "NicknameView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/UserProfile"), l = cc._decorator, s = l.ccclass, c = l.property, p = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.nickEditBox = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.onEnable = function () { this.nickEditBox.string = a.userProfile.data.playerName || "Player#75615984" }, t.prototype.onOkButton = function () { a.userProfile.data.playerName = this.nickEditBox.string, a.userProfile.save(), this.node.destroy() }, r([c(cc.EditBox)], t.prototype, "nickEditBox", void 0), r([s], t) }(cc.Component); o.default = p, cc._RF.pop() }, { "../Manager/UserProfile": "UserProfile" }], NormalBig: [function (e, t, o) { "use strict"; cc._RF.push(t, "45ece5vkfVLZaYWjKIZOYaV", "NormalBig"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.fly = null, this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(5 * this._rigidBody.getMass()), this.fly = !0) }, t.prototype.setVecP = function (e) { null == this.fly2 && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(5 * this._rigidBody.getMass()), this.fly2 = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normalBig, this.node)) } else "suverweapon" == o.node.group && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.normalBig, this.node)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normalBig, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.normalBig, this.node)); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normalBig, this.node))) : "suverweapon" == o.node.group && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.normalBig, this.node)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normalBig, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (c.effectManager.playEffect(c.EffectType.smallBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.normalBig, this.node))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid) { if (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.normalBig, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } null != this.fly2 && (t = cc.v2(0, 0), o = cc.v2(0, 0), this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly2 = null, this.betweenDis = 0, "weapons1" == this.node.group ? l.bulletFactory.putBullet(p.BulletType.normal, this.node) : l.bulletFactory.putBullet(p.BulletType.normal2, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly2 = null, this.activeTimer = 0, this.node.destroy())) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], Normal: [function (e, t, o) { "use strict"; cc._RF.push(t, "ffde5sY9hFMf6HM2nvWUUQw", "Normal"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o, n, i) { this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), i ? (this.user = o, this.node.group = e, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t)) : (o ? this.user = o : this.node.group = e, this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t)) }, t.prototype.setVec = function (e) { null == this.fly && ("weapons1" == this.node.group ? (this.node.getChildByName("bullet").color = s.weaponColors.blue.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = s.weaponColors.blue.colors) : (this.node.getChildByName("bullet").color = s.weaponColors.yellow.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = s.weaponColors.yellow.colors), this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(21 * this._rigidBody.getMass()), this.fly = !0) }, t.prototype.setVecP = function (e) { null == this.fly2 && ("weapons1" == this.node.group ? (this.node.getChildByName("bullet").color = s.weaponColors.blue.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = s.weaponColors.blue.colors) : (this.node.getChildByName("bullet").color = s.weaponColors.red.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = s.weaponColors.red.colors), this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(20 * this._rigidBody.getMass()), this.fly2 = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normal, this.node)) } else "suverweapon" == o.node.group && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.normal, this.node)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normal, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.normal, this.node)); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normal2, this.node))) : "suverweapon" == o.node.group && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.normal2, this.node)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.normal2, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.normal2, this.node))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid) { if (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, "weapons1" == this.node.group ? l.bulletFactory.putBullet(p.BulletType.normal, this.node) : l.bulletFactory.putBullet(p.BulletType.normal2, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } null != this.fly2 && (t = cc.v2(0, 0), o = cc.v2(0, 0), this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly2 = null, this.betweenDis = 0, "weapons1" == this.node.group ? l.bulletFactory.putBullet(p.BulletType.normal, this.node) : l.bulletFactory.putBullet(p.BulletType.normal2, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly2 = null, this.activeTimer = 0, this.node.destroy())) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], NoteGreen: [function (e, t, o) { "use strict"; cc._RF.push(t, "96b7flWYcFLXKP8UvRuOgWc", "NoteGreen"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("../Manager/WeaponManager"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t._flyV22 = null, t._flyV23 = null, t.randomTimers = 0, t.upstate = null, t.changeOnce = !1, t.changeNumber = 1, t.startAngle = null, t.startRedios = null, t.start_pos = new cc.Vec2(0, 0), t.now_pos = new cc.Vec2(0, 0), t } return i(t, e), t.prototype._init = function (e, t, o) { this.fly = null, this.user = o, this.user.convertToWorldSpaceAR(this.user.getChildByName("body").getPosition(), this.start_pos), cc.Vec2.lerp(this.start_pos, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), this.start_pos, .125), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(this.start_pos)), this.node.group = e, this.node.angle = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { if (null == this.fly) { this.randomTimers = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this.node.getChildByName("1").active = !0, this.fly = !0, this.user.convertToWorldSpaceAR(this.user.getChildByName("body").getPosition(), this.start_pos), cc.Vec2.lerp(this.start_pos, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), this.start_pos, .125), this.startAngle = Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI), this.startRedios = 20; var t = cc.v2(Math.cos(this.getRadianByAngle(this.startAngle)), Math.sin(this.getRadianByAngle(this.startAngle))).mul(this.startRedios); this.node.setPosition(t.add(this.node.parent.convertToNodeSpaceAR(this.start_pos))), this.node.angle = this.startAngle } }, t.prototype.start = function () { }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.checkTarget = function () { var e = cc.find("Canvas").getComponentsInChildren(cc.Collider), t = this.node.getBoundingBoxToWorld(), o = !1, n = null; if (e.forEach(function (e) { var i = null; i = e.node.parent ? e.node.parent : cc.find("Canvas"); var r = e.node, a = new cc.Vec2(0, 0); i.convertToWorldSpaceAR(r.getPosition(), a); var l = r.getBoundingBoxToWorld(); o || t.intersects(l) && (n = r, o = !0) }), null != n) { var i = n; if ("weapons1" == this.node.group) if (c.gameConfig.suverModel) if ("suverenemy" == i.group) { var r = i.getComponent(cc.RigidBody); this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), i.parent.getComponent(a.default).setDamage(5), r.applyLinearImpulse(this._flyV2.mul(16e4), r.getWorldCenter(), !0), this.putNodes()) } else "suverweapon" == i.group && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), this.putNodes()); else "player2" == i.group ? (r = i.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), i.parent.getComponent(a.default).setDamage(5), r.applyLinearImpulse(this._flyV2.mul(16e4), r.getWorldCenter(), !0), this.putNodes())) : "bomb2" != i.group && "water" != i.group && "suverweapon" != i.group && "weapons2" != i.group && "rebound2" != i.group || (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), this.putNodes()); else "weapons2" == this.node.group && (c.gameConfig.suverModel ? "suverenemy" == i.group ? (r = i.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), i.parent.getComponent(a.default).setDamage(5), r.applyLinearImpulse(this._flyV2.mul(16e4), r.getWorldCenter(), !0), this.putNodes())) : "suverweapon" == i.group && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), this.putNodes()) : "player1" == i.group ? (r = i.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), i.parent.getComponent(a.default).setDamage(5), r.applyLinearImpulse(this._flyV2.mul(16e4), r.getWorldCenter(), !0), this.putNodes())) : "bomb1" != i.group && "water" != i.group && "suverweapon" != i.group && "weapons1" != i.group && "rebound1" != i.group || (p.effectManager.playEffect(p.EffectType.noteGreenBoom, this.node.getPosition()), this.putNodes())) } }, t.prototype.putNodes = function () { s.audioManager.playEffect("harp"), this.damageInverter = 0, this.randomTimers = 0, this.fly = null, this.betweenDis = 0, this.node.getChildByName("1").active = !1, "noteGreen" == this.node.name ? l.bulletFactory.putBullet(u.BulletType.noteGreen, this.node) : l.bulletFactory.putBullet(u.BulletType.noteGreen2, this.node) }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { this.user.convertToWorldSpaceAR(this.user.getChildByName("body").getPosition(), this.start_pos), cc.Vec2.lerp(this.start_pos, this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), this.start_pos, .125), this.startAngle += 5, this.startRedios += .5, this.startRedios >= 60 && (this.startRedios = 60); var t = cc.v2(Math.cos(this.getRadianByAngle(this.startAngle)), Math.sin(this.getRadianByAngle(this.startAngle))).normalize().mul(this.startRedios); this.node.setPosition(t.add(this.node.parent.convertToNodeSpaceAR(this.start_pos))), this.node.angle = this.startAngle, this.randomTimers += e, this.randomTimers >= 6 && this.putNodes(), this.checkTarget() } }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], NotePurple: [function (e, t, o) { "use strict"; cc._RF.push(t, "f0afaF/wURJWJdAeYFScOy+", "NotePurple"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = e("../HumanStates/Human"), h = e("../Manager/AudioManager"), g = cc._decorator, f = g.ccclass, y = (g.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t._flyV22 = null, t._flyV23 = null, t.randomTimers = 0, t.upstate = null, t.changeOnce = !1, t.changeNumber = 1, t.effinvertal = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this.node.getChildByName("1").active = !0, this._rigidBody.linearVelocity = this._flyV2.mul(this._rigidBody.getMass()), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { "weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5), o.node.parent.getComponent(d.default).setForces(!0, !0), this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node))) : "suverweapon" == o.node.group && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node)) : "player2" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5), o.node.parent.getComponent(d.default).setForces(!0, !0), this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node)) : "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5), o.node.parent.getComponent(d.default).setForces(!0, !0), this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node))) : "suverweapon" == o.node.group && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node)) : "player1" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5), o.node.parent.getComponent(d.default).setForces(!0, !0), this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || (this.playeffs(t), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node))) }, t.prototype.playeffs = function (e) { h.audioManager.playEffect("harp"), this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.notePurpleBoom, e.node.getPosition())) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.effinvertal < .5 && (this.effinvertal += e), this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { this._rigidBody.applyForceToCenter(this._flyV2.mul(600 * this._rigidBody.getMass()), !0); var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(p.BulletType.notePurple, this.node)), this.activeTimer += e, this.activeTimer >= 8 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([f], t) }(u.default)); o.default = y, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], NoteRed: [function (e, t, o) { "use strict"; cc._RF.push(t, "6d92ep971lMjKSUtL5FfF8d", "NoteRed"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("../Manager/WeaponManager"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t._flyV22 = null, t._flyV23 = null, t.randomTimers = 0, t.upstate = null, t.changeOnce = !1, t.changeNumber = 1, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVecH = function (e, t, o) { null == this.fly && (this.upstate = Math.random() > .5, this.randomTimers = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._flyV22 = t.normalize(), this._flyV23 = o.normalize(), this.changeOnce = !1, this.changeNumber = .5, this._rigidBody.angularVelocity = 0, this.node.getChildByName("1").active = !0, this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (c.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)) } else "suverweapon" == o.node.group && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)); else "weapons2" == t.node.group && (c.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "suverweapon" == o.node.group && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), s.audioManager.playEffect("harp"), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (p.effectManager.playEffect(p.EffectType.noteRedBoom, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, s.audioManager.playEffect("harp"), l.bulletFactory.putBullet(u.BulletType.noteRed, this.node))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { this.randomTimers += e, this.randomTimers >= this.changeNumber && (this.randomTimers = 0, this.upstate = !this.upstate); var t = cc.v2(0, 0); this.upstate ? (cc.Vec2.lerp(t, this._flyV23, this._flyV22, 1 - this.randomTimers / this.changeNumber), this._rigidBody.linearVelocity = t.normalize().mul(900)) : (cc.Vec2.lerp(t, this._flyV23, this._flyV22, this.randomTimers / this.changeNumber), this._rigidBody.linearVelocity = t.normalize().mul(900)); var o = cc.v2(0, 0), n = cc.v2(0, 0); this._target.getWorldPosition(o), this._rigidBody.getWorldPosition(n), this.betweenDis = cc.Vec2.distance(o, n), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this.node.getChildByName("1").active = !1, l.bulletFactory.putBullet(u.BulletType.noteRed, this.node)), this.activeTimer += e, this.activeTimer >= 8 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], PaintBox: [function (e, t, o) { "use strict"; cc._RF.push(t, "22098za/8tIY4ySs9+DWv7M", "PaintBox"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.slowTimer = null, t.ispalyer = null, t } return i(t, e), t.prototype._init = function (e) { this.slowTimer = 0, this.damageInverter = 20, this.ispalyer = "rebound1" == e, this.node.getComponent(cc.Collider).apply(), cc.tween(this.node).set({ scale: 3 }).to(.2, { scale: 1 }).union().start() }, t.prototype.onBeginContact = function (e, t, o) { this.ispalyer ? s.gameConfig.suverModel ? "suverenemy" == o.node.group && this.damageInverter >= 20 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5)) : "player2" == o.node.group && this.damageInverter >= 20 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5)) : this.ispalyer || (s.gameConfig.suverModel ? "suverenemy" == o.node.group && this.damageInverter >= 20 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5)) : "player1" == o.node.group && this.damageInverter >= 20 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(5))) }, t.prototype.update = function (e) { this.damageInverter < 1 && (this.damageInverter += e), null != this.slowTimer && (this.slowTimer += e, this.slowTimer >= 3 && (this.node.scale = 1, l.bulletFactory.putBullet(c.BulletType.paintBall, this.node))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ParticleCtrl: [function (e, t, o) { "use strict"; cc._RF.push(t, "e9db5BQODRKbopyM0zoYMp7", "ParticleCtrl"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.isPlaying = !1, t.type = null, t.target = null, t } return i(t, e), t.prototype.onLoad = function () { }, t.prototype.playPar = function (e, t) { this.isPlaying = !0, this.type = e, this.node.getComponent(cc.ParticleSystem).resetSystem(), t && (this.target = t) }, t.prototype.start = function () { }, t.prototype.onDisable = function () { this.target = null }, t.prototype.update = function () { }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], PickAxeCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "88f0frSGeFD+bxeICTQ/YBB", "PickAxeCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.item1 = null, t.firePoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.firePoint = this.node.getChildByName("firePoint") }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { null != this.item1 && l.bulletFactory.putBullet(this.bulletType[0], this.item1); var t = l.bulletFactory.getBullet(this.bulletType[0], this.firePoint, this.checkName, cc.Vec2.ZERO), o = t.getComponent("BulletBase"); o._init(this.node.group, this.targetEnemy, this.human), o.setVec(e), this.item1 = t, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function () { p.effectManager.playBigSkills(p.EffectType.bigSkill, this.node.group, 5, this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(5), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5 && (this.effinvertal = 0, s.audioManager.playEffect("sword2"), t.points[0])) { var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.AtkFrequency < .5 && (this.AtkFrequency += e), this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1 }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], Portal: [function (e, t, o) { "use strict"; cc._RF.push(t, "abaefBR2vpEcpOfyKRTiJXV", "Portal"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.targetGate = null, t.cooldownSeconds = 1, t.humanCooldownUntil = new Map, t } var o; return i(t, e), o = t, t.prototype.start = function () { }, t.prototype.isPlayerCollider = function (e) { var t = e.node.group; return "player1" === t || "player2" === t || "suverenemy" === t }, t.prototype.getHumanRootFromCollider = function (e) { return e.node.parent }, t.prototype.now = function () { return cc.director.getTotalTime() / 1e3 }, t.prototype.canTeleport = function (e) { var t = this.humanCooldownUntil.get(e) || 0, o = e.__portalCooldownUntil || 0; return this.now() >= Math.max(t, o) }, t.prototype.setCooldown = function (e) { var t = this.now() + this.cooldownSeconds; if (this.humanCooldownUntil.set(e, t), e.__portalCooldownUntil = t, this.targetGate) { var n = this.targetGate.getComponent(o); n && n.humanCooldownUntil.set(e, t) } }, t.prototype.teleport = function (e) { if (this.targetGate && this.targetGate.isValid) { var t = this.targetGate.parent.convertToWorldSpaceAR(this.targetGate.getPosition()), o = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()), n = t.sub(o), i = e.getPosition().add(n), r = []; cc.tween(e).delay(1 / 60).call(function () { e.setPosition(i), e.getComponentsInChildren(cc.RigidBody).forEach(function (e) { e.syncPosition(!0); var t = e.node.getComponent(cc.Collider); t && !t.sensor && (r.push(e.node.name), t.sensor = !0, t.apply()) }) }).delay(.05).call(function () { e.getComponentsInChildren(cc.RigidBody).forEach(function (e) { if (-1 !== r.indexOf(e.node.name)) { var t = e.node.getComponent(cc.Collider); t && (t.sensor = !1, t.apply()) } }) }).union().start(), this.setCooldown(e) } }, t.prototype.onBeginContact = function (e, t, o) { if (this.targetGate && this.isPlayerCollider(o)) { var n = this.getHumanRootFromCollider(o); n && n.isValid && this.canTeleport(n) && this.teleport(n) } }, r([s(cc.Node)], t.prototype, "targetGate", void 0), r([s()], t.prototype, "cooldownSeconds", void 0), o = r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], PotionBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "ff314Hr+fFHA4AQ2Owee90c", "PotionBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.enemyV3 = new cc.Vec2, t.isBoomTimers = null, t.targetlist = [], t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.parent.children.forEach(function (t) { t.group = e }), this.node.getComponent(cc.PhysicsPolygonCollider).apply(), this.targetlist = [], this._rigidBody = this.node.getComponent(cc.RigidBody), this._rigidBody.gravityScale = 1, this._rigidBody.linearDamping = .3, this._rigidBody.angularDamping = .3, this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = .5, this.targetEnemy = t, this.node.getChildByName("body").active = !0, this.node.parent.getChildByName("2").active = !1, this._rigidBody.fixedRotation = !1 }, t.prototype.setVec = function (e) { null == this.fly && (this.targetlist = [], this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyTorque(80, !0), this._rigidBody.applyLinearImpulse(this._flyV2.mul(900 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1, this.isBoomTimers = 0) }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("potion" == this.node.parent.name || "potion2" == this.node.parent.name) { var i = function () { var i = e.getWorldManifold(); ("bomb1" != o.node.group && "weapons1" != o.node.group || !i.points[0]) && ("bomb2" != o.node.group && "weapons2" != o.node.group || !i.points[0]) || c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), n.fly = null, n.isBoom = !0, n.isTimer = 0, n.isBoomTimers = 0, n.node.getChildByName("body").active = !1, n.node.parent.getChildByName("2").active = !0, n.node.parent.getChildByName("2").getComponent(cc.ParticleSystem).resetSystem(), n._rigidBody.linearVelocity = cc.v2(0, 0), n._rigidBody.angularVelocity = 0, n._rigidBody.fixedRotation = !1, n._rigidBody.gravityScale = 0, n._rigidBody.linearDamping = 1e4, n._rigidBody.angularDamping = 1e4, n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var r = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), l = !1; r.forEach(function (e) { var t = null; t = e.node.parent ? e.node.parent : cc.find("Canvas"); var o = e.node, i = new cc.Vec2(0, 0); if (t.convertToWorldSpaceAR(o.getPosition(), i), cc.Vec2.distance(n.enemyV3, i) <= n.atkRange) { var r = new cc.Vec2(0, 0); cc.Vec2.subtract(r, i, n.enemyV3), s.gameConfig.suverModel ? t.getComponent(a.default) && "suverenemy" == t.group && n.damageInverter >= .5 && t.getComponent(a.default).setDamage(n.Atk, !0) : "bomb2" == n.node.group ? t.getComponent(a.default) && "player1" == e.node.group && (l || n.damageInverter >= .5 && (t.getComponent(a.default).setDamage(n.Atk, !0), l = !0)) : t.getComponent(a.default) && "player2" == e.node.group && (l || n.damageInverter >= .5 && (t.getComponent(a.default).setDamage(n.Atk, !0), l = !0)), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && e.applyLinearImpulse(r.normalize().mul(10 * e.getMass()), e.getWorldCenter(), !0) } }) }, r = function () { var i = e.getWorldManifold(); ("bomb1" != o.node.group && "weapons1" != o.node.group || !i.points[0]) && ("bomb2" != o.node.group && "weapons2" != o.node.group || !i.points[0]) || c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), n.fly = null, n.isBoom = !0, n.isTimer = 0, n.isBoomTimers = 0, n.node.getChildByName("body").active = !1, n.node.parent.getChildByName("2").active = !0, n.node.parent.getChildByName("2").getComponent(cc.ParticleSystem).resetSystem(), n._rigidBody.linearVelocity = cc.v2(0, 0), n._rigidBody.angularVelocity = 0, n._rigidBody.fixedRotation = !0, n._rigidBody.gravityScale = 0, n._rigidBody.linearDamping = 1e4, n._rigidBody.angularDamping = 1e4, n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var r = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), l = !1; r.forEach(function (e) { var t = null; t = e.node.parent ? e.node.parent : cc.find("Canvas"); var o = e.node, i = new cc.Vec2(0, 0); if (t.convertToWorldSpaceAR(o.getPosition(), i), cc.Vec2.distance(n.enemyV3, i) <= n.atkRange) { var r = new cc.Vec2(0, 0); cc.Vec2.subtract(r, i, n.enemyV3), s.gameConfig.suverModel ? t.getComponent(a.default) && "suverenemy" == t.group && n.damageInverter >= .5 && t.getComponent(a.default).setDamage(n.Atk, !0) : "bomb2" == n.node.group ? t.getComponent(a.default) && "player1" == e.node.group && (l || n.damageInverter >= .5 && (t.getComponent(a.default).setDamage(n.Atk, !0), l = !0)) : t.getComponent(a.default) && "player2" == e.node.group && (l || n.damageInverter >= .5 && (t.getComponent(a.default).setDamage(n.Atk, !0), l = !0)), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && e.applyLinearImpulse(r.normalize().mul(10 * e.getMass()), e.getWorldCenter(), !0) } }) }; if (this.isBoom) this.isBoom && (s.gameConfig.suverModel ? "bomb2" == t.node.group ? "suverenemy" == o.node.group && o.node.parent && o.node.parent.getComponent(a.default) && o.node.parent.getComponent(a.default).setDamage(this.Atk) : "bomb1" == t.node.group && "suverenemy" == o.node.group && o.node.parent && o.node.parent.getComponent(a.default) && o.node.parent.getComponent(a.default).setDamage(this.Atk) : "bomb2" == t.node.group ? "player1" != o.node.group && "suverenemy" != o.node.group || o.node.parent && o.node.parent.getComponent(a.default) && this.damageInverter >= .5 && o.node.parent.getComponent(a.default).setDamage(this.Atk) : "bomb1" == t.node.group && ("player2" != o.node.group && "suverenemy" != o.node.group || o.node.parent && o.node.parent.getComponent(a.default) && this.damageInverter >= .5 && o.node.parent.getComponent(a.default).setDamage(this.Atk))); else if ("bomb1" == t.node.group) { var l = e.getWorldManifold(); s.gameConfig.suverModel ? ("suverenemy" == o.node.group ? i() : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r(), "suverweapon" == o.node.group && l.points[0] && c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(l.points[0].x - cc.winSize.width / 2, l.points[0].y - cc.winSize.height / 2))) : ("player2" == o.node.group ? i() : "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "bomb2" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r(), "bomb2" != o.node.group && "weapons2" != o.node.group || !l.points[0] || c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(l.points[0].x - cc.winSize.width / 2, l.points[0].y - cc.winSize.height / 2))) } else "bomb2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r() : "player1" == o.node.group ? i() : "weapons1" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "bomb1" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r()) } }, t.prototype.start = function () { }, t.prototype.onEndContact = function (e, t, o) { this.isBoom && -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1) }, t.prototype.HumanIdel = function (e) { if (e && e.isValid && cc.RigidBody) { var t = e.getComponent(cc.RigidBody); if (t && this._rigidBody) { var o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this._rigidBody.getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = i.len(); t.applyForceToCenter(i.mul(Math.abs(150 - r) * t.getMass() * 10), !0) } } }, t.prototype.checkBodyList = function () { var e = this; this.enemyV3 = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); var t = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), o = !1; t.forEach(function (t) { var n = null; n = t.node.parent ? t.node.parent : cc.find("Canvas"); var i = t.node, r = new cc.Vec2(0, 0); n.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(e.enemyV3, r) <= e.atkRange ? (s.gameConfig.suverModel ? n.getComponent(a.default) && "suverenemy" == n.group && e.damageInverter >= .5 && n.getComponent(a.default).setDamage(e.Atk, !0) : "bomb2" == e.node.group ? n.getComponent(a.default) && "player1" == t.node.group && (o || e.damageInverter >= .5 && (n.getComponent(a.default).setDamage(e.Atk, !0), o = !0)) : n.getComponent(a.default) && "player2" == t.node.group && (o || e.damageInverter >= .5 && (n.getComponent(a.default).setDamage(e.Atk, !0), o = !0)), "ground" != i.group && -1 == e.targetlist.indexOf(i) && i && i.isValid && i.getComponent(cc.RigidBody) && e.targetlist.push(i)) : -1 != e.targetlist.indexOf(i) && e.targetlist.splice(e.targetlist.indexOf(i), 1) }) }, t.prototype.update = function (e) { var t = this; if (this.node.parent.isValid) { if (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.isTimer += e, this._rigidBody.applyTorque(400, !0), this.isTimer >= this.boomTimer && !this.isBoom)) { this.fly = null, this.isBoom = !0, this.isTimer = 0, this.isBoomTimers = 0, this.enemyV3 = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); var o = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), n = !1; o.forEach(function (e) { var o = null; o = e.node.parent ? e.node.parent : cc.find("Canvas"); var i = e.node, r = new cc.Vec2(0, 0); if (o.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t.enemyV3, r) <= t.atkRange) { s.gameConfig.suverModel ? o.getComponent(a.default) && "suverenemy" == o.group && t.damageInverter >= .5 && o.getComponent(a.default).setDamage(t.Atk, !0) : "bomb2" == t.node.group ? o.getComponent(a.default) && "player1" == e.node.group && (n || t.damageInverter >= .5 && (o.getComponent(a.default).setDamage(t.Atk, !0), n = !0)) : o.getComponent(a.default) && "player2" == e.node.group && (n || t.damageInverter >= .5 && (o.getComponent(a.default).setDamage(t.Atk, !0), n = !0)); var l = new cc.Vec2(0, 0); cc.Vec2.subtract(l, r, t.enemyV3), "rebound1" != e.node.group && "rebound2" != e.node.group && "ground" != e.node.group && "box" != e.node.group && e.applyLinearImpulse(l.normalize().mul(10 * e.getMass()), e.getWorldCenter(), !0) } }), this.node.getChildByName("body").active = !1, this.node.parent.getChildByName("2").getComponent(cc.ParticleSystem).resetSystem(), this.node.parent.getChildByName("2").active = !0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.fixedRotation = !1, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 1e4, this._rigidBody.angularDamping = 1e4 } this.isBoom && (this.isBoomTimers += e, this.checkBodyList(), this.targetlist = this.targetlist.filter(function (e) { return e && e.isValid && !!e.getComponent(cc.RigidBody) }), this.targetlist.length > 0 && this.targetlist.forEach(function (e) { t.HumanIdel(e) }), this.isBoomTimers >= 4 && (this.isBoom = null, this.targetlist = [], this.isBoomTimers = 0, this.node.parent.getChildByName("2").getComponent(cc.ParticleSystem).stopSystem(), this.node.parent.getChildByName("2").active = !1, l.bulletFactory.putBullet(p.BulletType.potions, this.node.parent))) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], PotionCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "39db1BYc1VG+K2wYIavmUZf", "PotionCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t.nd2 = null, t.ndBody = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.skillInverter = 3, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.ndBody = this.node.getChildByName("body"), this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.nd1.active = !0, this.ndBody.active = !0, 0 == this.SkillNumber ? this.nd1.color = s.weaponColors.green.colors : this.nd1.color = s.weaponColors.purple.colors }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.Vec2.ZERO), o = "bomb1"; "weapons2" == this.node.group && (o = "bomb2"); var n = t.getChildByName("body").getComponent("BulletBase"); n._init(o, this.targetEnemy, this.human), n.setVec(e), this.nd1.active = !1, this.ndBody.active = !1, this.SkillNumber = null, this.skillInverter = 2 } else this.nd1.active = !1, this.nd2.active = !0, this.nd2.getComponent(cc.ParticleSystem).resetSystem(), this.human.getComponent(a.default).addHP(5), this.SkillNumber = null, this.skillInverter = 4; this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 1; t < 3; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, cc.v2(0, 0)), i = "bomb1"; "weapons2" == this.node.group && (i = "bomb2"); var r = n.getChildByName("body").getComponent("BulletBase"); r._init(i, this.targetEnemy, this.human), r.setVec(o) } }, t.prototype.contactHuman = function (e) { this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(4)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ReboundTimer: [function (e, t, o) { "use strict"; cc._RF.push(t, "50715uWp3lEl6zXPqJxBPbc", "ReboundTimer"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.reboundNumber = 0, t.fireTimer = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.fireTimer = 2, this._rigidBody = this.node.getComponent(cc.RigidBody), this.node.group = e, o && (this.user = o), this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.fireTimer = 2, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.reboundNumber = 0, this.betweenDis = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1500 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("rebound1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)) } else "default" == o.node.group || "water" == o.node.group || "rebound2" == o.node.group || "suverweapon" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "default" == o.node.group || "water" == o.node.group || "rebound2" == o.node.group || "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent)); else "rebound2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "default" == o.node.group || "water" == o.node.group || "rebound1" == o.node.group || "suverweapon" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "default" == o.node.group || "water" == o.node.group || "rebound1" == o.node.group || "suverweapon" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.isValid && (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.fireTimer -= e, this.fireTimer <= 0 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.fireTimer = 2, l.bulletFactory.putBullet(p.BulletType.reboundTimer, this.node)))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], Rebound: [function (e, t, o) { "use strict"; cc._RF.push(t, "9a0522iqTFBQ57fDsjmLvPo", "Rebound"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.reboundNumber = 0, t.fireTimer = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this._rigidBody = this.node.getComponent(cc.RigidBody), o ? this.user = o : this.node.group = e, this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.fireTimer = 3, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.reboundNumber = 0, this.betweenDis = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(2e3 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("rebound1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rebound, this.node)) } else "default" == o.node.group || "water" == o.node.group || "rebound2" == o.node.group || "suverweapon" == o.node.group || "bomb2" == o.node.group ? (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound, this.node)) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound, this.node))); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rebound, this.node))) : "default" == o.node.group || "water" == o.node.group || "rebound2" == o.node.group || "weapons2" == o.node.group || "bomb2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound, this.node)) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound, this.node))); else "rebound2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node))) : "default" == o.node.group || "water" == o.node.group || "rebound1" == o.node.group || "suverweapon" == o.node.group || "bomb1" == o.node.group ? (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node)) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node))) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node))) : "default" == o.node.group || "water" == o.node.group || "rebound1" == o.node.group || "suverweapon" == o.node.group || "bomb1" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node)) : "ground" == o.node.group && (this.reboundNumber++, this.reboundNumber > 3 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), l.bulletFactory.putBullet(p.BulletType.rebound2, this.node)))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, "rebound1" == this.node.group ? l.bulletFactory.putBullet(p.BulletType.rebound, this.node) : l.bulletFactory.putBullet(p.BulletType.rebound2, this.node)), this.fireTimer -= e, this.fireTimer <= 0 && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, "rebound1" == this.node.group ? l.bulletFactory.putBullet(p.BulletType.rebound, this.node) : l.bulletFactory.putBullet(p.BulletType.rebound2, this.node)) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], RewardManager: [function (e, t, o) { "use strict"; var n; cc._RF.push(t, "af72c5rULFIw5Ia8XaAnkx9", "RewardManager"), Object.defineProperty(o, "__esModule", { value: !0 }), o.rewardConfig = void 0, o.rewardConfig = ((n = {})[0] = { isWeapon: !0 }, n[1] = { isWeapon: !1 }, n[2] = { isWeapon: !0 }, n[3] = { isWeapon: !1 }, n[4] = { isWeapon: !0 }, n[5] = { isWeapon: !1 }, n[6] = { isWeapon: !1 }, n[7] = { isWeapon: !0 }, n[8] = { isWeapon: !1 }, n[9] = { isWeapon: !0 }, n[10] = { isWeapon: !0 }, n[11] = { isWeapon: !1 }, n[12] = { isWeapon: !1 }, n[13] = { isWeapon: !0 }, n[14] = { isWeapon: !1 }, n[15] = { isWeapon: !0 }, n[16] = { isWeapon: !0 }, n[17] = { isWeapon: !1 }, n[18] = { isWeapon: !1 }, n[19] = { isWeapon: !0 }, n[20] = { isWeapon: !1 }, n[21] = { isWeapon: !0 }, n[22] = { isWeapon: !1 }, n[23] = { isWeapon: !0 }, n[24] = { isWeapon: !0 }, n[25] = { isWeapon: !1 }, n[26] = { isWeapon: !1 }, n[27] = { isWeapon: !0 }, n[28] = { isWeapon: !1 }, n[29] = { isWeapon: !0 }, n[30] = { isWeapon: !1 }, n[31] = { isWeapon: !0 }, n[32] = { isWeapon: !0 }, n[33] = { isWeapon: !1 }, n[34] = { isWeapon: !1 }, n[35] = { isWeapon: !0 }, n[36] = { isWeapon: !1 }, n[37] = { isWeapon: !0 }, n[38] = { isWeapon: !0 }, n[39] = { isWeapon: !1 }, n[40] = { isWeapon: !1 }, n[41] = { isWeapon: !0 }, n[42] = { isWeapon: !1 }, n[43] = { isWeapon: !0 }, n[44] = { isWeapon: !0 }, n[45] = { isWeapon: !1 }, n[46] = { isWeapon: !1 }, n[47] = { isWeapon: !0 }, n[48] = { isWeapon: !1 }, n[49] = { isWeapon: !0 }, n[50] = { isWeapon: !0 }, n[51] = { isWeapon: !1 }, n[52] = { isWeapon: !1 }, n[53] = { isWeapon: !0 }, n[54] = { isWeapon: !1 }, n[55] = { isWeapon: !0 }, n[56] = { isWeapon: !0 }, n[57] = { isWeapon: !1 }, n[58] = { isWeapon: !1 }, n[59] = { isWeapon: !0 }, n[60] = { isWeapon: !1 }, n[61] = { isWeapon: !0 }, n[62] = { isWeapon: !0 }, n[63] = { isWeapon: !1 }, n[64] = { isWeapon: !1 }, n[65] = { isWeapon: !0 }, n[66] = { isWeapon: !1 }, n[67] = { isWeapon: !0 }, n[68] = { isWeapon: !0 }, n[69] = { isWeapon: !1 }, n[70] = { isWeapon: !1 }, n[71] = { isWeapon: !0 }, n[72] = { isWeapon: !1 }, n[73] = { isWeapon: !0 }, n[74] = { isWeapon: !0 }, n[75] = { isWeapon: !1 }, n[76] = { isWeapon: !1 }, n[77] = { isWeapon: !0 }, n[78] = { isWeapon: !1 }, n), cc._RF.pop() }, {}], RondIn: [function (e, t, o) { "use strict"; cc._RF.push(t, "0b2b65RD/1LBKaYOGSvwKUB", "RondIn"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = cc._decorator, s = l.ccclass, c = (l.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onLoad = function () { 1 == a.gameConfig.gameChooseViewNumber && this.node.destroy() }, t.prototype.start = function () { var e = this; cc.tween(this.node).to(.2, { scale: 0 }).call(function () { e.node.destroy() }).start() }, r([s], t) }(cc.Component)); o.default = c, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager" }], RondOut: [function (e, t, o) { "use strict"; cc._RF.push(t, "ecd57ZWat9H+aZFSjkj7PQU", "RondOut"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.str = "", t } return i(t, e), t.prototype.init = function (e) { this.str = e, cc.director.preloadScene(this.str) }, t.prototype.start = function () { var e = this; cc.tween(this.node).to(.35, { scale: 1 }).call(function () { cc.director.loadScene(e.str) }).start() }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], RotatePlatform: [function (e, t, o) { "use strict"; cc._RF.push(t, "485a9FsyZtOp70FKNHYUMs5", "RotatePlatform"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.speed = 50, t.isClockwise = !0, t.rigidBody = null, t } return i(t, e), t.prototype.onLoad = function () { this.rigidBody = this.node.getComponent(cc.RigidBody) }, t.prototype.update = function (e) { var t = this.speed * e * (this.isClockwise ? 1 : -1); this.rigidBody ? this.rigidBody.angularVelocity = t * (180 / Math.PI) : this.node.angle += t }, r([s({ min: 0 })], t.prototype, "speed", void 0), r([s()], t.prototype, "isClockwise", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], RpgNormal: [function (e, t, o) { "use strict"; cc._RF.push(t, "1e933lv5pJO2qKOCFvl5LaS", "RpgNormal"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(8 * this._rigidBody.getMass()), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(50 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node)) } else "suverweapon" == o.node.group && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node)); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(50 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node)); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(50 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node))) : "suverweapon" == o.node.group && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node)) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), n.applyLinearImpulse(this._flyV2.mul(50 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.rpgBullets, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], RunInCenter: [function (e, t, o) { "use strict"; cc._RF.push(t, "2df9fWNRbBJYa52g3aI/BSO", "RunInCenter"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.isHex = !1, t.rb = null, t.angleTimer = 0, t.OneTimers = 0, t.startTimer = 2, t.speed = 63, t.period = 70, t } return i(t, e), t.prototype.onLoad = function () { this.isHex && (this.period = 80, this.speed = 62), this.OneTimers = 2 * Math.PI / this.period, this.rb = this.node.getComponent(cc.RigidBody), this.angleTimer = .2 }, t.prototype.update = function (e) { if (this.startTimer >= 0) this.startTimer -= e; else if (this.rb.angularVelocity = 50 * -this.OneTimers, this.angleTimer <= this.OneTimers / 50) this.angleTimer += e; else { this.angleTimer = 0; var t = Math.PI / 180 * this.node.angle, o = cc.v2(Math.cos(t), Math.sin(t)).normalize(); this.rb.linearVelocity = o.mul(this.speed) } }, r([s], t.prototype, "isHex", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], RunTableCtrl: [function (e, t, o) { "use strict"; cc._RF.push(t, "a3675iLdIhJrrN+vqRp6oRq", "RunTableCtrl"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a, l = cc._decorator, s = l.ccclass, c = l.property; (function (e) { e[e.UP = 0] = "UP", e[e.DOWN = 1] = "DOWN", e[e.LEFT = 2] = "LEFT", e[e.RIGHT = 3] = "RIGHT", e[e.CENTER_HORIZONTAL = 4] = "CENTER_HORIZONTAL", e[e.CENTER_VERTICAL = 5] = "CENTER_VERTICAL" })(a || (a = {})); var p = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.direction = a.RIGHT, t.speed = 50, t.delay = 0, t.distance = 100, t.movementState = 0, t.startPosition = new cc.Vec2(0, 0), t.targetPosition = new cc.Vec2(0, 0), t.currentPosition = new cc.Vec2(0, 0), t.rigidBody = null, t.startDelay = 0, t.manualVelocity = null, t } return i(t, e), t.prototype.onLoad = function () { this.rigidBody = this.node.getComponent(cc.RigidBody); var e = this.node.convertToWorldSpaceAR(cc.v2(0, 0)); this.currentPosition.set(e), this.startPosition.set(e), this.startDelay = this.delay, this.movementState = this.startDelay > 0 ? 0 : 1, 1 === this.movementState && (this.updateTargetPosition(), this.startMovement()) }, t.prototype.startMovement = function () { var e = this.getDirectionVelocity(); this.rigidBody ? this.rigidBody.linearVelocity = e : this.manualVelocity = e }, t.prototype.getDirectionVelocity = function () { var e = 1 === this.movementState, t = this.speed; switch (this.direction) { case a.UP: return cc.v2(0, e ? t : -t); case a.DOWN: return cc.v2(0, e ? -t : t); case a.LEFT: return cc.v2(e ? -t : t, 0); case a.RIGHT: case a.CENTER_HORIZONTAL: return cc.v2(e ? t : -t, 0); case a.CENTER_VERTICAL: return cc.v2(0, e ? t : -t); default: return cc.v2(0, 0) } }, t.prototype.updateTargetPosition = function () { switch (this.direction) { case a.UP: this.targetPosition.x = this.startPosition.x, this.targetPosition.y = this.startPosition.y + (1 === this.movementState ? this.distance : 0); break; case a.DOWN: this.targetPosition.x = this.startPosition.x, this.targetPosition.y = this.startPosition.y + (1 === this.movementState ? -this.distance : 0); break; case a.LEFT: this.targetPosition.x = this.startPosition.x + (1 === this.movementState ? -this.distance : 0), this.targetPosition.y = this.startPosition.y; break; case a.RIGHT: this.targetPosition.x = this.startPosition.x + (1 === this.movementState ? this.distance : 0), this.targetPosition.y = this.startPosition.y; break; case a.CENTER_HORIZONTAL: this.targetPosition.x = this.startPosition.x + (1 === this.movementState ? this.distance : -this.distance), this.targetPosition.y = this.startPosition.y; break; case a.CENTER_VERTICAL: this.targetPosition.x = this.startPosition.x, this.targetPosition.y = this.startPosition.y + (1 === this.movementState ? this.distance : -this.distance) } }, t.prototype.update = function (e) { if (0 === this.movementState) return this.startDelay -= e, void (this.startDelay <= 0 && (this.movementState = 1, this.updateTargetPosition(), this.startMovement())); !this.rigidBody && this.manualVelocity && (this.node.x += this.manualVelocity.x * e, this.node.y += this.manualVelocity.y * e); var t = this.node.convertToWorldSpaceAR(cc.v2(0, 0)); this.currentPosition.set(t), this.hasReachedTarget() && this.reverseMovement() }, t.prototype.hasReachedTarget = function () { switch (this.direction) { case a.UP: return 1 === this.movementState ? this.currentPosition.y >= this.targetPosition.y - 5 : this.currentPosition.y <= this.targetPosition.y + 5; case a.DOWN: return 1 === this.movementState ? this.currentPosition.y <= this.targetPosition.y + 5 : this.currentPosition.y >= this.targetPosition.y - 5; case a.LEFT: return 1 === this.movementState ? this.currentPosition.x <= this.targetPosition.x + 5 : this.currentPosition.x >= this.targetPosition.x - 5; case a.RIGHT: return 1 === this.movementState ? this.currentPosition.x >= this.targetPosition.x - 5 : this.currentPosition.x <= this.targetPosition.x + 5; default: return !1 } }, t.prototype.reverseMovement = function () { this.movementState = 1 === this.movementState ? 2 : 1, this.updateTargetPosition(); var e = this.getDirectionVelocity(); this.rigidBody ? this.rigidBody.linearVelocity = e : this.manualVelocity = e }, r([c({ type: cc.Enum(a) })], t.prototype, "direction", void 0), r([c({ min: 0 })], t.prototype, "speed", void 0), r([c({ min: 0 })], t.prototype, "delay", void 0), r([c({ min: 0 })], t.prototype, "distance", void 0), r([s], t) }(cc.Component); o.default = p, cc._RF.pop() }, {}], RunWith2: [function (e, t, o) { "use strict"; cc._RF.push(t, "d7b823AARFIOY++1/lxqBxY", "RunWith2"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.target = null, t.types = 0, t } return i(t, e), t.prototype.lateUpdate = function () { null != this.target && this.target.isValid && (0 == this.types ? this.node.setPosition(cc.v2(-this.target.width, 0)) : 1 == this.types && this.node.setPosition(cc.v2(-this.target.width / 2, 0))) }, r([s(cc.Node)], t.prototype, "target", void 0), r([s], t.prototype, "types", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], RunWith: [function (e, t, o) { "use strict"; cc._RF.push(t, "534d8iLWqZFF6MOrfORh2zC", "RunWith"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.target = null, t._offset = new cc.Vec3(0, 0, 0), t._isAngle = !1, t } return i(t, e), Object.defineProperty(t.prototype, "offset", { get: function () { return this._offset }, set: function (e) { this._offset.set(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isAngle", { get: function () { return this._isAngle }, set: function (e) { this._isAngle = e }, enumerable: !1, configurable: !0 }), t.prototype.lateUpdate = function () { if (null != this.target && this.target.isValid) if (this._isAngle || (this.node.angle = this.target.angle), this.node.parent == this.target.parent) this.node.position = this.target.position.add(this._offset); else { var e = new cc.Vec2(0, 0); this.target.parent.convertToWorldSpaceAR(this.target.getPosition(), e), this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e)) } }, r([s(cc.Node)], t.prototype, "target", void 0), r([s(cc.Vec3)], t.prototype, "offset", null), r([s({ serializable: !0 })], t.prototype, "_offset", void 0), r([s(cc.Boolean)], t.prototype, "isAngle", null), r([s({ serializable: !0 })], t.prototype, "_isAngle", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], SaberBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "673f8bJiyNFXLiKHDN914Qq", "SaberBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.effDis = 0, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), o ? this.user = o : this.node.group = e, this.node.parent.getComponent(cc.RigidBody) ? this._target = this.node.parent.getComponent(cc.RigidBody) : this.user && (this._target = this.user.getChildByName("body").getComponent(cc.RigidBody)), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t), "weapons1" == this.node.group ? (this.node.getChildByName("1").color = s.weaponColors.blue.colors, this.node.getChildByName("1").opacity = 150) : (this.node.getChildByName("1").color = s.weaponColors.yellow.colors, this.node.getChildByName("1").opacity = 150) }, t.prototype.setVec = function (e) { null == this.fly && (this.effDis = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1500 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.setVecP = function (e) { null == this.fly2 && (this.effDis = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly2 = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) { if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)) } } else "player2" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "player1" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(3e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { if (this.node.isValid) { if (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, l.bulletFactory.putBullet(c.BulletType.saberBall, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } null != this.fly2 && (t = cc.v2(0, 0), o = cc.v2(0, 0), this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly2 = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, l.bulletFactory.putBullet(c.BulletType.saberBall, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly2 = null, this.activeTimer = 0, this.node.destroy())) } }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ScepterBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "adb2dM/othOd5DuWO8Ivr2K", "ScepterBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.showStype = !1, t.isGate = !1, t.gateTimer = 0, t.damageAtk = 5, t.targetP = null, t.gateJumpTimer = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.group = e, this.node.getComponent(cc.PhysicsCircleCollider).apply(), this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = .5, this.betweenDis = 0, this.isGate = !1, this.gateTimer = 0, this.targetP = t, this.gateJumpTimer = 0 }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(1e3), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.fly = null, this.betweenDis = 0, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition())) } else "suverweapon" == o.node.group && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition())); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.fly = null, this.betweenDis = 0, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition()))) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group || (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition())); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.fly = null, this.betweenDis = 0, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition()))) : "suverweapon" == o.node.group && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition())) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.fly = null, this.betweenDis = 0, this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(10), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition()))) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group || (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node), c.effectManager.playEffect(c.EffectType.scepterRedBoom, t.node.getPosition()))) }, t.prototype.start = function () { }, t.prototype.lateUpdate = function (e) { this.node.isValid && (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.betweenDis += e, this.betweenDis >= 2.5 && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.scepterBall, this.node)))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ScepterCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "4f6d9tunhNHxa/VzTRPz5kS", "ScepterCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd5 = null, t.firepoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.nd5 = this.node.getChildByName("5"), this.firepoint = this.node.getChildByName("firepoint"), this.changeSkill() }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, 0 == this.SkillNumber ? this.nd5.color = c.weaponColors.red.colors : 1 == this.SkillNumber && (this.nd5.color = c.weaponColors.green.colors) }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (this.nd5.color = cc.Color.WHITE, 0 == this.SkillNumber) (t = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), t.setVec(e); else if (1 == this.SkillNumber) { var t; (t = l.bulletFactory.getBullet(this.bulletType[1], this.firepoint, this.checkName, e).getComponent("BulletBase"))._init(this.node.group, this.targetEnemy, this.human), t.setVec(e) } s.audioManager.playEffect("scepter"), this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, this.targetEnemy, this.human), n.setVec(o) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(5), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5 && (s.audioManager.playEffect("sword2"), this.effinvertal = 0, t.points[0])) { var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.AtkFrequency < .5 && (this.AtkFrequency += e), this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 3, this.skillTimer >= 3 && (this.SkillNumber = 0, this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1 }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ScieCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "f3699WfEqNNGKYFpaEIGcCD", "ScieCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = e("../HumanStates/Human"), d = e("../Collider/ScieRunCollider"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._flyV2 = null, t.AtkFrequency = 0, t.betweenDis = 0, t.angularTimer = 0, t._RinRigidBody = null, t.ndRun = null, t.circleCollider = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this.isChangeAc = !0, this.isScies = !0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._RinRigidBody = this.node.getChildByName("run").getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.ndRun = this.node.getChildByName("run"), this.circleCollider = this.ndRun.getComponent(cc.PhysicsCircleCollider), this.ndRun.getComponent(d.default).setHuman(this.human), this.changeSkill(), "weapons1" == this.node.group ? this.ChangeAc(!0) : this.ChangeAc(!1) }, t.prototype.setLimit = function (e) { this._flyV2 = e }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.ChangeAc = function (e) { null == this.fly && (this._RinRigidBody.angularVelocity = e ? 1e3 : -1e3) }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber && null == this.fly) { var t = "rebound1"; "weapons2" == this.node.group && (t = "rebound2"), this._flyV2 = e, this.ndRun.group = t, this.circleCollider.density = 10, this.circleCollider.apply(), this._flyV2.x > 0 ? this._RinRigidBody.angularVelocity = 1e3 : this._RinRigidBody.angularVelocity = -1e3, this.angularTimer = .6, this.fly = !0, this.SkillNumber = null, this.betweenDis = 0, this.attackProgress = 0 } }, t.prototype.changeSkill = function () { this.SkillNumber = 0 }, t.prototype.contactHuman = function (e) { this.AtkFrequency >= .1 && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0])) }, t.prototype.contactWeapon = function () { if (this.effinvertal >= .5) { l.audioManager.playEffect("sword2"), this.effinvertal = 0; var e = c.EffectType.playerWeaponHit; c.effectManager.playEffect(e, this.ndRun.getPosition(), this.node) } }, t.prototype.onBeginContact = function (e, t, o) { var n = o.node; s.gameConfig.suverModel ? "suverenemy" == n.group ? this.contactHuman(n, e.getWorldManifold()) : "suverweapon" == n.group && this.contactWeapon(n, e.getWorldManifold(), t) : "weapons1" == t.node.group ? "player2" == n.group ? this.contactHuman(n, e.getWorldManifold()) : "weapons2" == n.group && this.contactWeapon(n, e.getWorldManifold(), t) : "weapons2" == t.node.group && ("player1" == n.group ? this.contactHuman(n, e.getWorldManifold()) : "weapons1" == n.group && this.contactWeapon(n, e.getWorldManifold(), t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < .1 && (this.AtkFrequency += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, null != this.fly && (this.betweenDis += e, this.angularTimer > 0 && (this.angularTimer -= e, this._RinRigidBody.linearVelocity = this._flyV2.mul(400), this.angularTimer <= .1 && (this.angularTimer = 0, this._RinRigidBody.linearVelocity = cc.Vec2.ZERO)), this._flyV2.x > 0 ? this._RinRigidBody.angularVelocity = 1e3 : this._RinRigidBody.angularVelocity = -1e3, this.betweenDis >= 2 && (this.betweenDis = 0, this.human.getComponent(u.default).flyScies(!1), this.fly = null, this._flyV2 = null, this.ndRun.group = this.node.group, this.circleCollider.density = .1, this.circleCollider.apply(), this._RinRigidBody.angularVelocity < 0 ? this._RinRigidBody.angularVelocity = -1e3 : this._RinRigidBody.angularVelocity = 1e3, this._RinRigidBody.linearVelocity = cc.Vec2.ZERO)) }, r([g], t) }(p.default)); o.default = f, cc._RF.pop() }, { "../Collider/ScieRunCollider": "ScieRunCollider", "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ScieRunCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "49335u5VWtJtoszH3J47ae3", "ScieRunCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../HumanStates/Human"), s = e("../Manager/ConfigManager"), c = e("../Weapons/ScieCollider"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.enemyV3 = new cc.Vec2, t.AtkFrequency = .5, t.human = null, t } return i(t, e), t.prototype.onLoad = function () { this.AtkFrequency = .5 }, t.prototype.setHuman = function (e) { this.human = e }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("run" == this.node.name) { var i = function () { o.node.parent.getComponent(a.default) && n.AtkFrequency >= .1 && (o.node.parent.getComponent(a.default).setDamage(3), n.AtkFrequency = 0) }; "weapons1" == t.node.group || "rebound1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player2" == o.node.group || "weapons2" == o.node.group ? i() : (this.human.getComponent(l.default).flyScies(!0), this.node.parent.getComponent(c.default).angularTimer = 2) : "weapons2" != t.node.group && "rebound2" != t.node.group || (s.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player1" == o.node.group || "weapons1" == o.node.group ? i() : (this.human.getComponent(l.default).flyScies(!0), this.node.parent.getComponent(c.default).angularTimer = 2)) } }, t.prototype.onEndContact = function () { this.human.getComponent(l.default).flyScies(!1) }, t.prototype.update = function (e) { this.AtkFrequency < .1 && (this.AtkFrequency += e), "weapons2" != this.node.group && "weapons1" != this.node.group || this.human.getComponent(l.default).flyScies(!1) }, r([u], t) }(cc.Component)); o.default = d, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Weapons/ScieCollider": "ScieCollider" }], ScrollSet: [function (e, t, o) { "use strict"; cc._RF.push(t, "6dcbf5itctIXZ6dpSq2t3u+", "ScrollSet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.ScrollBarClick = !1, t.MaxMoveY = null, t.MaxMoveX = null, t.maxY = null, t.minY = null, t.minX = null, t.maxX = null, t._scrollView = null, t.scrollBarNode = null, t.BarNode = null, t.content = null, t.direction = null, t } return i(t, e), t.prototype.onLoad = function () { this._scrollView = this.node.parent.getComponent(cc.ScrollView), this.scrollBarNode = this.node, this.BarNode = this.node.getChildByName("bar"), this.content = this._scrollView.node.getChildByName("view").getChildByName("content") }, t.prototype.start = function () { var e = this; this.scheduleOnce(function () { e.direction = e.scrollBarNode.getComponent(cc.Scrollbar).direction; var t = e.scrollBarNode.convertToWorldSpaceAR(cc.v2(0, 0)), o = e.scrollBarNode.anchorY, n = e.scrollBarNode.anchorX, i = 1 - n >= n ? 1 - n : n, r = 1 - n >= n ? n : 1 - n, a = 1 - o >= o ? 1 - o : o, l = 1 - o >= o ? o : 1 - o; 1 == e.direction && (e.MaxMoveY = t.y + e.scrollBarNode.height * a - e.BarNode.height, e.maxY = t.y + e.scrollBarNode.height * a, e.minY = t.y - e.scrollBarNode.height * l, e.maxX = t.x + e.scrollBarNode.width * r, e.minX = t.x - e.scrollBarNode.width * i), e.content.on(cc.Node.EventType.SIZE_CHANGED, e._ResetMaxMove, e) }, 1) }, t.prototype._ResetMaxMove = function () { var e = this.scrollBarNode.convertToWorldSpaceAR(cc.v2(0, 0)), t = this.scrollBarNode.anchorY, o = this.scrollBarNode.anchorX, n = 1 - o >= o ? 1 - o : o, i = 1 - o >= o ? o : 1 - o, r = 1 - t >= t ? 1 - t : t, a = 1 - t >= t ? t : 1 - t; 1 == this.direction && (this.MaxMoveY = e.y + this.scrollBarNode.height * r - this.BarNode.height, this.maxY = e.y + this.scrollBarNode.height * r, this.minY = e.y - this.scrollBarNode.height * a, this.maxX = e.x + this.scrollBarNode.width * i, this.minX = e.x - this.scrollBarNode.width * n) }, t.prototype.onEnable = function () { cc.find("Canvas").on(cc.Node.EventType.TOUCH_START, this._onStartTouch, this, !0), cc.find("Canvas").on(cc.Node.EventType.TOUCH_MOVE, this._onMoveTouch, this, !0), cc.find("Canvas").on(cc.Node.EventType.TOUCH_END, this._onEndTouch, this, !0) }, t.prototype.onDisable = function () { cc.find("Canvas").off(cc.Node.EventType.TOUCH_START, this._onStartTouch, this, !0), cc.find("Canvas").off(cc.Node.EventType.TOUCH_MOVE, this._onMoveTouch, this, !0), cc.find("Canvas").off(cc.Node.EventType.TOUCH_END, this._onEndTouch, this, !0) }, t.prototype._onStartTouch = function (e) { var t = e.touch.getLocation(); t.x >= this.minX && t.x <= this.maxX && t.y >= this.minY && t.y <= this.maxY ? (this.ScrollBarClick = !0, e.stopPropagation()) : this.ScrollBarClick = !1 }, t.prototype._onMoveTouch = function (e) { var t = e.touch.getDelta(); if (1 == this.ScrollBarClick && 1 == this.direction) { var o = this.BarNode.y; this.BarNode.y += t.y; var n = this.BarNode.convertToWorldSpaceAR(cc.v2(0, 0)), i = (this.MaxMoveY - n.y) / (this.MaxMoveY - this.minY); n.y >= this.MaxMoveY ? this.BarNode.y = o : n.y <= this.minY && (this.BarNode.y = o); var r = 1 - i > 0 ? 1 - i : 0; this._scrollView.scrollTo(cc.v2(0, r)), e.stopPropagation() } }, t.prototype._onEndTouch = function () { this.ScrollBarClick = !1 }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], ShareBoom: [function (e, t, o) { "use strict"; cc._RF.push(t, "1865e+lfVJCgqxHSa1AdIX1", "ShareBoom"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../HumanStates/Human"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("../Manager/WeaponManager"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t } return i(t, e), t.prototype._init = function (e, t, o) { this.node.getComponent(cc.RigidBody) ? this._rigidBody = this.node.getComponent(cc.RigidBody) : this._rigidBody = this.node.getChildByName("body").getComponent(cc.RigidBody), o && (this.user = o), this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this.node.parent.getChildByName("1").active = !0, this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("shareBoom" == this.node.parent.name || "shareBoom2" == this.node.parent.name) { var i = function () { n.fly = null, n.fly2 = null, n.isBoom = !0, n.isTimer = 0, n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()), "suverenemy" != o.node.group && "player1" != o.node.group && "player2" != o.node.group && p.effectManager.playEffect(p.EffectType.smallBoom, t.node.getPosition()); var e = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), i = !1, r = !1; e.forEach(function (e) { var t = null; t = e.node.parent ? e.node.parent : cc.find("Canvas"); var o = e.node, l = new cc.Vec2(0, 0); if (t.convertToWorldSpaceAR(o.getPosition(), l), cc.Vec2.distance(n.enemyV3, l) <= n.atkRange) { var p = new cc.Vec2(0, 0); cc.Vec2.subtract(p, l, n.enemyV3), c.gameConfig.suverModel ? t.getComponent(a.default) && "suverenemy" == t.group && t.getComponent(a.default).setDamage(n.Atk) : "bomb2" == n.node.group ? (t.getComponent(a.default) && "player1" == e.node.group && (i || (t.getComponent(a.default).setDamage(n.Atk), i = !0)), t.getComponent(a.default) && "player2" == e.node.group && (r || (r = !0, t.getComponent(s.default)._getHumanGroup()))) : (t.getComponent(a.default) && "player2" == e.node.group && (i || (t.getComponent(a.default).setDamage(n.Atk), i = !0)), t.getComponent(a.default) && "player1" == e.node.group && (r || (r = !0, t.getComponent(s.default)._getHumanGroup()))) } }), "shareBoom2" == n.node.parent.name ? l.bulletFactory.putBullet(u.BulletType.shareBoom2, n.node.parent) : l.bulletFactory.putBullet(u.BulletType.shareBoom, n.node.parent) }, r = function () { n.fly = null, n.fly2 = null, n.isBoom = !0, n.isTimer = 0, "suverenemy" != o.node.group && "player1" != o.node.group && "player2" != o.node.group && p.effectManager.playEffect(p.EffectType.smallBoom, t.node.getPosition()), n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var e = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), i = !1, r = !1; e.forEach(function (e) { var t = null; t = e.node.parent ? e.node.parent : cc.find("Canvas"); var o = e.node, l = new cc.Vec2(0, 0); if (t.convertToWorldSpaceAR(o.getPosition(), l), cc.Vec2.distance(n.enemyV3, l) <= n.atkRange) { var p = new cc.Vec2(0, 0); cc.Vec2.subtract(p, l, n.enemyV3), c.gameConfig.suverModel ? t.getComponent(a.default) && "suverenemy" == t.group && t.getComponent(a.default).setDamage(n.Atk) : "bomb2" == n.node.group ? (t.getComponent(a.default) && "player1" == e.node.group && (i || (t.getComponent(a.default).setDamage(n.Atk), i = !0)), t.getComponent(a.default) && "player2" == e.node.group && (r || (r = !0, t.getComponent(s.default)._getHumanGroup()))) : (t.getComponent(a.default) && "player2" == e.node.group && (i || (t.getComponent(a.default).setDamage(n.Atk), i = !0)), t.getComponent(a.default) && "player1" == e.node.group && (r || (r = !0, t.getComponent(s.default)._getHumanGroup()))) } }), "shareBoom2" == n.node.parent.name ? l.bulletFactory.putBullet(u.BulletType.shareBoom2, n.node.parent) : l.bulletFactory.putBullet(u.BulletType.shareBoom, n.node.parent) }; if ("bomb1" == t.node.group) { var d = e.getWorldManifold(); c.gameConfig.suverModel ? ("suverenemy" == o.node.group ? i() : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r(), "suverweapon" == o.node.group && d.points[0] && p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(d.points[0].x - cc.winSize.width / 2, d.points[0].y - cc.winSize.height / 2))) : ("player2" == o.node.group ? i() : "weapons2" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "bomb2" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r(), "bomb2" != o.node.group && "weapons2" != o.node.group || !d.points[0] || p.effectManager.playEffect(p.EffectType.playerWeaponHit, cc.v2(d.points[0].x - cc.winSize.width / 2, d.points[0].y - cc.winSize.height / 2))) } else "bomb2" == t.node.group && (c.gameConfig.suverModel ? "suverenemy" == o.node.group ? i() : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r() : "player1" == o.node.group ? i() : "weapons1" == o.node.group ? "lancespear" != o.node.name && "lancespear2" != o.node.name && r() : "bomb1" != o.node.group && "ground" != o.node.group && "box" != o.node.group || r()) } }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.parent.isValid && this.damageInverter < .5 && (this.damageInverter += e) }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ShareBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "42217aolZxDK6+xIdEwExN0", "ShareBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Factory/BulletFactory"), l = e("../Manager/ConfigManager"), s = e("../Manager/WeaponManager"), c = e("./BulletBase"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t._dis = null, t._CheckName = null, t } return i(t, e), t.prototype._init = function (e, t, o, n) { this.activeTimer = 0, this.fly = null, this._CheckName = n, this._rigidBody = this.node.getComponent(cc.RigidBody), this.node.group = e, this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0 }, t.prototype.setVec = function (e) { if (null == this.fly) { this._dis = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(5 * this._rigidBody.getMass()), this.fly = !0; var t = cc.v2(0, 0), o = Math.atan2(e.y - t.y, e.x - t.x) * (180 / Math.PI); this.node.getChildByName("1").angle = o } }, t.prototype.setVecP = function (e) { null == this.fly2 && ("weapons1" == this.node.group ? (this.node.getChildByName("bullet").color = l.weaponColors.blue.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = l.weaponColors.blue.colors) : (this.node.getChildByName("bullet").color = l.weaponColors.red.colors, this.node.getChildByName("0").getComponent(cc.MotionStreak).color = l.weaponColors.red.colors), this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(20 * this._rigidBody.getMass()), this.fly2 = !0) }, t.prototype.onBeginContact = function () { }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.getAngle = function () { var e = this, t = cc.v2(0, 0), o = this._flyV2, n = Math.atan2(o.y - t.y, o.x - t.x) * (180 / Math.PI), i = n + 60, r = n + 120, l = n + 180, c = n + 240, p = n + 300, u = cc.v2(Math.cos(this.getRadianByAngle(n)), Math.sin(this.getRadianByAngle(n))).normalize(), d = cc.v2(Math.cos(this.getRadianByAngle(i)), Math.sin(this.getRadianByAngle(i))).normalize(), h = cc.v2(Math.cos(this.getRadianByAngle(r)), Math.sin(this.getRadianByAngle(r))).normalize(), g = cc.v2(Math.cos(this.getRadianByAngle(l)), Math.sin(this.getRadianByAngle(l))).normalize(), f = cc.v2(Math.cos(this.getRadianByAngle(c)), Math.sin(this.getRadianByAngle(c))).normalize(), y = cc.v2(Math.cos(this.getRadianByAngle(p)), Math.sin(this.getRadianByAngle(p))).normalize(), m = function (t) { var o = a.bulletFactory.getBullet(s.BulletType.normalBig, e.node, e._CheckName, cc.v2(0, 0)); o.getComponent("BulletBase")._init(e.node.group, null, e.user), o.getComponent("BulletBase").setVec(t) }; m(u), m(d), m(h), m(g), m(f), m(y) }, t.prototype.fireBullet = function () { }, t.prototype.update = function (e) { if (this.node.isValid) { if (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, this.getAngle(), a.bulletFactory.putBullet(s.BulletType.shareBullet, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } null != this.fly2 && (t = cc.v2(0, 0), o = cc.v2(0, 0), this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly2 = null, this.betweenDis = 0, "weapons1" == this.node.group ? a.bulletFactory.putBullet(s.BulletType.normal, this.node) : a.bulletFactory.putBullet(s.BulletType.normal2, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly2 = null, this.activeTimer = 0, this.node.destroy())) } }, r([u], t) }(c.default)); o.default = d, cc._RF.pop() }, { "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ShieldBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "d17356M0BpP/oeGgCd3oLHJ", "ShieldBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.damageAtk = 5, t.effinvertal = .5, t } return i(t, e), t.prototype._init = function (e, t, o) { this.damageAtk = 5, this.effinvertal = .5, this.fly = null, this.activeTimer = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._flyV2 = null, this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.group = e, "weapons1" == e ? this.node.children.forEach(function (e) { e.color = s.weaponColors.blue.colors }) : "weapons2" == e && this.node.children.forEach(function (e) { e.color = s.weaponColors.red.colors }), this.node.getComponent(cc.Collider).apply(), t && (this.targetEnemy = t) }, t.prototype.setVec = function (e) { null == this.fly && (this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.applyForceToCenter(e.mul(5e3), !0), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) { var n = e.getWorldManifold(); if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk), i.applyLinearImpulse(n.normal.mul(8e4), n.points[0], !0)) } else "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))); else "player2" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk), i.applyLinearImpulse(n.normal.mul(8e4), n.points[0], !0))) : ("bomb2" == o.node.group || "water" == o.node.group || "suverweapon" == o.node.group || "weapons2" == o.node.group || "rebound2" == o.node.group && n.points[0]) && "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))) } else "weapons2" == t.node.group && (s.gameConfig.suverModel ? (n = e.getWorldManifold(), "suverenemy" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk), i.applyLinearImpulse(n.normal.mul(8e4), n.points[0], !0))) : "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)))) : (n = e.getWorldManifold(), "player1" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (c.effectManager.playEffect(c.EffectType.playerWeaponHit, t.node.getPosition()), this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk), i.applyLinearImpulse(n.normal.mul(8e4), n.points[0], !0))) : ("bomb1" == o.node.group || "water" == o.node.group || "suverweapon" == o.node.group || "weapons1" == o.node.group || "rebound1" == o.node.group && n.points[0]) && "lancespear" != o.node.name && "lancespear2" != o.node.name && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2))))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), this.effinvertal < .5 && (this.effinvertal += e), null != this.fly && (this._rigidBody.applyForceToCenter(this._flyV2.mul(7e3), !0), this.betweenDis += e, this.betweenDis >= 2 && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(p.BulletType.shieldBullet, this.node)))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], ShieldCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "3066bdvva5Nw73KVcfg0Ey7", "ShieldCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t.LastbetweenDis = null, t._flyV2 = null, t.fireInverter = 0, t.isboomTimer = null, t.lastGroup = null, t.polygonCollider = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.fireInverter = 0, this.betweenDis = 0, this.LastbetweenDis = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint), this.polygonCollider.density = .05, this.polygonCollider.apply(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.lastGroup = this.node.group, this.changeSkill() }, t.prototype.setLimit = function () { this.revoluteJoint.enableLimit = !0 }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .5 ? 0 : 1, this.polygonCollider.density = .05, this.polygonCollider.apply() }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, e).getComponent("BulletBase"); t._init(this.node.group, this.targetEnemy, this.human), t.setVec(e) } else { this.revoluteJoint.enabled = !1, this.revoluteJoint.enableLimit = !1; var o = "rebound1"; "weapons2" == this.node.group && (o = "rebound2"), this.node.group = o, this.polygonCollider.apply(), this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fireInverter = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(400), this._rigidBody.getWorldCenter(), !0), this.fly = !0 } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function () { p.effectManager.playBigSkills(p.EffectType.bigSkill, this.node.group, this.Atk[0], this.node) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); if (this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(4e4), t.points[0], !0), this.effinvertal >= .5)) { this.effinvertal = 0; var n = p.EffectType.playerWeaponHit, i = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(n, i) } }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { s.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node, r = t.node.group; "weapons1" == r || "rebound1" == r ? c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n, t) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player2" == i.group ? this.contactHuman(i, n, t) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" != r && "rebound2" != r || (c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n, t) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player1" == i.group ? this.contactHuman(i, n, t) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { var t = cc.Vec2.ZERO, o = cc.Vec2.ZERO; this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this._rigidBody.applyTorque(120, !0); var n = t.sub(o); this.betweenDis = cc.Vec2.distance(t, o), null == this.LastbetweenDis && (this.LastbetweenDis = this.betweenDis), this._rigidBody.applyForceToCenter(n.mul(.5), !0), this.LastbetweenDis = this.betweenDis, this.fly ? this._flyV2.x > 0 ? this._rigidBody.linearVelocity.x < 0 && (this.fly = !1) : this._rigidBody.linearVelocity.x > 0 && (this.fly = !1) : this.betweenDis <= 100 && (this.fly = null, this.revoluteJoint.enabled = !0, this.revoluteJoint.enableLimit = !0, this.node.group = this.lastGroup, this.polygonCollider.apply(), this.betweenDis = 0, this.LastbetweenDis = null), this.fireInverter += e, this.fireInverter > 3 && (this.node.group = this.lastGroup, this.polygonCollider.apply(), this.fireInverter = 0, this.fly = null, this.revoluteJoint.enabled = !0, this.revoluteJoint.enableLimit = !0, this.betweenDis = 0, this.LastbetweenDis = null) } null != this.isboomTimer && (this.isboomTimer += e, this._rigidBody.applyForceToCenter(this._flyV2.mul(4e4), !0), this.isboomTimer >= 2 && (this.isboomTimer = null, this._rigidBody.fixedRotation = !1, this.revoluteJoint.anchor.x = -11, this.revoluteJoint.apply(), this.polygonCollider.density = .05, this.polygonCollider.apply())) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ShotgunCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "d32eb77zeRG66H93RlWtIeY", "ShotgunCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.reTeck = !1, t.AtkFrequency = 0, t._flyV2 = null, t.isFire = !1, t.fireInverter = 0, t.bulletNumber = 0, t.bulletNode = null, t.firepoint = null, t } return i(t, e), t.prototype._init = function () { this.isGun = !0, this.skillInverter = 1, this.effinvertal = .5, this.fly = null, this.fireInverter = 1, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.reTeck = !0, this.firepoint = this.node.getChildByName("firepoint") }, t.prototype.setLimit = function () { }, t.prototype.ChangeAc = function (e) { var t = this.node.getComponent(cc.RevoluteJoint); e ? (this.node.scaleX = 1, t.anchor.x = -13.9, t.apply()) : (this.node.scaleX = -1, t.anchor.x = 13.9, t.apply()) }, t.prototype.setBulletNode = function () { this.bulletNode = null }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype._getBigPos = function () { var e = this.node.angle - 90, t = (cc.v2(0, 0), cc.v2(0, 0), cc.v2(0, 0), e), o = e - 10, n = e + 10, i = this.getRadianByAngle(t), r = this.getRadianByAngle(o), a = this.getRadianByAngle(n); return [cc.v2(64 * Math.cos(i), 64 * Math.sin(i)).normalize(), cc.v2(64 * Math.cos(r), 64 * Math.sin(r)).normalize(), cc.v2(64 * Math.cos(a), 64 * Math.sin(a)).normalize()] }, t.prototype.MotionStrakAtk = function () { if (null != this.SkillNumber && null == this.fly) { this.SkillNumber = null; for (var e = this._getBigPos(), t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, this._flyV2).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, this._flyV2).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ShuikenBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "2d274ST7nBKArB1LT/7gZVP", "ShuikenBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("../Weapons/ShurikenCollider"), d = e("./BulletBase"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isdown = !1, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.isBoomTimers = null, t.effinvertal = 0, t.bType = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this.activeTimer = 0, this.node.group = e, this.node.getComponent(cc.PhysicsPolygonCollider).apply(), this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 1, this.effinvertal = .5, this.targetEnemy = t, this.isBoom = !1, "shuriken1" == this.node.name ? this.bType = p.BulletType.shuriken1 : "shuriken2" == this.node.name ? this.bType = p.BulletType.shuriken2 : "shuriken3" == this.node.name && (this.bType = p.BulletType.shuriken3), "weapons2" == e ? (this.node.color = s.weaponColors.yellow.colors, this.node.getChildByName("1").getComponent(cc.MotionStreak).color = s.weaponColors.yellow.colors) : (this.node.color = s.weaponColors.blue.colors, this.node.getChildByName("1").getComponent(cc.MotionStreak).color = s.weaponColors.blue.colors) }, t.prototype.setVec = function (e) { null == this.fly && (this.isdown = !1, this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 1e3, this._rigidBody.applyLinearImpulse(this._flyV2.mul(1500 * this._rigidBody.getMass()), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isBoom = !1) }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) { var n = e.getWorldManifold(); if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); this.damageInverter >= 1 && (this.damageInverter = 0, this.targetEnemy.getComponent(u.default).addDamageNumber(), o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), i.applyLinearImpulse(this._flyV2.mul(3e4 * this._rigidBody.getMass()), i.getWorldCenter(), !0), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node)) } else "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node)); else "player2" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (this.damageInverter = 0, this.targetEnemy.getComponent(u.default).addDamageNumber(), o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), i.applyLinearImpulse(this._flyV2.mul(3e4 * this._rigidBody.getMass()), i.getWorldCenter(), !0), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node))) : "weapons2" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node)) } else "weapons2" == t.node.group && (n = e.getWorldManifold(), s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (this.damageInverter = 0, this.targetEnemy.getComponent(u.default).addDamageNumber(), o.node.parent.getComponent(a.default).setDamage(this.Atk), c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), i.applyLinearImpulse(this._flyV2.mul(3e4 * this._rigidBody.getMass()), i.getWorldCenter(), !0), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node))) : "suverweapon" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node)) : "player1" == o.node.group ? (i = o.node.getComponent(cc.RigidBody), this.damageInverter >= 1 && (o.node.parent.getComponent(a.default).setDamage(this.Atk), this.damageInverter = 0, this.targetEnemy.getComponent(u.default).addDamageNumber(), c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), i.applyLinearImpulse(this._flyV2.mul(3e4 * this._rigidBody.getMass()), i.getWorldCenter(), !0), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node))) : "weapons1" == o.node.group && n.points[0] && this.effinvertal >= .5 && (this.effinvertal = 0, c.effectManager.playEffect(c.EffectType.playerWeaponHit, cc.v2(n.points[0].x - cc.winSize.width / 2, n.points[0].y - cc.winSize.height / 2)), this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node))) }, t.prototype.update = function (e) { if (this.node.isValid && (this.damageInverter < 1 && (this.damageInverter += e), null != this.fly)) { var t = cc.v2(0, 0), o = cc.v2(0, 0); this._target.getWorldPosition(t), this._rigidBody.getWorldPosition(o), this.betweenDis = cc.Vec2.distance(t, o), this.betweenDis >= this.atkRange && (this.fly = null, this.betweenDis = 0, l.bulletFactory.putBullet(this.bType, this.node)), this.activeTimer += e, this.activeTimer >= 6 && (this.fly = null, this.activeTimer = 0, this.node.destroy()) } }, r([g], t) }(d.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "../Weapons/ShurikenCollider": "ShurikenCollider", "./BulletBase": "BulletBase" }], ShurikenCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "e5bb9Nd2UlNMZrg0SfXBc88", "ShurikenCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t._flyV2 = null, t.bulletNumber = 0, t.skillTimers = 1.5, t.damageTimers = 0, t.nd1 = null, t.bg = null, t } return i(t, e), t.prototype._init = function () { this.skillTimers = 1.5, this.effinvertal = .5, this.fly = null, this.bulletNumber = 0, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.nd1 = this.node.getChildByName("1"), this.bg = this.node.getChildByName("bg"), "weapons1" == this.node.group ? this.nd1.color = s.weaponColors.blue.colors : this.nd1.color = s.weaponColors.yellow.colors, this.nd1.active = !0, this.bg.active = !0 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { this.SkillNumber = null, this._flyV2 = e; var t = this.damageTimers >= 2 ? 2 : this.damageTimers, o = l.bulletFactory.getBullet(this.bulletType[t], this.node, this.checkName, e).getComponent("BulletBase"); o._init(this.node.group, this.node, this.human), o.setVec(this._flyV2), this.nd1.active = !1, this.bg.active = !1, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[this.damageTimers >= 2 ? 2 : this.damageTimers], this.node, this.checkName, o).getComponent("BulletBase"); n._init(this.node.group, this.node, this.human), n.setVec(o) } }, t.prototype.changeSkill = function () { this.nd1.active = !0, this.bg.active = !0, 0 == this.damageTimers ? (this.nd1.width = 40, this.nd1.height = 40) : 1 == this.damageTimers ? (this.nd1.width = 70, this.nd1.height = 70) : (this.nd1.width = 100, this.nd1.height = 100) }, t.prototype.addDamageNumber = function () { this.damageTimers++, null == this.SkillNumber && (0 == this.damageTimers ? (this.nd1.width = 40, this.nd1.height = 40) : 1 == this.damageTimers ? (this.nd1.width = 70, this.nd1.height = 70) : (this.nd1.width = 90, this.nd1.height = 90)) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[3]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.CheckHuman = function () { var e = this, t = this.node.parent.convertToWorldSpaceAR(this.node.getPosition()); cc.find("Canvas").getComponentsInChildren(cc.RigidBody).forEach(function (o) { var n = null; n = o.node.parent ? o.node.parent : cc.find("Canvas"); var i = o.node, r = new cc.Vec2(0, 0); n.convertToWorldSpaceAR(i.getPosition(), r), cc.Vec2.distance(t, r) <= 130 && ("shuriken" == e.node.name ? "player2" == o.node.group && (o.applyForceToCenter(cc.Vec2.UP.mul(4e4), !0), o.node.parent.getComponent(a.default) && e.AtkFrequency >= e.damageInverter && (e.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(e.Atk[3]))) : "shuriken2" == e.node.name && "player1" == o.node.group && (o.applyForceToCenter(cc.Vec2.UP.mul(4e4), !0), o.node.parent.getComponent(a.default) && e.AtkFrequency >= e.damageInverter && (e.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(e.Atk[3])))) }) }, t.prototype.getRadianByAngle = function (e) { return Math.PI / 180 * e }, t.prototype.update = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / 2, this.skillTimer >= 2 && (this.SkillNumber = 0, this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { this.betweenDis += e, this._rigidBody.applyTorque(80, !0), this._rigidBody.angularVelocity > 0 ? this._rigidBody.angularVelocity = 100 : this._rigidBody.angularVelocity = -100; var t = this.getRadianByAngle(this.node.angle % 360), o = cc.v2(Math.cos(t), Math.sin(t)).normalize(); this._rigidBody.applyForceToCenter(o.mul(3200), !0), this.CheckHuman(), this.betweenDis >= this.skillTimers && (this.fly = null, this.betweenDis = 0, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, null != this.SkillNumber && (this.nd1.active = !0, this.bg.active = !0, this.changeSkill())) } }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], SkinsItem: [function (e, t, o) { "use strict"; cc._RF.push(t, "a71aa4x2AdD1IVKGWHKYwgm", "SkinsItem"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/localConfig"), s = e("../Manager/UserProfile"), c = e("../UI/ChooseView"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.skinSprite = null, t.headNd = null, t._views = null, t.sksName = null, t._target = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.resetIcon = function () { null != this.sksName && (s.userProfile.data.skinsUnLock[this.sksName] ? this.node.getChildByName("adLock").active = !1 : this.node.getChildByName("adLock").active = !0) }, t.prototype.Init = function (e, t, o) { if (null == e) this.skinSprite.node.active = !1, this.headNd.active = !1; else { this.skinSprite.node.active = !0, this.headNd.active = !0; var n = new cc.Color; n._val = s.userProfile.data.Allcolor1._val, "SkinsView2" == t.name && (n._val = s.userProfile.data.Allcolor2._val), this.headNd.color = n, this.skinSprite.spriteFrame = a.gameConfig.AllSkins.getSpriteFrame(e) } this.sksName = e, this._views = t, this._target = o, e && !s.userProfile.data.skinsUnLock[e] && (this.node.getChildByName("adLock").active = !0) }, t.prototype.showTips = function () { var e = this, t = l.localConfig.instance.queryByID("locs", "lowGold")[a.gameConfig.lang]; cc.assetManager.getBundle("prefabs").load("Item/Tips", cc.Prefab, function (o, n) { var i = cc.instantiate(n); i.parent = e.node.parent.parent.parent.parent.parent.parent, i.getChildByName("str").getComponent(cc.Label).string = t, cc.tween(i).set({ position: new cc.Vec3(0, 0, 0) }).to(1, { position: new cc.Vec3(0, 270, 0) }).delay(1).call(function () { i.destroy() }).union().start() }) }, t.prototype.clickEvent = function () { var e = this, t = function (t) { if (void 0 === t && (t = !1), t) { if (s.userProfile.data.gold < 300) return void e.showTips(); s.userProfile.data.gold -= 300, s.userProfile.data.skinsUnLock[e.sksName] = !0, s.userProfile.save() } e.node.getChildByName("adLock").active = !1, e._views.active = !1; var o = cc.find("Canvas/ChooseView").getComponent(c.default); o.updateGold(), o.ChangeWeapons(e._target, e.sksName, 2) }; this.node.getChildByName("adLock").active ? t(!0) : t(!1) }, r([d(cc.Sprite)], t.prototype, "skinSprite", void 0), r([d(cc.Node)], t.prototype, "headNd", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../Manager/localConfig": "localConfig", "../UI/ChooseView": "ChooseView" }], SkinsView: [function (e, t, o) { "use strict"; cc._RF.push(t, "6c47fnK6F1Cmry0wnLYPX9H", "SkinsView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../ScrollItem/SkinsItem"), l = e("./ChooseView"), s = e("../Manager/UserProfile"), c = e("../Manager/ConfigManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Content = null, t.ItemNode = null, t } return i(t, e), t.prototype.onLoad = function () { this._init() }, t.prototype.start = function () { }, t.prototype._init = function () { this.Content.destroyAllChildren(), this._AddItem() }, t.prototype.onEnable = function () { this.Content.children.length > 10 && this.Content.children.forEach(function (e) { e.getComponent(a.default).resetIcon() }) }, t.prototype._AddItem = function () { var e = this, t = cc.instantiate(this.ItemNode); t.parent = this.Content; var o = 2; "SkinsView" == this.node.name && (o = 1), t.getComponent(a.default).Init(null, this.node, o); for (var n = [], i = 0; i < 40; i++)n.push("Skin_" + i); if (n.sort(function (e, t) { var o = s.userProfile.data.skinsUnLock[e] ? 1 : 0; return (s.userProfile.data.skinsUnLock[t] ? 1 : 0) - o }), null !== c.gameConfig.lastBuySkin) { var r = "Skin_" + c.gameConfig.lastBuySkin, l = n.indexOf(r); if (-1 !== l) { var p = n.splice(l, 1)[0]; n.unshift(p) } } n.forEach(function (t) { var n = cc.instantiate(e.ItemNode); n.parent = e.Content, n.getComponent(a.default).Init(t, e.node, o) }) }, t.prototype.CloseView = function () { cc.find("Canvas/ChooseView").getComponent(l.default).CloseView(), this.node.destroy() }, r([d(cc.Node)], t.prototype, "Content", void 0), r([d(cc.Prefab)], t.prototype, "ItemNode", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../ScrollItem/SkinsItem": "SkinsItem", "./ChooseView": "ChooseView" }], SniperCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "62b571rN0BCfqfp+d05Hx72", "SniperCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.nd1 = null, t.nd2 = null, t.rond = null, t.firePoint = null, t.revoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.rond = this.node.getChildByName("rond"), this.firePoint = this.node.getChildByName("firePoint"), this.revoluteJoint = this.human.getChildByName("handL").getComponent(cc.RevoluteJoint), this.revoluteJoint.enableLimit = !1, this.revoluteJoint.apply(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.SkillNumber = 0, this.isSniper = !0, this.nd1.active = !1, this.rond.active = !1 }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { var t = l.bulletFactory.getBullet(this.bulletType[0], this.firePoint, this.checkName, cc.Vec2.ZERO), o = this.human.getChildByName("body").getComponent(cc.RigidBody); o.applyLinearImpulse(e.neg().mul(7e3), o.getWorldCenter(), !0); var n = t.getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(e), this.nd1.active = !1, this.rond.active = !1, this.nd2.active = !1, this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t], n = l.bulletFactory.getBullet(this.bulletType[0], this.firePoint, this.checkName, cc.Vec2.ZERO).getComponent("BulletBase"); n._init(this.node.group, null, this.human), n.setVec(o) } }, t.prototype.setAngle = function () { if (null != this.SkillNumber) { var e = this.nd1, t = this.rond; e.active || (e.active = !0), t.active || (t.active = !0) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0; var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.SkillNumber = 0, this.skillTimer = 0, this.nd2.active = !0, this.attackProgress = 1)) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], SnowBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "ed435pygmlHlLZwKbMoJS1V", "SnowBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/WeaponManager"), p = e("./BulletBase"), u = cc._decorator, d = u.ccclass, h = (u.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.isBoom = null, t.isTimer = 0, t.tempV3 = new cc.Vec2, t.enemyV3 = new cc.Vec2, t.endV2 = new cc.Vec2, t.isBoomTimers = null, t.damageAtk = 5, t } return i(t, e), t.prototype._init = function (e, t, o) { this.damageAtk = 5, this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.damageInverter = 0, this.targetEnemy = t, this.fly = null, this.isTimer = 0 }, t.prototype.setVec = function (e) { null == this.fly && (this.isTimer = 0, this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(4e3), this._rigidBody.getWorldCenter(), !0), this.fly = !0) }, t.prototype.onBeginContact = function (e, t, o) { null != this.fly && ("bomb1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))) : "default" != o.node.group && "water" != o.node.group && "box" != o.node.group && "ground" != o.node.group || (this.isTimer = 0, this.fly = null, this.showIce()) : "player2" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))) : "default" != o.node.group && "water" != o.node.group && "box" != o.node.group && "ground" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.isTimer = 0, this.fly = null, this.showIce()) : "bomb2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))) : "default" != o.node.group && "water" != o.node.group && "box" != o.node.group && "ground" != o.node.group || (this.isTimer = 0, this.fly = null, this.showIce()) : "player1" == o.node.group ? (o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.damageAtk))) : "default" != o.node.group && "water" != o.node.group && "box" != o.node.group && "ground" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.isTimer = 0, this.fly = null, this.showIce()))) }, t.prototype.showIce = function () { var e = "1"; "bomb2" == this.node.group && (e = "2"); var t = l.bulletFactory.getBullet(c.BulletType.IceMontagne, this.node, this.checkNames, cc.v2(0, 0)).getComponent("BulletBase"); t._init(null, this.targetEnemy, this.user, e), t.setVec(this._flyV2), "snowFlake" == this.node.name ? l.bulletFactory.putBullet(c.BulletType.SnowBullet, this.node) : l.bulletFactory.putBullet(c.BulletType.SnowBullet2, this.node) }, t.prototype.update = function (e) { this.node.parent.isValid && (this.damageInverter < .5 && (this.damageInverter += e), null != this.fly && (this.isTimer += e, this.isTimer >= 4 && (this.isTimer = 0, this.fly = null, "snowFlake" == this.node.name ? l.bulletFactory.putBullet(c.BulletType.SnowBullet, this.node) : l.bulletFactory.putBullet(c.BulletType.SnowBullet2, this.node)))) }, r([d], t) }(p.default)); o.default = h, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], SpearBallCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "6c8aerAI9FNAbvFsWvgkukj", "SpearBallCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../HumanStates/Human"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.damageInverter = .5, t } return i(t, e), t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (s.gameConfig.suverModel) { if ("suverenemy" == o.node.group && this.AtkFrequency >= this.damageInverter) { this.AtkFrequency = 0; var n = o.node.getComponent(cc.RigidBody); o.node.parent.getComponent(a.default).setDamage(5), n.angularVelocity = 0, n.linearVelocity = cc.v2(0, 0); var i = t.node.getPosition(), r = o.node.getPosition(), p = t.node.parent.convertToWorldSpaceAR(i), u = o.node.parent.convertToNodeSpaceAR(p); r.subSelf(u), n.applyLinearImpulse(r.normalize().mul(5e4), n.getWorldCenter(), !0), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).lightSprcie(.1) } } else "player2" == o.node.group && this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, n = o.node.getComponent(cc.RigidBody), o.node.parent.getComponent(a.default).setDamage(5), n.angularVelocity = 0, n.linearVelocity = cc.v2(0, 0), i = t.node.getPosition(), r = o.node.getPosition(), p = t.node.parent.convertToWorldSpaceAR(i), u = o.node.parent.convertToNodeSpaceAR(p), r.subSelf(u), n.applyLinearImpulse(r.normalize().mul(5e4), n.getWorldCenter(), !0), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).lightSprcie(.2)); else "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group && this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, n = o.node.getComponent(cc.RigidBody), o.node.parent.getComponent(a.default).setDamage(5), n.angularVelocity = 0, n.linearVelocity = cc.v2(0, 0), i = t.node.getPosition(), r = o.node.getPosition(), p = t.node.parent.convertToWorldSpaceAR(i), u = o.node.parent.convertToNodeSpaceAR(p), r.subSelf(u), n.applyLinearImpulse(r.normalize().mul(5e4), n.getWorldCenter(), !0), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).lightSprcie(.2)) : "player1" == o.node.group && this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, n = o.node.getComponent(cc.RigidBody), o.node.parent.getComponent(a.default).setDamage(5), n.angularVelocity = 0, n.linearVelocity = cc.v2(0, 0), i = t.node.getPosition(), r = o.node.getPosition(), p = t.node.parent.convertToWorldSpaceAR(i), u = o.node.parent.convertToNodeSpaceAR(p), r.subSelf(u), n.applyLinearImpulse(r.normalize().mul(5e4), n.getWorldCenter(), !0), c.effectManager.playEffect(c.EffectType.smallBoom, this.node.getPosition(), this.node.parent), o.node.parent.getComponent(l.default) && o.node.parent.getComponent(l.default).lightSprcie(.2))) }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e) }, r([u], t) }(cc.Component)); o.default = d, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager" }], SpearCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "d93a7R3oFNCX78MyJvzwY78", "SpearCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.angularTimer = 0, t.nd1 = null, t.nd2 = null, t.nd21 = null, t.nd202 = null, t.motionStreak0 = null, t.motionStreak2 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0; var e = Math.random(); this.SkillNumber = e > .5 ? 0 : 1, this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.nd21 = this.nd2.getChildByName("1"), this.nd202 = this.nd2.getChildByName("0").getChildByName("2"), this.motionStreak0 = this.nd2.getChildByName("0").getComponent(cc.MotionStreak), this.motionStreak2 = this.nd2.getChildByName("2").getComponent(cc.MotionStreak), 0 == this.SkillNumber ? ("weapons2" == this.node.group ? this.nd1.color = c.weaponColors.yellow.colors : this.nd1.color = c.weaponColors.blue.colors, this.nd2.active = !1) : (this.nd1.color = cc.Color.BLACK, this.nd2.active = !0, this.motionStreak0.enabled = !1, this.motionStreak2.enabled = !1), this.nd202.active = !1 }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; p.effectManager.playSwordAce("StickMan1" == this.human.name ? p.EffectType.bigSkillSwordAce : p.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) { var t = this.nd1.getPosition(); (o = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, t).getComponent("BulletBase"))._init(this.node.group), o.setVecP(e), this.nd1.color = cc.Color.BLACK } else if (1 == this.SkillNumber) null == this.fly && (this.nd21.active = !1, this.motionStreak0.enabled = !0, this.nd202.active = !0, this.motionStreak2.enabled = !0, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fly = !0); else { var o; t = this.nd1.getPosition(), (o = l.bulletFactory.getBullet(this.bulletType[0], this.node, this.checkName, t).getComponent("BulletBase"))._init(this.node.group), o.setVecP(e), this.nd1.color = cc.Color.BLACK } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); if (this.AtkFrequency >= this.damageInverter) { this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[this.SkillNumber]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0); var n = p.EffectType.playerWeaponHit; p.effectManager.playEffect(n, this.node.getPosition(), this.node.parent) } }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, s.audioManager.playEffect("sword2"); var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n, t) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons1" == t.node.group ? "player2" == i.group ? this.contactHuman(i, n, t) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && ("player1" == i.group ? this.contactHuman(i, n, t) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber) { if (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter) { var t = Math.random(); this.SkillNumber = t > .5 ? 0 : 1, this.skillTimer = 0, this.attackProgress = 1, 0 == this.SkillNumber ? ("weapons2" == this.node.group ? this.nd1.color = c.weaponColors.yellow.colors : this.nd1.color = c.weaponColors.blue.colors, this.nd2.active = !1) : (this.nd1.color = cc.Color.BLACK, this.nd2.active = !0, this.motionStreak0.enabled = !1, this.motionStreak2.enabled = !1) } } else this.attackProgress = 1; this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly && (this._rigidBody.applyTorque(6e4, !0), this.fly && (this.angularTimer += e, this.angularTimer >= 2.5 && (this.fly = null, this.angularTimer = 0, this.nd21.active = !0, this.nd202.active = !1, this.nd2.active = !1))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], StartView: [function (e, t, o) { "use strict"; cc._RF.push(t, "5b6e9BuB3xE4Y8+Nh+zPL/s", "StartView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/localConfig"), s = e("../scenes/Games"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.nd1 = null, t.nd2 = null, t.nd1Lbl = null, t.nd2Lbl = null, t } return i(t, e), t.prototype.onEnable = function () { var e = this; this.nd1 = this.node.getChildByName("1"), this.nd2 = this.node.getChildByName("2"), this.nd1Lbl = this.nd1.getComponent(cc.Label), this.nd2Lbl = this.nd2.getComponent(cc.Label), this.nd1Lbl.string = "3", this.nd2Lbl.string = "2", cc.tween(this.nd1).set({ scale: 3, active: !0 }).to(.25, { scale: 1 }).delay(.25).call(function () { e.show2(), e.nd1.active = !1, e.nd1Lbl.string = "1", e.nd1.scale = 1 }).union().start() }, t.prototype.show2 = function () { var e = this; cc.tween(this.nd2).set({ scale: 3, active: !0 }).to(.25, { scale: 1 }).delay(.25).call(function () { e.show1(), e.nd2.active = !1; var t = l.localConfig.instance.queryByID("locs", "fight"); e.nd2Lbl.string = t[a.gameConfig.lang], e.nd2.scale = 1 }).union().start() }, t.prototype.show1 = function () { var e = this; cc.tween(this.nd1).set({ scale: 3, active: !0 }).to(.25, { scale: 1 }).delay(.25).call(function () { e.showGo(), e.nd1.active = !1 }).union().start() }, t.prototype.showGo = function () { var e = this; cc.tween(this.nd2).set({ scale: 3, active: !0 }).to(.25, { scale: 1 }).delay(.25).call(function () { a.gameConfig.suverModel || (cc.find("Canvas").getComponent(s.default).player.getChildByName("Centers").getChildByName("number").active = !1, cc.find("Canvas").getComponent(s.default).enemy.getChildByName("Centers").getChildByName("number").active = !1), e.nd2.active = !1, e.node.active = !1 }).union().start() }, r([p], t) }(cc.Component)); o.default = u, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/localConfig": "localConfig", "../scenes/Games": "Games" }], SucettlCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "2aac1MuEstKIbrWaGc0FHD9", "SucettlCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = e("../HumanStates/Human"), d = e("../Factory/BulletFactory"), h = cc._decorator, g = h.ccclass, f = (h.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._flyV2 = null, t.nextVec = 0, t.invtNumber = 0, t.AtkFrequency = 0, t.states = 1, t.groundBody = !1, t.isFire = !1, t._groups = null, t.effinvertal = 0, t.firepoint = null, t.runNode = null, t.fireNode = null, t.polygonCollider = null, t.motorJoint = null, t.bodyBoxCollider = null, t.handRBoxCollider = null, t.shoulderRBoxCollider = null, t.handRRevoluteJoint = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this.invtNumber = 5, this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._groups = this.node.group, this.states = 1, this.firepoint = this.node.getChildByName("firepoint"), this.runNode = this.node.getChildByName("run"), this.fireNode = this.node.getChildByName("fire"), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.motorJoint = this.node.getComponent(cc.MotorJoint), this.bodyBoxCollider = this.human.getChildByName("body").getComponent(cc.PhysicsBoxCollider), this.handRBoxCollider = this.human.getChildByName("handR").getComponent(cc.PhysicsBoxCollider), this.shoulderRBoxCollider = this.human.getChildByName("shoulderR").getComponent(cc.PhysicsBoxCollider), this.handRRevoluteJoint = this.human.getChildByName("handR").getComponent(cc.RevoluteJoint), this.changeSkill() }, t.prototype.changeSkill = function () { this.groundBody = !1, this.isFire = !1, this.SkillNumber = 1 }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.MotionStrakAtk = function (e) { null != this.SkillNumber && null == this.fly && this.invtNumber >= 5 && (this.invtNumber = 0, this.nextVec = 0, this.runNode.active = !0, this.groundBody = !1, this.isFire = !1, this.polygonCollider.density = 20, this.polygonCollider.apply(), this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = this._flyV2.mul(2e3), this.fly = !0, this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); if (this.AtkFrequency >= this.damageInverter) { if (this.AtkFrequency = 0, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0), this.effinvertal >= .5) { this.effinvertal = 0; var n = c.EffectType.playerWeaponHit, i = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(n, i) } e.parent.getComponent(a.default).setDamage(this.Atk[0]), null == this.fly || this.groundBody || this.isFire || this.changeType(e) } }, t.prototype.contactWeapon = function (e, t) { if (null == this.fly || this.groundBody || this.isFire || this.changeFire(), this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = c.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { if (!this.groundBody && !this.isFire) { var n = e.getWorldManifold(), i = o.node; "weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n, t) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player2" == i.group ? this.contactHuman(i, n, t) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n, t) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player1" == i.group ? this.contactHuman(i, n, t) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) } }, t.prototype.changeType = function (e) { this.polygonCollider.density = 1, this.polygonCollider.apply(), this.groundBody = !0, this.nextVec = 0, this.fly = null, e.parent.getComponent(u.default).setForces(!0), this.runNode.active = !1, this.motorJoint.enabled = !0, this.motorJoint.connectedBody = e.parent.getChildByName("body").getComponent(cc.RigidBody), this.motorJoint.apply(), this.bodyBoxCollider.density = 50, this.bodyBoxCollider.apply(), this.handRRevoluteJoint.enableLimit = !0, this.handRRevoluteJoint.apply(), this.handRBoxCollider.density = 3, this.handRBoxCollider.apply(), this.shoulderRBoxCollider.density = 5, this.shoulderRBoxCollider.apply(), this.targetEnemy.children.forEach(function (e) { e.getComponent(cc.Collider) && (e.group = "body1", e.getComponent(cc.Collider).apply()) }), this.targetEnemy.getChildByName("handR").children.forEach(function (e) { e.getComponent(cc.Collider) && (e.group = "body1", e.getComponent(cc.Collider).apply()) }) }, t.prototype.changeFire = function () { this.isFire = !0, this.nextVec = 0, this.fly = null, this.invtNumber = 5, this.runNode.active = !1, this.fireNode.active = !0, this._target.fixedRotation = !0 }, t.prototype._fire = function () { var e = d.bulletFactory.getBullet(this.bulletType[0], this.firepoint, this.checkName, cc.Vec2.ZERO); if (e) { var t = e.getComponent("BulletBase"); t._init(this.node.group, null, this.human), t.setVec(this._flyV2), this._target.fixedRotation = !1 } }, t.prototype.update = function (e) { if (null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.changeSkill(), this.attackProgress = 1)) : this.attackProgress = 1, this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly && (this.nextVec += e, this.nextVec >= .6 && (this.states = 2, this.nextVec = 0, this.fly = null, this.invtNumber = 5, this._rigidBody.linearVelocity = cc.Vec2.ZERO, this.runNode.active = !1, this.polygonCollider.density = .05, this.polygonCollider.apply())), this.groundBody && (this._rigidBody.applyTorque(3e6, !0), this.nextVec += e, this.nextVec >= 2)) { this.nextVec = 0, this.groundBody = !1, this.fly = null, this.invtNumber = 5, this.SkillNumber = null, this.targetEnemy.getComponent(u.default).setForces(!1); var t = "player2", o = "weapons2"; "weapons2" == this._groups && (t = "player1", o = "weapons1"), this.targetEnemy.children.forEach(function (e) { e.getComponent(cc.Collider) && (e.group = t, e.getComponent(cc.Collider).apply()) }), this.targetEnemy.getChildByName("handR").children.forEach(function (e) { e.getComponent(cc.Collider) && (e.group = o, e.getComponent(cc.Collider).apply()) }), this.motorJoint.enabled = !1, this.motorJoint.connectedBody = null, this.motorJoint.apply(), this.bodyBoxCollider.density = 3, this.bodyBoxCollider.apply(), this.handRRevoluteJoint.enableLimit = !1, this.handRRevoluteJoint.apply(), this.handRBoxCollider.density = .5, this.handRBoxCollider.apply(), this.shoulderRBoxCollider.density = 1, this.shoulderRBoxCollider.apply(), this.polygonCollider.density = .05, this.polygonCollider.apply() } this.isFire && (this.human.getChildByName("body").getComponent(cc.RigidBody).applyForceToCenter(this._flyV2.neg().mul(1e5), !0), this._rigidBody.fixedRotation = !0, this.nextVec += e, this.nextVec >= 1 && (this._fire(), this._rigidBody.fixedRotation = !1, this.isFire = !1, this.nextVec = 0, this.fireNode.active = !1, this.polygonCollider.density = .05, this.polygonCollider.apply())) }, r([g], t) }(p.default)); o.default = f, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../HumanStates/Human": "Human", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], SuverAiWeaponsCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "287cbe60eNBqbABT21WWhv5", "SuverAiWeaponsCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("./Weapon"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 1, this._rigidBody = this.node.getComponent(cc.RigidBody), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0 }, t.prototype.onBeginContact = function (e, t, o) { if ("suverweapon" == t.node.group) { var n = e.getWorldManifold(); if ("player1" == o.node.group) { var i = o.node.getComponent(cc.RigidBody); this.AtkFrequency >= 1 && (this.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(s.gameConfig.enemyAtk), i.angularVelocity = 0, i.linearVelocity = cc.Vec2.ZERO, n.normal && n.points[0] && i.applyLinearImpulse(n.normal.mul(2e4), n.points[0], !0)) } else "weapons1" == o.node.group && l.audioManager.playEffect("sword2") } }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < 1 && (this.AtkFrequency += e) }, r([u], t) }(c.default)); o.default = d, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "./Weapon": "Weapon" }], SwordAce: [function (e, t, o) { "use strict"; cc._RF.push(t, "84942x0BndI9r+TZSh+bfFH", "SwordAce"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/ConfigManager"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Atk = 0, t.damageInverter = 0, t.fly = null, t.fly2 = null, t._flyV2 = null, t.isTimer = 0, t } return i(t, e), t.prototype.setVec = function (e, t) { this.Atk = t, this._rigidBody = this.node.getComponent(cc.RigidBody), this.isTimer = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(1200); var o = Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI); this.node.angle = o, this.node.active = !0, this.fly = !0 }, t.prototype.onBeginContact = function (e, t, o) { if ("weapons1" == t.node.group) if (l.gameConfig.suverModel) { if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)) } } else "player2" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))); else "weapons2" == t.node.group && (l.gameConfig.suverModel ? "suverenemy" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0))) : "player1" == o.node.group && (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .1 && (this.damageInverter = 0, o.node.parent.getComponent(a.default).setDamage(this.Atk), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0)))) }, t.prototype.update = function (e) { this.node.isValid && (this.damageInverter < .1 && (this.damageInverter += e), null != this.fly && (this.isTimer += e, this.isTimer >= 4 && (this.fly = null, this.isTimer = 0, this.node.destroy()))) }, r([c], t) }(cc.Component)); o.default = p, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/ConfigManager": "ConfigManager" }], SwordCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "4f6c1xIfXxIGJxqP9scqetu", "SwordCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/AudioManager"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("./Weapon"), u = cc._decorator, d = u.ccclass, h = u.property, g = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.eneryBar = null, t._flyV2 = null, t.AtkFrequency = 0, t.nd0 = null, t.polygonCollider = null, t.barNode = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.AtkFrequency = 0, this._progress = this.eneryBar.getComponent(cc.ProgressBar), this.fly = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.nd0 = this.node.getChildByName("0"), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.barNode = this.eneryBar.getChildByName("bar"), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.attackProgress = 1, this._progress.progress = 1 }, t.prototype.MotionStrakAtk = function (e) { null == this.fly && this._progress.progress >= 1 && (this.polygonCollider.density = 20, this.polygonCollider.apply(), this.nd0.active = !0, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.fly = !0, this.SkillNumber = null, this.attackProgress = 0) }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; c.effectManager.playSwordAce("StickMan1" == this.human.name ? c.EffectType.bigSkillSwordAce : c.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); this.AtkFrequency >= this.damageInverter && (this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(2e4), t.points[0], !0)) }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { this.effinvertal = 0, l.audioManager.playEffect("sword2"); var o = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); c.effectManager.playEffect(c.EffectType.playerWeaponHit, o) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; "weapons1" == t.node.group ? s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { this.effinvertal < .5 && (this.effinvertal += e), this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly ? (this._rigidBody.applyForceToCenter(this._flyV2.mul(2300 * this._rigidBody.getMass()), !0), this._progress.progress -= e, this._progress.progress <= 0 && (this.fly = null, this.nd0.active = !1, this._rigidBody.angularVelocity = 0, this.polygonCollider.density = .05, this.polygonCollider.apply())) : this._progress.progress < 1 ? (this._progress.progress += .004, this.attackProgress = this._progress.progress) : this.attackProgress = 1 }, r([h(cc.Node)], t.prototype, "eneryBar", void 0), r([d], t) }(p.default); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], ThorHammer: [function (e, t, o) { "use strict"; cc._RF.push(t, "185d1LhohFJEa9g8oR+3vvI", "ThorHammer"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/AudioManager"), c = e("../Manager/ConfigManager"), p = e("../Manager/EffectManager"), u = e("./Weapon"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.AtkFrequency = 0, t.betweenDis = 0, t.LastbetweenDis = null, t._flyV2 = null, t.isboomTimer = null, t.polygonCollider = null, t.revoluteJoint = null, t.boomNode = null, t.nd1 = null, t } return i(t, e), t.prototype._init = function () { this.effinvertal = .5, this.fly = null, this.betweenDis = 0, this.LastbetweenDis = null, this._rigidBody = this.node.getComponent(cc.RigidBody), this._target = this.human.getChildByName("handR").getComponent(cc.RigidBody), this.polygonCollider = this.node.getComponent(cc.PhysicsPolygonCollider), this.revoluteJoint = this.node.getComponent(cc.RevoluteJoint), this.boomNode = this.node.getChildByName("boom"), this.nd1 = this.node.getChildByName("1"), this.polygonCollider.density = .05, this.polygonCollider.apply(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this.AtkFrequency = 0, this.changeSkill() }, t.prototype.setLimit = function () { this.revoluteJoint.enableLimit = !0 }, t.prototype.changeSkill = function () { var e = Math.random(); this.SkillNumber = e <= .3 ? 0 : e > .3 && e <= .6 ? 1 : 2, this.polygonCollider.density = .05, this.polygonCollider.apply() }, t.prototype.MotionStrakAtk = function (e) { if (null != this.SkillNumber) { if (0 == this.SkillNumber) this.revoluteJoint.enabled = !1, this.revoluteJoint.enableLimit = !1, this._flyV2 = e.normalize(), this._rigidBody.linearVelocity = cc.Vec2.ZERO, this._rigidBody.angularVelocity = 0, this._rigidBody.applyLinearImpulse(this._flyV2.mul(600), this._rigidBody.getWorldCenter(), !0), this.fly = !0; else if (1 == this.SkillNumber) this.polygonCollider.density = 20, this.polygonCollider.apply(), this._flyV2 = e.normalize(), this._rigidBody.applyLinearImpulse(this._flyV2.mul(1e5), this._rigidBody.getWorldCenter(), !0), this.fly = !0, this.isboomTimer = 0; else { var t = e, o = l.bulletFactory.getBullet(this.bulletType[2], this.node, this.checkName, cc.v2(0, 0)).getComponent("BulletBase"); o._init(this.node.group, this.targetEnemy, this.human), o.setVec(t) } this.SkillNumber = null, this.attackProgress = 0 } }, t.prototype.BigDamage = function (e) { for (var t = 0; t < e.length; t++) { var o = e[t]; p.effectManager.playSwordAce("StickMan1" == this.human.name ? p.EffectType.bigSkillSwordAce : p.EffectType.bigSkillSwordAce2, this.node, this.node.getPosition(), o, this.Atk[0]) } }, t.prototype.contactHuman = function (e, t) { var o = e.getComponent(cc.RigidBody); if (this.AtkFrequency >= this.damageInverter) { this.AtkFrequency = 0, e.parent.getComponent(a.default).setDamage(this.Atk[0]), o.angularVelocity = 0, o.linearVelocity = cc.Vec2.ZERO, t.normal && t.points[0] && o.applyLinearImpulse(t.normal.mul(4e4), t.points[0], !0); var n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); null != this.fly ? this.effinvertal >= .5 && (this.effinvertal = 0) : this.effinvertal >= .5 && (this.effinvertal = 0, p.effectManager.playEffect(p.EffectType.playerWeaponHit, n)) } }, t.prototype.contactWeapon = function (e, t) { if (this.effinvertal >= .5) { s.audioManager.playEffect("sword2"), this.effinvertal = 0; var o = p.EffectType.playerWeaponHit, n = cc.v2(t.points[0].x - cc.winSize.width / 2, t.points[0].y - cc.winSize.height / 2); p.effectManager.playEffect(o, n) } }, t.prototype.onBeginContact = function (e, t, o) { var n = e.getWorldManifold(), i = o.node; "weapons1" == t.node.group ? c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player2" == i.group ? this.contactHuman(i, n) : "weapons2" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "weapons2" == t.node.group && (c.gameConfig.suverModel ? "suverenemy" == i.group ? this.contactHuman(i, n) : "suverweapon" == i.group && n.points[0] && this.contactWeapon(i, n, t) : "player1" == i.group ? this.contactHuman(i, n) : "weapons1" == i.group && n.points[0] && this.contactWeapon(i, n, t)) }, t.prototype.update = function (e) { var t = this; if (this.effinvertal < .5 && (this.effinvertal += e), null == this.SkillNumber ? (this.skillTimer += e, this.attackProgress = this.skillTimer / this.skillInverter, this.skillTimer >= this.skillInverter && (this.skillTimer = 0, this.attackProgress = 1, this.fly = null, this.changeSkill())) : this.attackProgress = 1, this.AtkFrequency < this.damageInverter && (this.AtkFrequency += e), null != this.fly) { var o = cc.v2(0, 0), n = cc.v2(0, 0); this._target.getWorldPosition(o), this._rigidBody.getWorldPosition(n), this._rigidBody.applyTorque(120, !0); var i = o.sub(n); this.betweenDis = cc.Vec2.distance(o, n); var r = 1.1; null == this.LastbetweenDis ? this.LastbetweenDis = this.betweenDis : this.LastbetweenDis - this.betweenDis < 0 && (r = .8), this._rigidBody.applyForceToCenter(i.mul(r), !0), this.LastbetweenDis = this.betweenDis, this.fly ? this._flyV2.x > 0 ? this._rigidBody.linearVelocity.x < 0 && (this.fly = !1) : this._rigidBody.linearVelocity.x > 0 && (this.fly = !1) : this.betweenDis <= 300 && (this.fly = null, this.revoluteJoint.enabled = !0, this.betweenDis = 0, this.LastbetweenDis = null) } null != this.isboomTimer && (this.isboomTimer += e, this.isboomTimer >= .5 && (this.isboomTimer = null, this.checkPos(), this.polygonCollider.density = .05, this.polygonCollider.apply(), this.boomNode.setPosition(this.nd1.getPosition()), cc.tween(this.boomNode).set({ scale: 0, active: !0 }).to(.3, { scale: 1 }).call(function () { t.checkPos(), t.boomNode.active = !1 }).union().start())) }, t.prototype.checkPos = function () { var e = this, t = this.node.convertToWorldSpaceAR(this.boomNode.getPosition()), o = cc.find("Canvas").getComponentsInChildren(cc.RigidBody), n = !1; o.forEach(function (o) { var i = null; i = o.node.parent ? o.node.parent : cc.find("Canvas"); var r = o.node, l = new cc.Vec2(0, 0); if (i.convertToWorldSpaceAR(r.getPosition(), l), cc.Vec2.distance(t, l) <= 350) { var s = new cc.Vec2(0, 0); cc.Vec2.subtract(s, l, t); var p = i.getComponent(a.default), u = o.node.group; c.gameConfig.suverModel ? (p && "suverenemy" == i.group && p.setDamage(e.Atk[0]), "rebound1" != u && "rebound2" != u && "ground" != u && "box" != u && "player1" != u && "player2" != u && "weapons1" != u && "weapons2" != u && o.applyLinearImpulse(s.normalize().mul(1e3 * o.getMass()), o.getWorldCenter(), !0)) : "weapons2" == e.node.group ? (p && "player1" == u && (n || (p.setDamage(e.Atk[0]), n = !0)), "rebound1" != u && "rebound2" != u && "ground" != u && "box" != u && "player2" != u && "weapons2" != u && o.applyLinearImpulse(s.normalize().mul(1e3 * o.getMass()), o.getWorldCenter(), !0)) : (p && "player2" == u && (n || (p.setDamage(e.Atk[0]), n = !0)), "rebound1" != u && "rebound2" != u && "ground" != u && "box" != u && "player1" != u && "weapons1" != u && o.applyLinearImpulse(s.normalize().mul(1e3 * o.getMass()), o.getWorldCenter(), !0)) } }) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "./Weapon": "Weapon" }], TipsManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "347ceSv/rlFxotFNmv7ALdw", "TipsManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.tipsManager = void 0; var i = e("./ConfigManager"), r = cc._decorator, a = r.ccclass, l = (r.property, function () { function e() { this._tips = [], this._tipsPool = new cc.NodePool } return e.prototype.createPool = function () { for (var e = this, t = 0; t < 5; t++)cc.assetManager.getBundle("prefabs").load("Item/Tips", cc.Prefab, function (t, o) { var n = cc.instantiate(o); e._tipsPool.put(n) }) }, e.prototype.ShowTips = function (e, t, o) { var n = this; if (void 0 === t && (t = null), void 0 === o && (o = 2), !i.gameConfig.isShowFinishView) if (this._tipsPool.size() > 0) { var r = this._tipsPool.get(); r.parent = cc.find("Canvas"), r.getChildByName("str").getComponent(cc.Label).string = e, cc.tween(r).set({ position: new cc.Vec3(0, 0, 0) }).to(1, { position: new cc.Vec3(0, 270, 0) }).delay(o).call(function () { n._tipsPool.put(r) }).union().start() } else cc.assetManager.getBundle("prefabs").load("Item/Tips", cc.Prefab, function (t, i) { var r = cc.instantiate(i); r.parent = cc.find("Canvas"), r.getChildByName("str").getComponent(cc.Label).string = e, cc.tween(r).set({ position: new cc.Vec3(0, 0, 0) }).to(1, { position: new cc.Vec3(0, 270, 0) }).delay(o).call(function () { n._tipsPool.put(r) }).union().start() }) }, e.prototype.clearPool = function () { this._tipsPool.clear() }, n([a], e) }()); o.default = l, o.tipsManager = new l, cc._RF.pop() }, { "./ConfigManager": "ConfigManager" }], Tips: [function (e, t, o) { "use strict"; cc._RF.push(t, "86fdeHmFYhFjKMDtN9YCqfx", "Tips"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.label = null, t.text = "hello", t } return i(t, e), t.prototype.start = function () { }, r([s(cc.Label)], t.prototype, "label", void 0), r([s], t.prototype, "text", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], TranslateLbl: [function (e, t, o) { "use strict"; cc._RF.push(t, "b0fcbNlLfpGKJF2Oq8KeTxl", "TranslateLbl"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("./ConfigManager"), l = e("./localConfig"), s = cc._decorator, c = s.ccclass, p = s.property, u = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.locKey = "", t } return i(t, e), t.prototype.onLoad = function () { var e = this.getComponent(cc.Label), t = l.localConfig.instance.queryByID("locs", this.locKey); e.string = t[a.gameConfig.lang] }, r([p({})], t.prototype, "locKey", void 0), r([c], t) }(cc.Component); o.default = u, cc._RF.pop() }, { "./ConfigManager": "ConfigManager", "./localConfig": "localConfig" }], TurretBullet: [function (e, t, o) { "use strict"; cc._RF.push(t, "74cb1KTq1tPh5TIOn8U0J3D", "TurretBullet"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.force = 0, t.speed = 1e3, t._dir = cc.v2(1, 0), t.dirX = 1, t.dirY = 0, t } return i(t, e), t.prototype.start = function () { cc.tween(this.node).to(.02, { scale: 1 }).start() }, t.prototype.setDirection = function (e, t) { e && (this._dir = e.normalize(), this.dirX = this._dir.x, this.dirY = this._dir.y), "number" == typeof t && (this.force = t) }, t.prototype.update = function (e) { var t = cc.misc.degreesToRadians(this.node.angle), o = this._dir ? this._dir : cc.v2(Math.cos(t), Math.sin(t)); this.node.setPosition(this.node.x + o.x * this.speed * e, this.node.y + o.y * this.speed * e) }, t.prototype.isPlayerCollider = function (e) { var t = e.node.group; return "player1" === t || "player2" === t || "suverenemy" === t }, t.prototype.applyImpulse = function (e) { if (e && e.isValid) { var t = e.getComponent(cc.RigidBody); if (t) { var o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0), i = this.node.getComponent(cc.RigidBody); if (i) i.getWorldPosition(n); else { var r = this.node.convertToWorldSpaceAR(cc.v2(0, 0)); n = cc.v2(r.x, r.y) } var a = new cc.Vec2(0, 0); cc.Vec2.subtract(a, o, n); var l = Math.abs(a.len()), s = Math.max(1, this.node.width), c = t.getMass(), p = cc.v2(this.dirX, this.dirY).normalize().mul(Math.abs(s / 2 - l) * c * Math.max(1, this.force)); p = p.mul(60), t.applyForceToCenter(p, !0) } } }, t.prototype.onBeginContact = function (e, t, o) { if ("ground" != o.node.group) { if (this.isPlayerCollider(o)) { var n = o.node.parent; if (n && n.isValid) { var i = n.getChildByName("body"); i && (this.applyImpulse(i), this.node.destroy()) } } } else this.node.destroy() }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], Turret: [function (e, t, o) { "use strict"; cc._RF.push(t, "9c96e8+ALBGAJAr7YnJniIp", "Turret"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, a = this && this.__read || function (e, t) { var o = "function" == typeof Symbol && e[Symbol.iterator]; if (!o) return e; var n, i, r = o.call(e), a = []; try { for (; (void 0 === t || t-- > 0) && !(n = r.next()).done;)a.push(n.value) } catch (l) { i = { error: l } } finally { try { n && !n.done && (o = r.return) && o.call(r) } finally { if (i) throw i.error } } return a }, l = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(a(arguments[t])); return e }; Object.defineProperty(o, "__esModule", { value: !0 }); var s = e("../scenes/Games"), c = e("../Manager/ConfigManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.isFirstPlayer = !1, t.force = 0, t.turret_front = null, t.shotPoint = null, t.games = null, t.currentTarget = null, t.isStart = !1, t.fireTimer = 0, t.fireInterval = 3, t.bulletPrefab = null, t.changeTargetTimer = 0, t.changeTargetInterval = 1, t } return i(t, e), t.prototype.onLoad = function () { var e = this; this.fireInterval = Math.random() + 3, cc.assetManager.getBundle("prefabs").load("mapElements/turretBullet", cc.Prefab, function (t, o) { e.bulletPrefab = o }) }, t.prototype.start = function () { var e = this; this.scheduleOnce(function () { e.initTurret() }, .5) }, t.prototype._pickFirstSuverEnemy = function () { for (var e = l(this.games.suverEnemy1, this.games.suverEnemy2, this.games.suverEnemy3), t = 0; t < e.length; t++) { var o = e[t]; if (o && o.isValid && o.activeInHierarchy) return o.getChildByName("body") } return null }, t.prototype._resolveTargetNode = function () { if (this.isFirstPlayer) return this.games.player ? this.games.player.getChildByName("body") : null; if (3 == c.gameConfig.gameChooseViewNumber) { var e = this._pickFirstSuverEnemy(); if (e) return e } return this.games.enemy ? this.games.enemy.getChildByName("body") : null }, t.prototype.initTurret = function () { this.currentTarget = this._resolveTargetNode(), this.isStart = !0 }, t.prototype._rotateFrontTo = function (e) { if (this.turret_front && e && this.turret_front.isValid && e.isValid) { var t = this.turret_front.parent.convertToWorldSpaceAR(cc.v2(0, 0)), o = e.convertToWorldSpaceAR(cc.v2(0, 0)).sub(t), n = Math.atan2(o.y, o.x), i = cc.misc.radiansToDegrees(n); this.turret_front.angle = i } }, t.prototype.fire = function () { if (this.bulletPrefab) { var e = cc.instantiate(this.bulletPrefab); e.parent = this.node; var t = this.turret_front.angle, o = cc.misc.degreesToRadians(t), n = cc.v2(Math.cos(o), Math.sin(o)), i = this.turret_front.getPosition(), r = cc.v2(90 * n.x, 90 * n.y); e.setPosition(i.x + r.x, i.y + r.y), e.angle = t; var a = e.getComponent("TurretBullet"); a && a.setDirection ? a.setDirection(n, this.force) : a && (a.force = this.force) } }, t.prototype.update = function (e) { this.isStart && (this._rotateFrontTo(this.currentTarget), this.fireTimer += e, this.fireTimer >= this.fireInterval && (this.fireInterval = Math.random() + 3, this.fireTimer = 0, this.fire()), 3 == c.gameConfig.gameChooseViewNumber && (this.changeTargetTimer += e, this.changeTargetTimer >= this.changeTargetInterval && (this.changeTargetTimer = 0, this.currentTarget = this._resolveTargetNode()))) }, r([d], t.prototype, "isFirstPlayer", void 0), r([d], t.prototype, "force", void 0), r([d(cc.Node)], t.prototype, "turret_front", void 0), r([d(cc.Node)], t.prototype, "shotPoint", void 0), r([d(s.default)], t.prototype, "games", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../scenes/Games": "Games" }], TutorText: [function (e, t, o) { "use strict"; cc._RF.push(t, "da140LckxpKM6QgqGLTf80J", "TutorText"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/ConfigManager"), l = e("../Manager/localConfig"), s = cc._decorator, c = s.ccclass, p = s.property, u = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.label = null, t.isTutor1 = !0, t } return i(t, e), t.prototype.onLoad = function () { var e = l.localConfig.instance.queryByID("locs", "skill"), t = e[a.gameConfig.lang], o = (e = l.localConfig.instance.queryByID("locs", "super"))[a.gameConfig.lang], n = (e = l.localConfig.instance.queryByID("locs", "jump"))[a.gameConfig.lang]; if (this.isTutor1) { var i = n + "\nSpace - " + o + "\nE - " + t; this.label.string = i } else i = (n = n.replace("W", "\u21e7")) + "\nEnter - " + o + "\nShift - " + t, this.label.string = i }, r([p(cc.Label)], t.prototype, "label", void 0), r([p], t.prototype, "isTutor1", void 0), r([c], t) }(cc.Component); o.default = u, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/localConfig": "localConfig" }], UpBall: [function (e, t, o) { "use strict"; cc._RF.push(t, "e8565/P3c9ObKWmMFczZigo", "UpBall"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Factory/BulletFactory"), s = e("../Manager/ConfigManager"), c = e("../Manager/EffectManager"), p = e("../Manager/WeaponManager"), u = e("./BulletBase"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.showUpTimer = null, t.flyTimer = null, t } return i(t, e), t.prototype._init = function (e, t, o) { this._rigidBody = this.node.getComponent(cc.RigidBody), this.user = o, this.node.group = e, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody), this.node.getComponent(cc.Collider).apply(), this.damageInverter = 0, t && (this.targetEnemy = t), this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 0, this._rigidBody.angularDamping = 0, this.node.getChildByName("body").active = !0, this.node.getChildByName("up").active = !1, this.node.getChildByName("up").setPosition(cc.v2(0, -64.353)) }, t.prototype.setVec = function (e) { null == this.fly && (this.showUpTimer = null, this.flyTimer = 0, this.damageInverter = .5, this._flyV2 = e.normalize(), this._rigidBody.angularVelocity = 0, this._rigidBody.linearVelocity = e.mul(10 * this._rigidBody.getMass()), this.fly = !0) }, t.prototype.showUpFire = function () { this.node.getChildByName("body").active = !1, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 1e4, this._rigidBody.angularDamping = 1e4, this.node.getChildByName("up").active = !0, this.node.getChildByName("up").getChildByName("pic").getComponent(cc.ParticleSystem).resetSystem(), this.showUpTimer = 0 }, t.prototype.onBeginContact = function (e, t, o) { if (null == this.showUpTimer) if ("bomb1" == t.node.group) if (s.gameConfig.suverModel) if ("suverenemy" == o.node.group) { var n = o.node.getComponent(cc.RigidBody); this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), this.showUpFire()) } else "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group && "ground" != o.node.group || (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, this.showUpFire()); else "player2" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), this.showUpFire())) : "bomb2" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons2" != o.node.group && "rebound2" != o.node.group && "ground" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, this.showUpFire()); else "bomb2" == t.node.group && (s.gameConfig.suverModel ? "suverenemy" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), this.showUpFire())) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group && "ground" != o.node.group || (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, this.showUpFire()) : "player1" == o.node.group ? (n = o.node.getComponent(cc.RigidBody), this.damageInverter >= .5 && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, o.node.parent.getComponent(a.default).setDamage(5), c.effectManager.playEffect(c.EffectType.playerWeaponHit, this.node.getPosition(), this.node.parent), n.applyLinearImpulse(this._flyV2.mul(1e3 * this._rigidBody.getMass()), n.getWorldCenter(), !0), this.showUpFire())) : "bomb1" != o.node.group && "water" != o.node.group && "suverweapon" != o.node.group && "weapons1" != o.node.group && "rebound1" != o.node.group && "ground" != o.node.group || "lancespear" != o.node.name && "lancespear2" != o.node.name && (this.betweenDis = 0, this.fly = null, this.damageInverter = 0, this.fly2 = null, this.showUpFire())) }, t.prototype.start = function () { }, t.prototype.update = function (e) { this.node.isValid && (this.damageInverter < .6 && (this.damageInverter += e), null != this.fly && (this.flyTimer += e, this.flyTimer >= 4 && (this.fly = null, this.flyTimer = 0, this.showUpFire())), null != this.showUpTimer && (this.showUpTimer += e, this.showUpTimer >= 5 && (this.showUpTimer = null, this._rigidBody.linearVelocity = cc.v2(0, 0), this._rigidBody.angularVelocity = 0, this._rigidBody.gravityScale = 0, this._rigidBody.linearDamping = 0, this._rigidBody.angularDamping = 0, this.node.getChildByName("up").getChildByName("pic").getComponent(cc.ParticleSystem).stopSystem(), this.node.getChildByName("up").active = !1, this.node.getChildByName("up").setPosition(cc.v2(0, -64.353)), l.bulletFactory.putBullet(p.BulletType.UpBall, this.node)))) }, r([h], t) }(u.default)); o.default = g, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Factory/BulletFactory": "BulletFactory", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], UpCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "94616kppvFEvZz4d7VDdkyb", "UpCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = a.property, c = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.types = 0, t.target = null, t.targetlist = [], t } return i(t, e), t.prototype.getHeadToGround = function (e) { var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this.node.getComponent(cc.RigidBody).getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = Math.abs(i.len()), a = this.node.width, l = t.getMass(), s = cc.Vec2.UP.mul(Math.abs(a / 2 - r) * l * 30); 0 == this.types ? (s = cc.Vec2.UP.mul(Math.abs(a / 2 - r) * l * 170), "special1" != e.group && "special2" != e.group || (s = cc.Vec2.UP.mul(Math.abs(a) * l * 100)), "body1" != e.group && "body2" != e.group || (s = cc.Vec2.UP.mul(Math.abs(a) * l * 5))) : 23 == this.types && (s = cc.Vec2.UP.mul(Math.abs(a) * l * 1)), t.applyForceToCenter(s, !0) }, t.prototype.onBeginContact = function (e, t, o) { "deads" == t.node.group && "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "iceMontagne" != o.node.name && "lancespear" != o.node.name && "lancespear2" != o.node.name && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node) }, t.prototype.onEndContact = function (e, t, o) { "deads" == t.node.group && -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1) }, t.prototype.update = function () { var e = this; this.targetlist.length > 0 && this.targetlist.forEach(function (t) { e.getHeadToGround(t) }) }, r([s], t.prototype, "types", void 0), r([l], t) }(cc.Component); o.default = c, cc._RF.pop() }, {}], UpQuad: [function (e, t, o) { "use strict"; cc._RF.push(t, "f655fth9stJ5a6XRktxuVlW", "UpQuad"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Factory/BulletFactory"), l = e("../Manager/WeaponManager"), s = e("./BulletBase"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.fly = null, t.fly2 = null, t._flyV2 = null, t.showUpTimer = null, t.flyTimer = null, t.targetlist = [], t } return i(t, e), t.prototype._init = function (e, t, o) { this._rigidBody = this.node.getComponent(cc.RigidBody), this.fly = null, this.user = o, this._target = this.user.getChildByName("body").getComponent(cc.RigidBody) }, t.prototype.setVec = function (e) { if (null == this.fly) { this.showUpTimer = null, this.flyTimer = 0, this.damageInverter = .5, this._flyV2 = e.normalize(); var t = Math.atan2(e.y - 0, e.x - 0) * (180 / Math.PI); this.node.angle = t, this.node.active = !0, this.fly = !0 } }, t.prototype.getHeadToGround = function (e) { var t = e.getComponent(cc.RigidBody), o = new cc.Vec2(0, 0); t.getWorldPosition(o); var n = new cc.Vec2(0, 0); this.node.getComponent(cc.RigidBody).getWorldPosition(n); var i = new cc.Vec2(0, 0); cc.Vec2.subtract(i, o, n); var r = Math.abs(i.len()); t.applyForceToCenter(this._flyV2.mul(Math.abs(this.node.width / 2 - r) * t.getMass() * 2), !0) }, t.prototype.onBeginContact = function (e, t, o) { "deads" == t.node.group && "arrows" != o.node.name && "arrows2" != o.node.name && "normal" != o.node.name && "normal2" != o.node.name && "normalBig" != o.node.name && "shareBoom" != o.node.name && "cannonBall" != o.node.name && "cannonBall2" != o.node.name && "lancespear" != o.node.name && "lancespear2" != o.node.name && -1 == this.targetlist.indexOf(o.node) && this.targetlist.push(o.node) }, t.prototype.onEndContact = function (e, t, o) { "deads" == t.node.group && -1 != this.targetlist.indexOf(o.node) && this.targetlist.splice(this.targetlist.indexOf(o.node), 1) }, t.prototype.update = function (e) { var t = this; this.targetlist.length > 0 && this.targetlist.forEach(function (e) { t.getHeadToGround(e) }), null != this.fly && (this.flyTimer += e, this.flyTimer >= 4 && (this.node.active = !1, a.bulletFactory.putBullet(l.BulletType.UpQuad, this.node))) }, r([p], t) }(s.default)); o.default = u, cc._RF.pop() }, { "../Factory/BulletFactory": "BulletFactory", "../Manager/WeaponManager": "WeaponManager", "./BulletBase": "BulletBase" }], UserProfile: [function (e, t, o) { "use strict"; cc._RF.push(t, "2d170j4Kq9I8Y75dyhd4cBq", "UserProfile"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.userProfile = void 0; var i = e("./ConfigManager"), r = cc._decorator, a = r.ccclass, l = (r.property, function () { function e() { this.data = { gold: 70, keys: 0, reward: 0, newIconWeapons: !1, weapons1: null, weapons2: null, skins1: null, skins2: null, map: 0, audioNumber: .5, effectNumber: .5, playerState1: i.PlayerGameState.Player, playerState2: i.PlayerGameState.Player, playerJoy1: i.JoyStickPos.Left, Allcolor1: i.CustomColors[2].colors, Allcolor2: i.CustomColors[8].colors, rating: 0, weaponsUnLock: { allBlue_0: !0, allBlue_1: !1, allBlue_2: !1, allBlue_3: !1, allBlue_4: !1, allBlue_5: !1, allBlue_6: !1, allBlue_7: !1, allBlue_8: !1, allBlue_9: !1, allBlue_10: !1, allBlue_11: !1, allBlue_12: !1, allBlue_13: !1, allBlue_14: !1, allBlue_15: !1, allBlue_16: !1, allBlue_17: !1, allBlue_18: !1, allBlue_19: !1, allBlue_20: !1, allBlue_21: !1, allBlue_22: !1, allBlue_23: !1, allBlue_24: !1, allBlue_25: !1, allBlue_26: !1, allBlue_27: !1, allBlue_28: !1, allBlue_29: !1, allBlue_30: !1, allBlue_31: !1, allBlue_32: !1, allBlue_33: !1, allBlue_34: !1, allBlue_35: !1, allBlue_36: !1, allBlue_37: !1, allBlue_38: !1, allBlue_39: !1, allRed_0: !0, allRed_1: !1, allRed_2: !1, allRed_3: !1, allRed_4: !1, allRed_5: !1, allRed_6: !1, allRed_7: !1, allRed_8: !1, allRed_9: !1, allRed_10: !1, allRed_11: !1, allRed_12: !1, allRed_13: !1, allRed_14: !1, allRed_15: !1, allRed_16: !1, allRed_17: !1, allRed_18: !1, allRed_19: !1, allRed_20: !1, allRed_21: !1, allRed_22: !1, allRed_23: !1, allRed_24: !1, allRed_25: !1, allRed_26: !1, allRed_27: !1, allRed_28: !1, allRed_29: !1, allRed_30: !1, allRed_31: !1, allRed_32: !1, allRed_33: !1, allRed_34: !1, allRed_35: !1, allRed_36: !1, allRed_37: !1, allRed_38: !1, allRed_39: !1 }, skinsUnLock: { Skin_0: !1, Skin_1: !1, Skin_2: !1, Skin_3: !1, Skin_4: !1, Skin_5: !1, Skin_6: !1, Skin_7: !1, Skin_8: !1, Skin_9: !1, Skin_10: !1, Skin_11: !1, Skin_12: !1, Skin_13: !1, Skin_14: !1, Skin_15: !1, Skin_16: !1, Skin_17: !1, Skin_18: !1, Skin_19: !1, Skin_20: !1, Skin_21: !1, Skin_22: !1, Skin_23: !1, Skin_24: !1, Skin_25: !1, Skin_26: !1, Skin_27: !1, Skin_28: !1, Skin_29: !1, Skin_30: !1, Skin_31: !1, Skin_32: !1, Skin_33: !1, Skin_34: !1, Skin_35: !1, Skin_36: !1, Skin_37: !1, Skin_38: !1, Skin_39: !1 }, lastCheckInTime: 0, player1Count: 0, player2Count: 0, enemyName: "", playerName: null, level: 0, arenaNum: 0, isPassTutorial: !1, isPassShopTutorial: !1, isPassArenaTutorial: !1, isPass2PlayersTutorial: !1, openedWeapons: 0 } } var t; return t = e, e.prototype.load = function () { var e, o = cc.sys.localStorage.getItem("p27"); if (o) for (var n in o = JSON.parse(o), this.data) void 0 !== o[n] ? this.data[n] = o[n] : o[n] = this.data[n]; else e = new t; return e }, e.prototype.save = function () { var e = JSON.stringify(o.userProfile.data); cc.sys.localStorage.setItem("p27", e) }, e.prototype.clearAccount = function () { cc.sys.localStorage.setItem("p27", null) }, e.prototype.changeWeaponSkin = function (e, t, o, n) { 1 == t ? 1 == e ? this.data.weapons1 = o : this.data.weapons2 = o : 2 == t ? 1 == e ? this.data.skins1 = o : this.data.skins2 = o : 3 == t && (1 == e ? this.data.Allcolor1 = n : this.data.Allcolor2 = n), this.save() }, t = n([a], e) }()); o.default = l, o.userProfile = new l, cc._RF.pop() }, { "./ConfigManager": "ConfigManager" }], Utils: [function (e, t, o) { "use strict"; cc._RF.push(t, "43a821tyn5CuZmaQmgLNnvB", "Utils"), Object.defineProperty(o, "__esModule", { value: !0 }), o.RandomRangeInt = void 0, o.RandomRangeInt = function (e, t) { return Math.floor(Math.random() * (t - e) + e) }, cc._RF.pop() }, {}], ViewSize: [function (e, t, o) { "use strict"; cc._RF.push(t, "d049fYSy/pECqSJx1S8CZWO", "ViewSize"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onLoad = function () { this.node.width = cc.winSize.width, this.node.height = cc.winSize.height }, t.prototype.start = function () { }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], WarerCollider: [function (e, t, o) { "use strict"; cc._RF.push(t, "dbbbdMGJQ9AjYZsJWnHOv+i", "WarerCollider"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../HumanStates/Human"), l = e("../Controller/HumanController"), s = cc._decorator, c = s.ccclass, p = (s.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return i(t, e), t.prototype.onBeginContact = function (e, t, o) { if ("water" == t.node.group || "ground" == t.node.group) { var n = o.node, i = n.parent; if (n && n.isValid && i && i.isValid) { var r = n.group; "player2" != r && "player1" != r && "suverenemy" != r && "boot" != i.name && "boot2" != i.name || i.getComponent(a.default) && (i.getComponent(l.default).setDamage(100), i.getComponent(a.default).WaterJump()) } } }, r([c], t) }(cc.Component)); o.default = p, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../HumanStates/Human": "Human" }], WeaponFactory: [function (e, t, o) { "use strict"; cc._RF.push(t, "d2171X94/ZPP4+mN8YiERLJ", "WeaponFactory"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }, i = this && this.__awaiter || function (e, t, o, n) { return new (o || (o = Promise))(function (i, r) { function a(e) { try { s(n.next(e)) } catch (t) { r(t) } } function l(e) { try { s(n.throw(e)) } catch (t) { r(t) } } function s(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof o ? t : new o(function (e) { e(t) })).then(a, l) } s((n = n.apply(e, t || [])).next()) }) }, r = this && this.__generator || function (e, t) { var o, n, i, r, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return r = { next: l(0), throw: l(1), return: l(2) }, "function" == typeof Symbol && (r[Symbol.iterator] = function () { return this }), r; function l(e) { return function (t) { return s([e, t]) } } function s(r) { if (o) throw new TypeError("Generator is already executing."); for (; a;)try { if (o = 1, n && (i = 2 & r[0] ? n.return : r[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, r[1])).done) return i; switch (n = 0, i && (r = [2 & r[0], i.value]), r[0]) { case 0: case 1: i = r; break; case 4: return a.label++, { value: r[1], done: !1 }; case 5: a.label++, n = r[1], r = [0]; continue; case 7: r = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === r[0] || 2 === r[0])) { a = 0; continue } if (3 === r[0] && (!i || r[1] > i[0] && r[1] < i[3])) { a.label = r[1]; break } if (6 === r[0] && a.label < i[1]) { a.label = i[1], i = r; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(r); break } i[2] && a.ops.pop(), a.trys.pop(); continue }r = t.call(e, a) } catch (l) { r = [6, l], n = 0 } finally { o = i = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } }; Object.defineProperty(o, "__esModule", { value: !0 }), o.weaponFactory = void 0; var a = e("../Manager/WeaponManager"), l = cc._decorator, s = l.ccclass, c = (l.property, function () { function e() { this._weapons = new Map, this.meleeweapons = ["0", "1", "11", "13", "16", "17", "18", "19", "23", "24", "30", "33", "35"], this.meleeSpecial = ["5", "7", "9", "10", "12", "21", "39"], this.props = ["2", "26", "38"], this.ranged = ["3", "4", "6", "8", "14", "15", "20", "22", "25", "27", "28", "29", "31", "32", "34", "36", "37"] } return e.prototype.loadWeapons = function (e) { var t = this; return new Promise(function (o, n) { var i = a.weaponConfig[e]; cc.assetManager.getBundle("prefabs").load("weapons/" + i.prefabName, cc.Prefab, function (e, r) { if (e) return console.error(e), void n(e); t._weapons.set(i.prefabName, r), o() }) }) }, e.prototype.getWeapons = function (e, t, o, n, l) { var s, c, p, u, d; return i(this, void 0, Promise, function () { var i, h, g, f, y, m, v, _, C, b, B, w; return r(this, function (r) { switch (r.label) { case 0: return h = a.weaponConfig[t], this._weapons.get(h.prefabName) ? [3, 2] : [4, this.loadWeapons(t)]; case 1: r.sent(), r.label = 2; case 2: return (i = cc.instantiate(this._weapons.get(h.prefabName))).active = !1, i.parent = cc.find("Canvas"), g = o.parent.convertToWorldSpaceAR(o.getPosition()), i.setPosition(cc.find("Canvas").convertToNodeSpaceAR(g)), f = null, y = t.split("_")[1], i.getChildByName("body") && i.getChildByName("body").getComponent("Weapon") ? (f = i.getChildByName("body").getComponent("Weapon"), i.getChildByName("body").group = n ? "weapons1" : "weapons2", (m = null === (c = null === (s = i.getChildByName("2")) || void 0 === s ? void 0 : s.getChildByName("0")) || void 0 === c ? void 0 : c.getChildByName("2")) && (m.group = n ? "weapons1" : "weapons2", m.getComponent(cc.PhysicsCircleCollider).apply()), i.getChildByName("body").getComponent(cc.Collider).apply(), i.getChildByName("body").getComponent(cc.RevoluteJoint) && ((_ = i.getChildByName("body").getComponent(cc.RevoluteJoint)).connectedBody = o.getComponent(cc.RigidBody), _.apply()), i.getComponent(cc.WeldJoint) && ((b = i.getComponent(cc.WeldJoint)).connectedBody = o.getComponent(cc.RigidBody), b.apply()), l && i.getComponent(cc.RopeJoint) && ((B = i.getComponent(cc.RopeJoint)).connectedBody = l.getComponent(cc.RigidBody), B.apply())) : (f = i.getComponent("Weapon"), i.group = n ? "weapons1" : "weapons2", (m = null === (u = null === (p = i.getChildByName("2")) || void 0 === p ? void 0 : p.getChildByName("0")) || void 0 === u ? void 0 : u.getChildByName("2")) && (m.group = n ? "weapons1" : "weapons2", m.getComponent(cc.PhysicsCircleCollider).apply()), "10" == y || ("8" == y ? ((_ = i.getChildByName("1").getComponent(cc.RevoluteJoint)).connectedBody = o.getComponent(cc.RigidBody), _.apply(), (v = i.getChildByName("2").getComponent(cc.RevoluteJoint)).connectedBody = l.getComponent(cc.RigidBody), v.apply()) : (i.getComponent(cc.Collider).apply(), (_ = i.getComponents(cc.RevoluteJoint)).length <= 1 ? ((C = i.getComponent(cc.RevoluteJoint) || (null === (d = i.getChildByName("body")) || void 0 === d ? void 0 : d.getComponent(cc.RevoluteJoint))) && (C.connectedBody = o.getComponent(cc.RigidBody), C.apply()), i.getComponent(cc.WeldJoint) && ((b = i.getComponent(cc.WeldJoint)).connectedBody = o.getComponent(cc.RigidBody), b.apply()), l && i.getComponent(cc.RopeJoint) && ((B = i.getComponent(cc.RopeJoint)).connectedBody = l.getComponent(cc.RigidBody), B.apply())) : _.forEach(function (e, t) { 0 == t ? (e.connectedBody = o.getComponent(cc.RigidBody), e.apply()) : l && (e.connectedBody = l.getComponent(cc.RigidBody), e.apply()) }), "39" != y && "8" != y || ((w = i.getChildByName("2").getComponent(cc.RevoluteJoint)).connectedBody = l.getComponent(cc.RigidBody), w.apply())))), i.active = !0, "3" != y && "25" != y || (f.isGun = !0), "13" == y && (f.isChangeAc = !0), -1 != this.meleeweapons.indexOf(y) ? f.EndSkillType = a.WeaponsSkillType.Melee : -1 != this.meleeSpecial.indexOf(y) ? f.EndSkillType = a.WeaponsSkillType.MeleeSpecial : -1 != this.ranged.indexOf(y) ? f.EndSkillType = a.WeaponsSkillType.Ranged : -1 != this.props.indexOf(y) ? f.EndSkillType = a.WeaponsSkillType.Props : f.EndSkillType = null, f.human = o.parent, f.checkName = t, f.Atk = h.weaponsAtk, f.atkRange = h.atkRange, f.damageInverter = h.damageInvert, h.boomTimer && (f.boomTimer = h.boomTimer), f.SkillType = h.skillType, f.special = h.spectral, f.bulletType = h.bulletType, f.targetEnemy = e, f.hp = h.addHp, f._init(), [2, i] } }) }) }, n([s], e) }()); o.default = c, o.weaponFactory = new c, cc._RF.pop() }, { "../Manager/WeaponManager": "WeaponManager" }], WeaponManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "d900bADwytChazNwebp886u", "WeaponManager"); var n, i = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.weaponManager = o.weaponConfig = o.WeaponsSkillType = o.prefabURLs = o.BulletType = o.SpecrialType = o.SkillType = void 0; var r, a, l, s = cc._decorator, c = s.ccclass; s.property, function (e) { e[e.bullet = 0] = "bullet", e[e.boomerang = 1] = "boomerang", e[e.parabola = 2] = "parabola", e[e.generate = 3] = "generate", e[e.foot = 4] = "foot", e[e.charge = 5] = "charge", e[e.shield = 6] = "shield", e[e.flamethrower = 7] = "flamethrower", e[e.sprint = 8] = "sprint", e[e.SmallRange = 9] = "SmallRange", e[e.wall = 10] = "wall" }(r = o.SkillType || (o.SkillType = {})), function (e) { e[e.slowDown = 0] = "slowDown", e[e.paralysis = 1] = "paralysis", e[e.beakback = 2] = "beakback" }(a = o.SpecrialType || (o.SpecrialType = {})), function (e) { e[e.energyBall = 0] = "energyBall", e[e.rebound = 1] = "rebound", e[e.rebound2 = 2] = "rebound2", e[e.noteOne = 3] = "noteOne", e[e.noteTwo = 4] = "noteTwo", e[e.bomb = 5] = "bomb", e[e.bomb2 = 6] = "bomb2", e[e.normal = 7] = "normal", e[e.normal2 = 8] = "normal2", e[e.arrows = 9] = "arrows", e[e.arrows2 = 10] = "arrows2", e[e.saberBall = 11] = "saberBall", e[e.fire = 12] = "fire", e[e.firesmall = 13] = "firesmall", e[e.reboundTimer = 14] = "reboundTimer", e[e.shareBullet = 15] = "shareBullet", e[e.shareBoom = 16] = "shareBoom", e[e.shareBoom2 = 17] = "shareBoom2", e[e.normalBig = 18] = "normalBig", e[e.CannonBall = 19] = "CannonBall", e[e.CannonBall2 = 20] = "CannonBall2", e[e.UpBall = 21] = "UpBall", e[e.GreenBall = 22] = "GreenBall", e[e.potions = 23] = "potions", e[e.UpQuad = 24] = "UpQuad", e[e.noteRed = 25] = "noteRed", e[e.notePurple = 26] = "notePurple", e[e.noteGreen = 27] = "noteGreen", e[e.noteGreen2 = 28] = "noteGreen2", e[e.paintBall = 29] = "paintBall", e[e.grappins = 30] = "grappins", e[e.dragon = 31] = "dragon", e[e.BananaBall = 32] = "BananaBall", e[e.rpgBullets = 33] = "rpgBullets", e[e.shuriken1 = 34] = "shuriken1", e[e.shuriken2 = 35] = "shuriken2", e[e.shuriken3 = 36] = "shuriken3", e[e.scepterBall = 37] = "scepterBall", e[e.GantBall = 38] = "GantBall", e[e.GantBall2 = 39] = "GantBall2", e[e.SnowBullet = 40] = "SnowBullet", e[e.SnowBullet2 = 41] = "SnowBullet2", e[e.IceMontagne = 42] = "IceMontagne", e[e.GuitaRed = 43] = "GuitaRed", e[e.GuitaGreen = 44] = "GuitaGreen", e[e.GuitaPurple = 45] = "GuitaPurple", e[e.shieldBullet = 46] = "shieldBullet", e[e.shields = 47] = "shields", e[e.gauntletGreen = 48] = "gauntletGreen", e[e.cardRed = 49] = "cardRed", e[e.cardGreen = 50] = "cardGreen", e[e.cardPurple = 51] = "cardPurple", e[e.lampRed = 52] = "lampRed", e[e.lampPurple = 53] = "lampPurple", e[e.lampWall = 54] = "lampWall", e[e.smallBullet = 55] = "smallBullet", e[e.smallBullet2 = 56] = "smallBullet2" }(l = o.BulletType || (o.BulletType = {})), o.prefabURLs = [{ type: l.energyBall, url: "bullet/energyBall" }, { type: l.saberBall, url: "bullet/saberBall" }, { type: l.bomb, url: "bullet/bomb" }, { type: l.bomb2, url: "bullet/bomb2" }, { type: l.normal, url: "bullet/normal" }, { type: l.normal2, url: "bullet/normal2" }, { type: l.rebound, url: "bullet/rebound" }, { type: l.rebound2, url: "bullet/rebound2" }, { type: l.arrows, url: "bullet/arrows" }, { type: l.arrows2, url: "bullet/arrows2" }, { type: l.reboundTimer, url: "bullet/reboundTimer" }, { type: l.shareBullet, url: "bullet/shareBullet" }, { type: l.normalBig, url: "bullet/normalBig" }, { type: l.shareBoom, url: "bullet/shareBoom" }, { type: l.shareBoom2, url: "bullet/shareBoom2" }, { type: l.CannonBall, url: "bullet/cannonBall" }, { type: l.CannonBall2, url: "bullet/cannonBall2" }, { type: l.potions, url: "bullet/potion" }, { type: l.UpBall, url: "bullet/Upball" }, { type: l.GreenBall, url: "bullet/GreenBall" }, { type: l.UpQuad, url: "bullet/UpQuad" }, { type: l.noteRed, url: "bullet/noteRed" }, { type: l.noteGreen, url: "bullet/noteGreen" }, { type: l.noteGreen2, url: "bullet/noteGreen2" }, { type: l.notePurple, url: "bullet/notePurple" }, { type: l.paintBall, url: "bullet/paintBox" }, { type: l.grappins, url: "bullet/grappinBullet" }, { type: l.dragon, url: "bullet/dragon" }, { type: l.BananaBall, url: "bullet/BananaBall" }, { type: l.rpgBullets, url: "bullet/RpgBullet" }, { type: l.shuriken1, url: "bullet/shuriken1" }, { type: l.shuriken2, url: "bullet/shuriken2" }, { type: l.shuriken3, url: "bullet/shuriken3" }, { type: l.scepterBall, url: "bullet/scepterBall" }, { type: l.GantBall, url: "bullet/gantBall" }, { type: l.GantBall2, url: "bullet/gantBall2" }, { type: l.SnowBullet, url: "bullet/snowFlake" }, { type: l.SnowBullet2, url: "bullet/snowFlake2" }, { type: l.IceMontagne, url: "bullet/iceMontagne" }, { type: l.GuitaRed, url: "bullet/guitaRed" }, { type: l.shieldBullet, url: "bullet/shieldBullet" }, { type: l.gauntletGreen, url: "bullet/gauntletGreen" }, { type: l.cardRed, url: "bullet/cardRed" }, { type: l.cardGreen, url: "bullet/cardGreen" }, { type: l.cardPurple, url: "bullet/cardPurple" }, { type: l.lampRed, url: "bullet/lampRed" }, { type: l.lampPurple, url: "bullet/lampPurple" }, { type: l.lampWall, url: "bullet/lampWall" }, { type: l.smallBullet, url: "bullet/smallBullet" }, { type: l.smallBullet2, url: "bullet/smallBullet2" }], function (e) { e[e.Melee = 1] = "Melee", e[e.MeleeSpecial = 2] = "MeleeSpecial", e[e.Ranged = 3] = "Ranged", e[e.Props = 4] = "Props" }(o.WeaponsSkillType || (o.WeaponsSkillType = {})), o.weaponConfig = ((n = {}).allBlue_0 = { prefabName: "sword", weaponsAtk: [3], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allBlue_1 = { prefabName: "hammer", weaponsAtk: [5], damageInvert: .1, skillType: [r.SmallRange], addHp: 0 }, n.allBlue_2 = { prefabName: "grappin", bulletType: [l.grappins], weaponsAtk: [5], atkRange: [1], damageInvert: 1, skillType: [r.bullet], addHp: 20 }, n.allBlue_3 = { prefabName: "gun", bulletType: [l.normal, l.normal], weaponsAtk: [10, 10], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 0 }, n.allBlue_4 = { prefabName: "scepter", bulletType: [l.scepterBall, l.gauntletGreen], weaponsAtk: [20, 0], atkRange: [3e3, 1e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allBlue_5 = { prefabName: "flail", bulletType: [null], weaponsAtk: [5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 0 }, n.allBlue_6 = { prefabName: "arc", bulletType: [l.arrows, l.arrows], weaponsAtk: [10, 10], atkRange: [7e3], damageInvert: 1, skillType: [r.parabola], addHp: 0 }, n.allBlue_7 = { prefabName: "Boomerang", weaponsAtk: [5], damageInvert: .5, skillType: [r.boomerang], addHp: 0 }, n.allBlue_8 = { prefabName: "gant", bulletType: [l.GantBall], weaponsAtk: [5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 0 }, n.allBlue_9 = { prefabName: "iceCream", bulletType: [l.SnowBullet, l.IceMontagne], weaponsAtk: [3, 3], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allBlue_10 = { prefabName: "boot", weaponsAtk: [5], damageInvert: .1, skillType: [r.sprint], addHp: 20 }, n.allBlue_11 = { prefabName: "knife", weaponsAtk: [5], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allBlue_12 = { prefabName: "guitare", bulletType: [l.GuitaRed, l.GuitaGreen, l.GuitaPurple], weaponsAtk: [5, 1, 0], atkRange: [900, 500, 500], damageInvert: .1, skillType: [r.sprint], addHp: 20 }, n.allBlue_13 = { prefabName: "katanna", bulletType: [l.dragon], weaponsAtk: [5], atkRange: [4e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allBlue_14 = { prefabName: "bomb", bulletType: [l.bomb], weaponsAtk: [10], Aoe: [200], damageInvert: .5, skillType: [r.parabola], boomTimer: [3, 3], addHp: 10 }, n.allBlue_15 = { prefabName: "AK", bulletType: [l.smallBullet], weaponsAtk: [3], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 30 }, n.allBlue_16 = { prefabName: "faux", bulletType: [null], weaponsAtk: [3], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allBlue_17 = { prefabName: "scie", bulletType: [null], weaponsAtk: [3], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allBlue_18 = { prefabName: "axe", bulletType: [null], weaponsAtk: [5], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allBlue_19 = { prefabName: "spear", bulletType: [l.energyBall, null], weaponsAtk: [5, 5], atkRange: [2500, 3e3], damageInvert: 0, spectral: [a.paralysis], skillType: [r.parabola, r.sprint], addHp: 20 }, n.allBlue_20 = { prefabName: "sniper", bulletType: [l.rebound], weaponsAtk: [20], atkRange: [3e3], damageInvert: 1, skillType: [r.bullet], addHp: 20 }, n.allBlue_21 = { prefabName: "shield", bulletType: [l.shieldBullet, l.shields], weaponsAtk: [10, 5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allBlue_22 = { prefabName: "shotgun", bulletType: [l.smallBullet], weaponsAtk: [3], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 30 }, n.allBlue_23 = { prefabName: "lancespear", bulletType: [null], weaponsAtk: [10], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allBlue_24 = { prefabName: "lightsaber", bulletType: [null, l.saberBall], weaponsAtk: [5, 5], atkRange: [null, 1e3], damageInvert: .5, spectral: [null, a.beakback], skillType: [r.boomerang, r.bullet], addHp: 40 }, n.allBlue_25 = { prefabName: "bananazooka", bulletType: [l.rpgBullets, l.BananaBall], weaponsAtk: [10, 5], atkRange: [5e3], damageInvert: 1, skillType: [r.parabola], addHp: 30 }, n.allBlue_26 = { prefabName: "pickaxe", bulletType: [l.paintBall], weaponsAtk: [5], Aoe: [100], damageInvert: .5, spectral: [a.beakback], skillType: [r.wall], addHp: 40 }, n.allBlue_27 = { prefabName: "shuriken", bulletType: [l.shuriken1, l.shuriken2, l.shuriken3], weaponsAtk: [5, 10, 15], atkRange: [3e3], damageInvert: .2, skillType: [r.parabola, r.parabola, r.parabola], addHp: 40 }, n.allBlue_28 = { prefabName: "IronHand", bulletType: [l.fire, l.firesmall, l.reboundTimer], weaponsAtk: [5, 0, 10], atkRange: [0, 0, 800], damageInvert: .5, spectral: [a.beakback, a.beakback, null], skillType: [r.wall, r.wall, r.bullet], addHp: 40 }, n.allBlue_29 = { prefabName: "magnet", bulletType: [l.normal, l.UpBall], weaponsAtk: [10, 5], atkRange: [5e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge, r.bullet], addHp: 30 }, n.allBlue_30 = { prefabName: "thorHammer", bulletType: [null, null, l.UpQuad], weaponsAtk: [5], atkRange: [5e3, 3e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.boomerang, r.generate, r.sprint], addHp: 30 }, n.allBlue_31 = { prefabName: "armCannon", bulletType: [l.normal, l.GreenBall], weaponsAtk: [10, 0], atkRange: [5e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge, r.parabola], addHp: 30 }, n.allBlue_32 = { prefabName: "card", bulletType: [l.cardRed, l.cardGreen, l.cardPurple], weaponsAtk: [10, 5, 0], atkRange: [5e3, 5e3, 5e3], damageInvert: .1, spectral: [null], skillType: [null], boomTimer: [2], addHp: 30 }, n.allBlue_33 = { prefabName: "baton", bulletType: [null], weaponsAtk: [5], atkRange: [5e3], damageInvert: .1, spectral: [null], skillType: [null], addHp: 10 }, n.allBlue_34 = { prefabName: "potion", bulletType: [l.potions], weaponsAtk: [.2], Aoe: [200], damageInvert: .1, spectral: [null], skillType: [r.parabola], boomTimer: [3], addHp: 10 }, n.allBlue_35 = { prefabName: "sucette", bulletType: [l.CannonBall], weaponsAtk: [10], atkRange: [3e3], damageInvert: .2, spectral: [null], skillType: [r.charge], addHp: 30 }, n.allBlue_36 = { prefabName: "harp", bulletType: [l.noteRed, l.notePurple, l.noteGreen], weaponsAtk: [10, 5, 5], atkRange: [3e3, 3e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge], addHp: 30 }, n.allBlue_37 = { prefabName: "arbalete", bulletType: [l.arrows, l.shareBullet, l.shareBoom], weaponsAtk: [5, 10, 20], atkRange: [5e3, 800, 200], damageInvert: .2, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n.allBlue_38 = { prefabName: "paintBrush", bulletType: [l.lampRed, null, l.lampPurple], weaponsAtk: [10, 0, 5], atkRange: [5e3, 5e3, 5e3], damageInvert: .1, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n.allBlue_39 = { prefabName: "blades", bulletType: [null], weaponsAtk: [5], atkRange: [null], damageInvert: .2, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n.allRed_0 = { prefabName: "sword2", weaponsAtk: [3], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allRed_1 = { prefabName: "hammer2", weaponsAtk: [5], damageInvert: .1, skillType: [r.SmallRange], addHp: 0 }, n.allRed_2 = { prefabName: "grappin2", bulletType: [l.grappins], weaponsAtk: [5], atkRange: [1], damageInvert: 1, skillType: [r.bullet], addHp: 20 }, n.allRed_3 = { prefabName: "gun2", bulletType: [l.normal2, l.normal2], weaponsAtk: [10, 10], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 0 }, n.allRed_4 = { prefabName: "scepter2", bulletType: [l.scepterBall, l.gauntletGreen], weaponsAtk: [20, 0], atkRange: [3e3, 1e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allRed_5 = { prefabName: "flail2", bulletType: [null], weaponsAtk: [5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 0 }, n.allRed_6 = { prefabName: "arc2", bulletType: [l.arrows2, l.arrows2], weaponsAtk: [10, 10], atkRange: [7e3], damageInvert: 1, skillType: [r.parabola], addHp: 0 }, n.allRed_7 = { prefabName: "Boomerang2", weaponsAtk: [5], damageInvert: .5, skillType: [r.boomerang], addHp: 0 }, n.allRed_8 = { prefabName: "gant2", bulletType: [l.GantBall2], weaponsAtk: [5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 0 }, n.allRed_9 = { prefabName: "iceCream2", bulletType: [l.SnowBullet2, l.IceMontagne], weaponsAtk: [3, 3], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allRed_10 = { prefabName: "boot2", weaponsAtk: [5], damageInvert: .1, skillType: [r.sprint], addHp: 20 }, n.allRed_11 = { prefabName: "knife2", weaponsAtk: [5], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allRed_12 = { prefabName: "guitare2", bulletType: [l.GuitaRed, l.GuitaGreen, l.GuitaPurple], weaponsAtk: [5, 1, 0], atkRange: [900, 500, 500], damageInvert: .1, skillType: [r.sprint], addHp: 20 }, n.allRed_13 = { prefabName: "katanna2", bulletType: [l.dragon], weaponsAtk: [5], atkRange: [4e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allRed_14 = { prefabName: "bomb2", bulletType: [l.bomb2], weaponsAtk: [10], Aoe: [200], damageInvert: .5, skillType: [r.parabola], boomTimer: [3, 3], addHp: 10 }, n.allRed_15 = { prefabName: "AK2", bulletType: [l.smallBullet2], weaponsAtk: [3], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 30 }, n.allRed_16 = { prefabName: "faux2", bulletType: [null], weaponsAtk: [3], damageInvert: .1, skillType: [r.sprint], addHp: 0 }, n.allRed_17 = { prefabName: "scie2", bulletType: [null], weaponsAtk: [3], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allRed_18 = { prefabName: "axe2", bulletType: [null], weaponsAtk: [5], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allRed_19 = { prefabName: "spear2", bulletType: [l.energyBall, null], weaponsAtk: [5, 5], atkRange: [2500, 3e3], damageInvert: 0, spectral: [a.paralysis], skillType: [r.parabola, r.sprint], addHp: 20 }, n.allRed_20 = { prefabName: "sniper2", bulletType: [l.rebound2], weaponsAtk: [20], atkRange: [3e3], damageInvert: 1, skillType: [r.bullet], addHp: 20 }, n.allRed_21 = { prefabName: "shield2", bulletType: [l.shieldBullet, l.shields], weaponsAtk: [10, 5, 10], atkRange: [3e3], damageInvert: .1, skillType: [r.bullet], addHp: 20 }, n.allRed_22 = { prefabName: "shotgun2", bulletType: [l.smallBullet2], weaponsAtk: [3], atkRange: [5e3], damageInvert: 1, skillType: [r.bullet], addHp: 30 }, n.allRed_23 = { prefabName: "lancespear2", bulletType: [null], weaponsAtk: [10], atkRange: [1e3], damageInvert: .1, skillType: [r.bullet], addHp: 10 }, n.allRed_24 = { prefabName: "lightsaber2", bulletType: [null, l.saberBall], weaponsAtk: [5, 5], atkRange: [null, 1e3], damageInvert: .5, spectral: [null, a.beakback], skillType: [r.boomerang, r.bullet], addHp: 40 }, n.allRed_25 = { prefabName: "bananazooka2", bulletType: [l.rpgBullets, l.BananaBall], weaponsAtk: [10, 5], atkRange: [5e3], damageInvert: 1, skillType: [r.parabola], addHp: 30 }, n.allRed_26 = { prefabName: "pickaxe2", bulletType: [l.paintBall], weaponsAtk: [5], Aoe: [100], damageInvert: .5, spectral: [a.beakback], skillType: [r.wall], addHp: 40 }, n.allRed_27 = { prefabName: "shuriken2", bulletType: [l.shuriken1, l.shuriken2, l.shuriken3], weaponsAtk: [5, 10, 15], atkRange: [3e3], damageInvert: .2, skillType: [r.parabola, r.parabola, r.parabola], addHp: 40 }, n.allRed_28 = { prefabName: "IronHand2", bulletType: [l.fire, l.firesmall, l.reboundTimer], weaponsAtk: [5, 0, 10], atkRange: [0, 0, 800], damageInvert: .5, spectral: [a.beakback, a.beakback, null], skillType: [r.wall, r.wall, r.bullet], addHp: 40 }, n.allRed_29 = { prefabName: "magnet2", bulletType: [l.normal2, l.UpBall], weaponsAtk: [10, 5], atkRange: [5e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge, r.bullet], addHp: 30 }, n.allRed_30 = { prefabName: "thorHammer2", bulletType: [null, null, l.UpQuad], weaponsAtk: [5], atkRange: [5e3, 3e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.boomerang, r.generate, r.sprint], addHp: 30 }, n.allRed_31 = { prefabName: "armCannon2", bulletType: [l.normal2, l.GreenBall], weaponsAtk: [10, 0], atkRange: [5e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge, r.parabola], addHp: 30 }, n.allRed_32 = { prefabName: "card2", bulletType: [l.cardRed, l.cardGreen, l.cardPurple], weaponsAtk: [10, 5, 0], atkRange: [5e3, 5e3, 5e3], damageInvert: .1, spectral: [null], skillType: [null], boomTimer: [2], addHp: 30 }, n.allRed_33 = { prefabName: "baton2", bulletType: [null], weaponsAtk: [5], atkRange: [5e3], damageInvert: .1, spectral: [null], skillType: [null], addHp: 10 }, n.allRed_34 = { prefabName: "potion2", bulletType: [l.potions], weaponsAtk: [.2], Aoe: [200], damageInvert: .1, spectral: [null], skillType: [r.parabola], boomTimer: [3], addHp: 10 }, n.allRed_35 = { prefabName: "sucette2", bulletType: [l.CannonBall2], weaponsAtk: [10], atkRange: [3e3], damageInvert: .2, spectral: [null], skillType: [r.charge], addHp: 30 }, n.allRed_36 = { prefabName: "harp2", bulletType: [l.noteRed, l.notePurple, l.noteGreen2], weaponsAtk: [10, 5, 5], atkRange: [3e3, 3e3, 3e3], damageInvert: .2, spectral: [null], skillType: [r.charge], addHp: 30 }, n.allRed_37 = { prefabName: "arbalete2", bulletType: [l.arrows2, l.shareBullet, l.shareBoom2], weaponsAtk: [5, 10, 20], atkRange: [5e3, 800, 200], damageInvert: .2, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n.allRed_38 = { prefabName: "paintBrush2", bulletType: [l.lampRed, null, l.lampPurple], weaponsAtk: [10, 0, 5], atkRange: [5e3, 5e3, 5e3], damageInvert: .1, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n.allRed_39 = { prefabName: "blades2", bulletType: [null], weaponsAtk: [5], atkRange: [null], damageInvert: .2, spectral: [null], skillType: [r.boomerang], addHp: 40 }, n); var p = function () { function e() { } return i([c], e) }(); o.default = p, o.weaponManager = new p, cc._RF.pop() }, {}], WeaponsItem: [function (e, t, o) { "use strict"; cc._RF.push(t, "006baU/kgROQYEGLT3vlCOm", "WeaponsItem"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../UI/ChooseView"), l = e("../Manager/AudioManager"), s = e("../Manager/UserProfile"), c = e("../Manager/WeaponManager"), p = e("../Manager/localConfig"), u = e("../Manager/ConfigManager"), d = cc._decorator, h = d.ccclass, g = (d.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t._views = null, t.weaName = null, t._target = null, t.nameid = null, t } return i(t, e), t.prototype.start = function () { }, t.prototype.resetIcon = function () { this.node.getChildByName("adLock").active = !1, null != this.weaName && (s.userProfile.data.weaponsUnLock[this.weaName] ? this.node.getChildByName("adLock").active = !1 : this.node.getChildByName("adLock").active = !0) }, t.prototype.Init = function (e, t, o, n, i) { var r = this; if (void 0 === n && (n = !1), void 0 === i && (i = null), null == e) this.node.getChildByName("other").active = !0, this.node.getChildByName("icon").active = !1; else { this.node.getChildByName("other").active = !1, this.node.getChildByName("icon").active = !0; var a = c.weaponConfig["allBlue_" + i].prefabName; cc.assetManager.getBundle("prefabs").load("weaponsIcons/" + a, cc.Prefab, function (e, t) { cc.instantiate(t).parent = r.node.getChildByName("icon") }) } this.nameid = i, this.weaName = e, this._views = t, this._target = o, n && (s.userProfile.data.weaponsUnLock[e] ? this.node.getChildByName("adLock").active = !1 : this.node.getChildByName("adLock").active = !0) }, t.prototype.showTips = function () { var e = this, t = p.localConfig.instance.queryByID("locs", "lowGold")[u.gameConfig.lang]; cc.assetManager.getBundle("prefabs").load("Item/Tips", cc.Prefab, function (o, n) { var i = cc.instantiate(n); i.parent = e.node.parent.parent.parent.parent.parent.parent, i.getChildByName("str").getComponent(cc.Label).string = t, cc.tween(i).set({ position: new cc.Vec3(0, 0, 0) }).to(1, { position: new cc.Vec3(0, 270, 0) }).delay(1).call(function () { i.destroy() }).union().start() }) }, t.prototype.clickEvent = function () { var e = this, t = function (t) { if (void 0 === t && (t = !1), t) { if (s.userProfile.data.gold < 300) return void e.showTips(); s.userProfile.data.gold -= 300, s.userProfile.data.weaponsUnLock["allRed_" + e.nameid] = !0, s.userProfile.data.weaponsUnLock["allBlue_" + e.nameid] = !0, s.userProfile.save() } e._views.active = !1, e.node.getChildByName("adLock").active = !1; var o = cc.find("Canvas/ChooseView").getComponent(a.default); o.updateGold(), o.ChangeWeapons(e._target, e.weaName, 1) }; l.audioManager.playEffect("click"), this.node.getChildByName("adLock").active ? t(!0) : t(!1) }, r([h], t) }(cc.Component)); o.default = g, cc._RF.pop() }, { "../Manager/AudioManager": "AudioManager", "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../Manager/WeaponManager": "WeaponManager", "../Manager/localConfig": "localConfig", "../UI/ChooseView": "ChooseView" }], WeaponsView: [function (e, t, o) { "use strict"; cc._RF.push(t, "b2c17c9hJJBJZjE2RcVp6bN", "WeaponsView"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../ScrollItem/WeaponsItem"), l = e("./ChooseView"), s = e("../Manager/UserProfile"), c = e("../Manager/ConfigManager"), p = cc._decorator, u = p.ccclass, d = p.property, h = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.Content = null, t.ItemNode = null, t } return i(t, e), t.prototype.onLoad = function () { this._init() }, t.prototype.start = function () { }, t.prototype._init = function () { this.Content.destroyAllChildren(), this._AddItem() }, t.prototype.onEnable = function () { this.Content.children.length > 30 && this.Content.children.forEach(function (e) { e.getComponent(a.default).resetIcon() }) }, t.prototype._AddItem = function () { var e = "allRed_", t = 2; "WeaponsView" == this.node.name && (t = 1, e = "allBlue_"); for (var o = [], n = 0, i = 40; n < i; n++) { var r = { name: e + n.toString(), id: n }; o.push(r) } if (o.sort(function (e, t) { var o = s.userProfile.data.weaponsUnLock[e.name] ? 1 : 0; return (s.userProfile.data.weaponsUnLock[t.name] ? 1 : 0) - o }), null !== c.gameConfig.lastBuyWeapon) { var l = o.findIndex(function (e) { return e.id.toString() === c.gameConfig.lastBuyWeapon }); if (-1 !== l) { var p = o.splice(l, 1)[0]; o.unshift(p) } } for (n = 0, i = 41; n < i; n++) { var u = (n - 1).toString(); u = 0 == n ? null : o[n - 1].name; var d = cc.instantiate(this.ItemNode); d.parent = this.Content; var h = !1; n > 3 && (h = !0), d.getComponent(a.default).Init(u, this.node, t, h, 0 == n ? null : o[n - 1].id) } }, t.prototype.CloseView = function () { cc.find("Canvas/ChooseView").getComponent(l.default).CloseView(), this.node.destroy() }, r([d(cc.Node)], t.prototype, "Content", void 0), r([d(cc.Prefab)], t.prototype, "ItemNode", void 0), r([u], t) }(cc.Component); o.default = h, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../ScrollItem/WeaponsItem": "WeaponsItem", "./ChooseView": "ChooseView" }], Weapon: [function (e, t, o) { "use strict"; cc._RF.push(t, "6cd3dfl5SlNzbKhPxg0c0DG", "Weapon"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = cc._decorator, l = a.ccclass, s = (a.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.EndSkillType = null, t.hp = 0, t.checkName = null, t.Atk = [], t.damageInverter = 0, t.human = null, t.SkillType = [], t.collisions = !1, t.skillInverter = 3, t.boomTimer = [], t.special = null, t.bulletType = null, t.atkRange = null, t.Aoe = [], t.targetEnemy = null, t.SkillNumber = null, t.skillTimer = 0, t.fly = null, t.isGun = !1, t.isSniper = !1, t.isHarp = !1, t.isChangeAc = !1, t.isFlail = !1, t.isScies = !1, t.effinvertal = 0, t.attackProgress = 0, t } return i(t, e), t.prototype.onLoad = function () { }, t.prototype.start = function () { }, t.prototype._init = function () { }, t.prototype.setAngle = function () { }, t.prototype.ChangeAc = function () { }, t.prototype.setLimit = function () { }, t.prototype.MotionStrakAtk = function () { }, t.prototype.BigDamage = function () { }, t.prototype.update = function () { }, r([l], t) }(cc.Component)); o.default = s, cc._RF.pop() }, {}], adManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "97f11VgHyhENoneHL2z3l77", "adManager"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, a = arguments.length, l = a < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) l = Reflect.decorate(e, t, o, n); else for (var s = e.length - 1; s >= 0; s--)(i = e[s]) && (l = (a < 3 ? i(l) : a > 3 ? i(t, o, l) : i(t, o)) || l); return a > 3 && l && Object.defineProperty(t, o, l), l }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("./ConfigManager"), l = e("./AudioManager"), s = e("./UserProfile"), c = e("./EffectManager"), p = cc._decorator, u = p.ccclass, d = (p.property, function (e) { function t() { return null !== e && e.apply(this, arguments) || this } var o; return i(t, e), o = t, Object.defineProperty(t, "instance", { get: function () { return this._instance ? this._instance : (this._instance = new o, this._instance) }, enumerable: !1, configurable: !0 }), t.prototype.showInterstitialAd = function (e) { var t = this; if (a.gameConfig.isFirstFight) return a.gameConfig.isFirstFight = !1, void e.afterInter(); this.onAdsBreakStart(); e.afterInter(); t.turnOnMusic(); a.gameConfig.isPlayingAd = !1; t.makeFocus(); }, t.prototype.showRewardAd = function (e) { var t = this; this.onAdsBreakStart(); var o = !0; t.turnOnMusic(); t.makeFocus(); a.gameConfig.isPlayingAd = !1; o && (t.scheduleOnce(function () { c.effectManager.playRewardEffect() }, .3), l.audioManager.playEffect("scepter")); e.reward && e.reward(o); }, t.prototype.turnOnMusic = function () { s.userProfile.data.audioNumber >= .5 && (l.audioManager.setAudioVolume(.5), l.audioManager.setEffectVolume(.5)) }, t.prototype.makeFocus = function () { a.gameConfig.isMobile || document.getElementById("GameCanvas").focus() }, t.prototype.onAdsBreakStart = function () { a.gameConfig.isPlayingAd = !0, s.userProfile.data.audioNumber >= .5 && (l.audioManager.setAudioVolume(0), l.audioManager.setEffectVolume(0)) }, o = r([u], t)}(cc.Component)); o.default = d, cc._RF.pop() }, { "./AudioManager": "AudioManager", "./ConfigManager": "ConfigManager", "./EffectManager": "EffectManager", "./UserProfile": "UserProfile" }], csvManager: [function (e, t, o) { "use strict"; cc._RF.push(t, "71180EyIiFO3qrc2l59jWfu", "csvManager"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.CSVManager = void 0; var i = cc._decorator, r = i.ccclass, a = (i.property, [",", ";", "\t", "|", "^"]), l = ["\r\n", "\r", "\n"], s = function (e, t, o, n) { return o instanceof Array ? "number" === o[t] ? Number(n[t]) : "boolean" === o[t] ? "true" === n[t] || "t" === n[t] || "1" === n[t] : n[t] : isNaN(Number(e)) ? "false" == e || "true" == e || "t" == e || "f" == e ? "true" === n[t] || "t" === n[t] || "1" === n[t] : n[t] : Number(n[t]) }, c = { STANDARD_DECODE_OPTS: { skip: 0, limit: !1, header: !1, cast: !1, comment: "" }, STANDARD_ENCODE_OPTS: { delimiter: a[0], newline: l[0], skip: 0, limit: !1, header: !1 }, quoteMark: '"', doubleQuoteMark: '""', quoteRegex: /"/g, assign: function () { for (var e = Array.prototype.slice.call(arguments), t = e[0], o = e.slice(1), n = 0, i = o.length; n < i; n++)for (var r in o[n]) t[r] = o[n][r]; return t }, map: function (e, t) { for (var o = [], n = 0, i = e.length; n < i; n++)o[n] = t(e[n], n); return o }, getType: function (e) { return Object.prototype.toString.call(e).slice(8, -1) }, getLimit: function (e, t) { return !1 === e ? t : e }, buildObjectConstructor: function (e, t, o) { return function (n) { var i = new Object, r = function (e, t) { return i[e] = t }; return o ? e.forEach(function (e, i) { r(e, s(t[i], i, o, n)) }) : e.forEach(function (e, o) { r(e, s(t[o], o, null, n)) }), i } }, buildArrayConstructor: function (e, t, o) { return function (n) { var i = new Array(t.length), r = function (e, t) { return i[e] = t }; return o ? e.forEach(function (e, i) { r(e, s(t[i], i, o, n)) }) : e.forEach(function (e, o) { r(e, s(t[o], o, null, n)) }), i } }, frequency: function (e, t, o) { void 0 === o && (o = !1); for (var n = 0, i = 0, r = this.getLimit(o, e.length); i < r && -1 !== (i = e.indexOf(t, i));)i += 1, n++; return n }, mostFrequent: function (e, t, o) { for (var n, i = t.length - 1; i >= 0; i--)this.frequency(e, t[i], o) > 0 && (n = t[i]); return n || t[0] }, unsafeParse: function (e, t, o) { var n, i, r = e.split(t.newline); function a(e) { var o = e.shift(); if (o.indexOf('"') >= 0) { for (var n = 0, i = 0, r = 0; e.length > 0 && (-1 !== (n = o.indexOf('"', i)) || r % 2 != 0);)-1 !== n ? (i = n + 1, r++) : o = o + t.newline + e.shift(); var a = [], l = void 0, s = 0, c = 0, p = 0, u = o.length; for (var d in o) if (o.hasOwnProperty(d)) { var h = parseInt(d), g = o[d]; 0 === h && '"' === g && (s++, c = 1), '"' === g && (s++, o[h - 1] === t.delimiter && c === h && c++), '"' === g && s % 2 == 0 && (o[h + 1] !== t.delimiter && h + 1 !== u || (p = h, l = o.substring(c, p), a.push(l), p = c = p + 2)), g === t.delimiter && s % 2 == 0 && ((p = h) > c ? (l = o.substring(c, p), a.push(l), p = c = p + 1) : p === c && (a.push(""), p = c = p + 1)) } return (p = u) >= c && (l = o.substring(c, p), a.push(l)), a } return o.split(t.delimiter) } for (t.skip > 0 && r.splice(t.skip), t.header ? (!0 === t.header ? (t.comment = a(r), t.cast = a(r), n = a(r)) : "Array" === this.getType(t.header) && (n = t.header), i = this.buildObjectConstructor(n, r[0].split(t.delimiter), t.cast)) : i = this.buildArrayConstructor(n, r[0].split(t.delimiter), t.cast); r.length > 0;) { var l = a(r); l.length > 1 && o(i(l), n[0]) } return !0 }, safeParse: function (e, t) { t.delimiter; var o = t.newline, n = e.split(o); return t.skip > 0 && n.splice(t.skip), !0 }, encodeCells: function (e, t, o) { for (var n = e.slice(0), i = 0, r = n.length; i < r; i++)-1 !== n[i].indexOf(this.quoteMark) && (n[i] = n[i].replace(this.quoteRegex, this.doubleQuoteMark)), -1 === n[i].indexOf(t) && -1 === n[i].indexOf(o) || (n[i] = this.quoteMark + n[i] + this.quoteMark); return n.join(t) }, encodeArrays: function (e, t, o) { var n = t.delimiter, i = t.newline; t.header && "Array" === this.getType(t.header) && o(this.encodeCells(t.header, n, i)); for (var r = 0, a = this.getLimit(t.limit, e.length); r < a; r++)o(this.encodeCells(e[r], n, i)); return !0 }, encodeObjects: function (e, t, o) { var n, i, r = t.delimiter, a = t.newline; for (var l in n = [], i = [], e[0]) n.push(l), i.push(e[0][l]); !0 === t.header ? o(this.encodeCells(n, r, a)) : "Array" === this.getType(t.header) && o(this.encodeCells(t.header, r, a)), o(this.encodeCells(i, r)); for (var s = 1, c = this.getLimit(t.limit, e.length); s < c; s++) { i = []; for (var p = 0, u = n.length; p < u; p++)i.push(e[s][n[p]]); o(this.encodeCells(i, r, a)) } return !0 }, parse: function (e, t, o) { var n; if ("Function" === this.getType(t) ? (o = t, t = {}) : "Function" !== this.getType(o) ? o = (n = []).push.bind(n) : n = [], t = this.assign({}, this.STANDARD_DECODE_OPTS, t), this.opts = t, !t.delimiter || !t.newline) { var i = Math.min(48, Math.floor(e.length / 20), e.length); t.delimiter = t.delimiter || this.mostFrequent(e, a, i), t.newline = t.newline || this.mostFrequent(e, l, i) } return this.unsafeParse(e, t, o) && (!(n.length > 0) || n) }, encode: function (e, t, o) { var n; return "Function" === this.getType(t) ? (o = t, t = {}) : "Function" !== this.getType(o) && (o = (n = []).push.bind(n)), (t = this.assign({}, this.STANDARD_ENCODE_OPTS, t)).skip > 0 && (e = e.slice(t.skip)), ("Array" === this.getType(e[0]) ? this.encodeArrays : this.encodeObjects)(e, t, o) && (!(n.length > 0) || n.join(t.newline)) } }, p = function () { function e() { this._csvTables = {}, this._csvTableForArr = {}, this._tableCast = {}, this._tableComment = {} } var t; return t = e, Object.defineProperty(e, "instance", { get: function () { return this._instance ? this._instance : (this._instance = new t, this._instance) }, enumerable: !1, configurable: !0 }), e.prototype.addTable = function (e, t, o) { if (!this._csvTables[e] || o) { var n = {}, i = []; c.parse(t, { header: !0 }, function (e, t) { n[e[t]] = e, i.push(e) }), this._tableCast[e] = c.opts.cast, this._tableComment[e] = c.opts.comment, this._csvTables[e] = n, this._csvTableForArr[e] = i } }, e.prototype.getTableArr = function (e) { return this._csvTableForArr[e] }, e.prototype.getTable = function (e) { return this._csvTables[e] }, e.prototype.queryOne = function (e, t, o) { var n = this.getTable(e); if (!n) return null; if (!t) return n[o]; for (var i in n) if (n.hasOwnProperty(i) && n[i][t] === o) return n[i] }, e.prototype.queryByID = function (e, t) { return this.queryOne(e, null, t) }, e.prototype.queryAll = function (e, t, o) { var n = this.getTable(e); if (!n || !t) return null; var i = {}; for (var r in n) n.hasOwnProperty(r) && n[r][t] === o && (i[r] = n[r]); return i }, e.prototype.queryIn = function (e, t, o) { var n = this.getTable(e); if (!n || !t) return null; for (var i = {}, r = Object.keys(n), a = r.length, l = 0; l < a; l++) { var s = n[r[l]]; o.indexOf(s[t]) > -1 && (i[r[l]] = s) } return i }, e.prototype.queryByCondition = function (e, t) { if (t.constructor !== Object) return null; var o = this.getTable(e); if (!o) return null; for (var n = {}, i = Object.keys(o), r = i.length, a = Object.keys(t), l = a.length, s = 0; s < r; s++) { for (var c = o[i[s]], p = !0, u = 0; u < l; u++) { var d = a[u]; p = p && t[d] === c[d] && !n[i[s]] } p && (n[i[s]] = c) } return n }, e.prototype.queryOneByCondition = function (e, t) { if (t.constructor !== Object) return null; var o = this.getTable(e); if (!o) return null; var n = Object.keys(t), i = n.length; for (var r in o) { for (var a = o[r], l = !0, s = 0; s < i; s++) { var c = n[s]; l = l && t[c] === a[c] } if (l) return a } return null }, t = n([r("CSVManager")], e) }(); o.CSVManager = p, cc._RF.pop() }, {}], flyMoney: [function (e, t, o) { "use strict"; cc._RF.push(t, "f15607U1tFJ6I3TYLUVnOpD", "flyMoney"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Manager/adManager"), l = e("../Manager/ConfigManager"), s = e("../Manager/UserProfile"), c = cc._decorator, p = c.ccclass, u = c.property, d = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.leftWing = null, t.rightWing = null, t } return i(t, e), t.prototype.start = function () { var e = this; if (this.leftWing) { var t = cc.tween(this.leftWing).to(.35, { angle: 40 }).to(.35, { angle: 0 }); cc.tween(this.leftWing).repeatForever(t).start() } if (this.rightWing) { var o = cc.tween(this.rightWing).to(.35, { angle: -40 }).to(.35, { angle: 0 }); cc.tween(this.rightWing).repeatForever(o).start() } cc.tween(this.node).to(15, { x: 1500 }).call(function () { e.finish() }).start() }, t.prototype.finish = function () { cc.Tween.stopAllByTarget(this.node), cc.Tween.stopAllByTarget(this.rightWing), cc.Tween.stopAllByTarget(this.leftWing), this.node && this.node.destroy() }, t.prototype.reward = function (e) { e && (s.userProfile.data.gold += 180, s.userProfile.save(), l.gameConfig.chooseView.updateGold(), this.finish()) }, t.prototype.onClickFlyMoney = function () { a.default.instance.showRewardAd(this, "FlyMoney") }, r([u(cc.Node)], t.prototype, "leftWing", void 0), r([u(cc.Node)], t.prototype, "rightWing", void 0), r([p], t) }(cc.Component); o.default = d, cc._RF.pop() }, { "../Manager/ConfigManager": "ConfigManager", "../Manager/UserProfile": "UserProfile", "../Manager/adManager": "adManager" }], guitaRed: [function (e, t, o) { "use strict"; cc._RF.push(t, "3af91pNSXVMV4dSd8lgOtF2", "guitaRed"); var n, i = this && this.__extends || (n = function (e, t) { return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]) })(e, t) }, function (e, t) { function o() { this.constructor = e } n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o) }), r = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }); var a = e("../Controller/HumanController"), l = e("../Manager/ConfigManager"), s = e("../Manager/EffectManager"), c = cc._decorator, p = c.ccclass, u = (c.property, function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.enemyV3 = new cc.Vec2, t.AtkFrequency = .5, t } return i(t, e), t.prototype.onEnable = function () { this.AtkFrequency = .5, this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0, this.node.angle = -90 }, t.prototype.onDisable = function () { this.node.destroyAllChildren(), this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0), this.node.getComponent(cc.RigidBody).angularVelocity = 0 }, t.prototype.onBeginContact = function (e, t, o) { var n = this; if ("4" == this.node.name) { var i = function () { var i = e.getWorldManifold(); if ("player1" == o.node.group && i.points[0] ? s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)) : "player2" == o.node.group && i.points[0] && s.effectManager.playEffect(s.EffectType.playerWeaponHit, cc.v2(i.points[0].x - cc.winSize.width / 2, i.points[0].y - cc.winSize.height / 2)), o.node.parent.getComponent(a.default)) { n.AtkFrequency >= .5 && (n.AtkFrequency = 0, o.node.parent.getComponent(a.default).setDamage(5)); var r = o.node.getComponent(cc.RigidBody); n.enemyV3 = t.node.parent.convertToWorldSpaceAR(t.node.getPosition()); var l = o.node.parent.convertToWorldSpaceAR(o.node.getPosition()), c = new cc.Vec2(0, 0); cc.Vec2.subtract(c, l, n.enemyV3), r.applyLinearImpulse(c.mul(50), r.getWorldCenter(), !0) } }; "weapons1" == t.node.group ? l.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player2" == o.node.group && i() : "weapons2" == t.node.group && (l.gameConfig.suverModel ? "suverenemy" == o.node.group && i() : "player1" == o.node.group && i()) } }, t.prototype.update = function (e) { this.AtkFrequency < .1 && (this.AtkFrequency += e) }, r([p], t) }(cc.Component)); o.default = u, cc._RF.pop() }, { "../Controller/HumanController": "HumanController", "../Manager/ConfigManager": "ConfigManager", "../Manager/EffectManager": "EffectManager" }], localConfig: [function (e, t, o) { "use strict"; cc._RF.push(t, "3e08cf+9LlE9q15c/Tocd26", "localConfig"); var n = this && this.__decorate || function (e, t, o, n) { var i, r = arguments.length, a = r < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, o, n); else for (var l = e.length - 1; l >= 0; l--)(i = e[l]) && (a = (r < 3 ? i(a) : r > 3 ? i(t, o, a) : i(t, o)) || a); return r > 3 && a && Object.defineProperty(t, o, a), a }; Object.defineProperty(o, "__esModule", { value: !0 }), o.localConfig = void 0; var i = e("./csvManager"), r = cc._decorator, a = r.ccclass, l = (r.property, function () { function e() { this._csvManager = new i.CSVManager, this._callback = new Function, this._currentLoad = 0, this._cntLoad = 0 } var t; return t = e, Object.defineProperty(e, "instance", { get: function () { return this._instance ? this._instance : (this._instance = new t, this._instance) }, enumerable: !1, configurable: !0 }), e.prototype.loadConfig = function (e) { this._callback = e, this._loadCSV() }, e.prototype._loadCSV = function () { var e = this; cc.resources.loadDir("datas", function (t, o) { if (!t) { var n = o.filter(function (e) { return ".md" !== e._native }); e._cntLoad = n.length, n.length ? n.forEach(function (t) { e.getTextData(t.name, function (o, n) { e._csvManager.addTable(t.name, n), e._tryToCallbackOnFinished() }) }) : e._tryToCallbackOnFinished() } }) }, e.prototype.loadRes = function (e, t, o) { void 0 === o && (o = function () { }), cc.resources.load(e, function (e, t) { if (e) return console.error(e.message || e), void o(e, t); o && o(null, t) }) }, e.prototype.getTextData = function (e, t) { this.loadRes("datas/" + e, null, function (e, o) { if (e) console.error(e.message || e); else { var n = o.text; t(e, n) } }) }, e.prototype.queryOne = function (e, t, o) { return this._csvManager.queryOne(e, t, o) }, e.prototype.queryByID = function (e, t) { return this._csvManager.queryByID(e, t) }, e.prototype.getTable = function (e) { return this._csvManager.getTable(e) }, e.prototype.getTableArr = function (e) { return this._csvManager.getTableArr(e) }, e.prototype.queryAll = function (e, t, o) { return this._csvManager.queryAll(e, t, o) }, e.prototype.queryIn = function (e, t, o) { return this._csvManager.queryIn(e, t, o) }, e.prototype.queryByCondition = function (e, t) { return this._csvManager.queryByCondition(e, t) }, e.prototype.queryOneByCondition = function (e, t) { return this._csvManager.queryOneByCondition(e, t) }, e.prototype._tryToCallbackOnFinished = function () { this._callback && (this._currentLoad++, this._currentLoad >= this._cntLoad && this._callback()) }, t = n([a("localConfig")], e) }()); o.localConfig = l, cc._RF.pop() }, { "./csvManager": "csvManager" }], nicknames: [function (e, t, o) { "use strict"; cc._RF.push(t, "dcecdNpalRG2ZpoDwJLQ7AZ", "nicknames"), Object.defineProperty(o, "__esModule", { value: !0 }), o.nicknames = void 0, o.nicknames = ["aaron", "abbigail", "abednego", "abel", "abiel", "abigail", "abijah", "abner", "abraham", "abram", "absalom", "ada", "adaline", "addison", "adela", "adelaide", "adelbert", "adele", "adeline", "adelphia", "adolphus", "adrian", "adriane", "adrienne", "agatha", "agnes", "aileen", "alan", "alanson", "alastair", "alazama", "albert", "alberta", "aldo", "aldrich", "aleksandr", "aleva", "alex", "alexander", "alexandra", "alexandria", "alexis", "alfonse", "alfred", "alfreda", "algernon", "alice", "alicia", "aline", "alison", "alixandra", "allan", "allen", "allisandra", "allison", "allyson", "allyssa", "almena", "almina", "almira", "alonzo", "alphinias", "althea", "alverta", "alyssa", "alzada", "amanda", "ambrose", "amelia", "amos", "anastasia", "anderson", "andre", "andrea", "andrew", "andriane", "angela", "angelica", "angelina", "ann", "anna", "anne", "annette", "annie", "anselm", "anthony", "antoinette", "antonia", "antonio", "appoline", "aquilla", "ara", "arabella", "arabelle", "araminta", "archibald", "archilles", "ariadne", "arielle", "aristotle", "arizona", "arlene", "armanda", "armena", "armilda", "arminda", "arminta", "arnold", "aron", "artelepsa", "artemus", "arthur", "arthusa", "arzada", "asahel", "asaph", "asenath", "ashley", "aubrey", "audrey", "august", "augusta", "augustina", "augustine", "augustus", "aurelia", "avarilla", "azariah", "bab", "babs", "barbara", "barbery", "barbie", "barnabas", "barney", "bart", "bartholomew", "barticus", "bazaleel", "bea", "beatrice", "becca", "beck", "bedelia", "belinda", "bella", "benedict", "benjamin", "benjy", "bernard", "berney", "bert", "bertha", "bertram", "bess", "beth", "bethena", "beverly", "bezaleel", "biddie", "bill", "billy", "blanche", "bob", "bobby", "boetius", "brad", "bradford", "bradley", "brady", "breanna", "breeanna", "brenda", "brian", "brianna", "bridget", "brittany", "brittney", "broderick", "caitlin", "caitlyn", "caldonia", "caleb", "california", "calista", "calpurnia", "calvin", "cameron", "camille", "campbell", "candace", "carlotta", "carlton", "carmellia", "carmelo", "carmon", "carol", "carolann", "caroline", "carolyn", "carrie", "carthaette", "casey", "casper", "cassandra", "cassidy", "caswell", "catherine", "cathleen", "cathy", "cecilia", "cedric", "celeste", "celinda", "charity", "charles", "charlie", "charlotte", "chauncey", "cheryl", "chesley", "chester", "chet", "chick", "chloe", "chris", "christa", "christian", "christiana", "christiano", "christina", "christine", "christoph", "christopher", "christy", "cicely", "cinderella", "cindy", "claire", "clara", "clare", "clarence", "clarinda", "clarissa", "claudia", "cleatus", "clement", "clementine", "cliff", "clifford", "clifton", "cole", "columbus", "con", "conrad", "constance", "cordelia", "corey", "corinne", "cornelia", "cornelius", "cory", "courtney", "crystal", "curtis", "cynthia", "cyrenius", "cyrus", "dahl", "dalton", "daniel", "danielle", "danny", "daphne", "darlene", "david", "deanne", "debbie", "debby", "debora", "deborah", "debra", "deidre", "delbert", "delia", "delilah", "deliverance", "della", "delores", "delpha", "delphine", "demaris", "demerias", "democrates", "dennis", "dennison", "derrick", "deuteronomy", "diana", "diane", "dicey", "dick", "dickson", "domenic", "dominic", "dominick", "donald", "donovan", "dorcus", "dorinda", "doris", "dorothea", "dorothy", "dotha", "dotty", "douglas", "drusilla", "duncan", "earnest", "ebbie", "ebenezer", "eddie", "eddy", "edgar", "edith", "edmond", "edmund", "edna", "eduardo", "edward", "edwin", "edwina", "edyth", "edythe", "egbert", "eighta", "eileen", "elaine", "elbert", "elbertson", "eleanor", "eleazer", "elena", "elias", "elijah", "eliphalel", "eliphalet", "elisa", "elisha", "eliza", "elizabeth", "ella", "ellen", "ellender", "ellie", "ellswood", "elminie", "elmira", "elnora", "eloise", "elouise", "elsie", "elswood", "elvira", "elwood", "elysia", "elze", "emanuel", "emeline", "emil", "emily", "emma", "epaphroditius", "ephraim", "erasmus", "eric", "ernest", "ernestine", "erwin", "eseneth", "essy", "estella", "estelle", "esther", "eudicy", "eudora", "eudoris", "eugene", "eunice", "euphemia", "eurydice", "eustacia", "eva", "evaline", "evangeline", "evelyn", "experience", "ezekiel", "ezideen", "ezra", "faith", "felicia", "felicity", "feltie", "ferdinand", "ferdinando", "fidelia", "flo", "flora", "florence", "floyd", "fran", "frances", "francie", "francine", "francis", "frank", "frankie", "franklin", "franklind", "freda", "frederica", "frederick", "fredericka", "frieda", "gabriel", "gabriella", "gabrielle", "garrick", "genevieve", "geoffrey", "george", "georgiana", "gerald", "geraldine", "gerhardt", "gertie", "gertrude", "gilbert", "giovanni", "gloria", "governor", "greenberry", "greggory", "gregory", "gretchen", "griselda", "gum", "gus", "gustavus", "gwen", "gwendolyn", "hamilton", "hannah", "harold", "harriet", "harry", "haseltine", "heather", "helen", "helena", "helene", "heloise", "henrietta", "henry", "hephsibah", "hepsibah", "herbert", "herman", "hermione", "hester", "hezekiah", "hiram", "honora", "hopkins", "horace", "hortense", "hosea", "howard", "hubert", "ian", "ignatius", "ignatzio", "immanuel", "india", "inez", "iona", "irene", "irvin", "irving", "irwin", "isaac", "isabel", "isabella", "isabelle", "isadora", "isaiah", "isidore", "iva", "ivan", "jackson", "jacob", "jacobus", "jacqueline", "jahoda", "jakob", "james", "jamie", "jane", "janet", "janice", "jannett", "jasper", "jayme", "jean", "jeanette", "jeanne", "jebadiah", "jedediah", "jedidiah", "jefferey", "jefferson", "jeffery", "jeffrey", "jehiel", "jehu", "jemima", "jennet", "jennifer", "jeremiah", "jeremy", "jerita", "jerry", "jessica", "jessie", "jim", "jincy", "jinsy", "joan", "joann", "joanna", "joanne", "jody", "joe", "johanna", "johannah", "johannes", "john", "johnathan", "johnathon", "jon", "jonathan", "jonathon", "joseph", "josephine", "josetta", "josey", "joshua", "josiah", "joyce", "juanita", "judah", "judith", "judson", "judy", "julia", "julian", "julias", "julie", "june", "junior", "justin", "kaitlin", "kaitlyn", "kaitlynn", "kameron", "karonhappuck", "kasey", "katarina", "kate", "katelin", "katelyn", "katherine", "kathleen", "kathryn", "katy", "kayla", "kendall", "kendra", "kendrick", "kendrik", "kenneth", "kenny", "kent", "keziah", "kim", "kimberley", "kimberly", "kingsley", "kingston", "kit", "kris", "kristel", "kristen", "kristin", "kristine", "kristopher", "kristy", "lafayette", "lamont", "laodicia", "larry", "lauren", "laurence", "laurinda", "lauryn", "laveda", "laverne", "lavina", "lavinia", "lavonia", "lavonne", "lawrence", "leanne", "lecurgus", "lemuel", "lena", "lenora", "leo", "leonard", "leonidas", "leonora", "leonore", "leroy", "leslie", "lester", "letitia", "levi", "levicy", "levone", "lib", "lidia", "lil", "lillah", "lillian", "lilly", "lincoln", "linda", "lindy", "lionel", "lisa", "littleberry", "lizzie", "lois", "lonzo", "lorenzo", "loretta", "lorraine", "lotta", "lou", "louis", "louisa", "louise", "louvinia", "lucas", "lucia", "lucias", "lucille", "lucina", "lucinda", "lucretia", "lucy", "luella", "luke", "lunetta", "lurana", "luther", "lydia", "lyndon", "mabel", "mac", "mack", "mackenzie", "maddison", "maddy", "madeline", "madie", "madison", "maegen", "magdalena", "magdelina", "mahala", "makayla", "malachi", "malcolm", "malinda", "manda", "mandie", "mandy", "manerva", "manny", "manoah", "manola", "manuel", "marcus", "margaret", "margaretta", "margarita", "marge", "margie", "marguerite", "mariah", "marian", "marie", "marietta", "marilyn", "marion", "marissa", "marjorie", "marsha", "martha", "martin", "martina", "martine", "marv", "marvin", "mary", "masayuki", "mat", "mathew", "mathilda", "matilda", "matthew", "matthias", "maud", "maureen", "maurice", "mavery", "mavine", "maximillian", "maxine", "maxwell", "may", "mckenna", "medora", "megan", "meghan", "mehitabel", "melanie", "melchizedek", "melinda", "melissa", "mellony", "melody", "melvin", "melvina", "mercedes", "merv", "mervyn", "micajah", "michael", "micheal", "michelle", "mick", "mike", "mildred", "millicent", "minerva", "minnie", "miranda", "miriam", "missy", "mitch", "mitchell", "mitzi", "mitzie", "monet", "monica", "monteleon", "montesque", "montgomery", "monty", "morris", "mortimer", "moses", "muriel", "myrtle", "nadine", "nancy", "naomi", "napoleon", "natalie", "natasha", "nathan", "nathaniel", "nelle", "nelson", "newt", "nicholas", "nicodemus", "nicole", "nikolas", "nikole", "nora", "norbert", "norbusamte", "nowell", "obadiah", "obedience", "obie", "octavia", "odell", "olive", "oliver", "olivia", "ollie", "onicyphorous", "orilla", "orlando", "orphelia", "ossy", "oswald", "otis", "pamela", "pandora", "parmelia", "parthenia", "patience", "patricia", "patrick", "patsy", "patty", "paul", "paula", "paulina", "pauline", "peggy", "pelegrine", "penelope", "percival", "peregrine", "permelia", "pernetta", "persephone", "peter", "petronella", "pheney", "pheriba", "philadelphia", "philander", "philetus", "philinda", "philip", "philipina", "phillip", "philly", "philomena", "phoebe", "pinckney", "pleasant", "pocahontas", "posthuma", "prescott", "priscilla", "providence", "prudence", "prudy", "rachel", "rafaela", "ramona", "randolph", "raphael", "ray", "raymond", "reba", "rebecca", "reggie", "regina", "reginald", "relief", "reuben", "reynold", "rhoda", "rhodella", "rhyna", "ricardo", "rich", "richard", "rick", "ricky", "robert", "roberta", "roderick", "rodger", "rodney", "roger", "roland", "ron", "ronald", "ronny", "rosa", "rosabel", "rosabella", "rosalinda", "rosalyn", "roscoe", "rose", "roseann", "roseanna", "roseanne", "rosina", "roxane", "roxanna", "roxanne", "rudolph", "rudolphus", "russell", "ryan", "sabrina", "safieel", "salome", "salvador", "samantha", "sammy", "sampson", "samson", "samuel", "samyra", "sandra", "sandy", "sanford", "sarah", "sarilla", "savannah", "scott", "sebastian", "selma", "serena", "serilla", "seymour", "shaina", "sharon", "sheila", "sheldon", "shelton", "sheridan", "sheryl", "shirley", "sibbilla", "sidney", "sigfired", "sigfrid", "sigismund", "silas", "silence", "silvester", "simeon", "simon", "smith", "socrates", "solomon", "sondra", "sophia", "sophronia", "stephan", "stephanie", "stephen", "steven", "stuart", "sue", "sullivan", "susan", "susannah", "susie", "suzanne", "sybill", "sydney", "sylvanus", "sylvester", "tabby", "tabitha", "tamarra", "tanafra", "tasha", "ted", "temperance", "terence", "teresa", "terry", "tess", "tessa", "thad", "thaddeus", "theo", "theodora", "theodore", "theodosia", "theophilus", "theotha", "theresa", "thom", "thomas", "thomasa", "tiffany", "tilford", "tim", "timmy", "timothy", "tina", "tobias", "tom", "tommy", "tony", "tranquilla", "trish", "trix", "trudy", "tryphena", "unice", "uriah", "ursula", "valentina", "valentine", "valeri", "vanburen", "vandalia", "vanessa", "vernisee", "veronica", "vic", "vicki", "victoria", "vijay", "vincent", "vincenzo", "vinson", "viola", "violetta", "virginia", "vivian", "waldo", "wallace", "wally", "walter", "washington", "webster", "wendy", "wesley", "westley", "wilber", "wilbur", "wilda", "wilfred", "wilhelm", "wilhelmina", "will", "william", "willie", "willis", "wilma", "wilson", "winfield", "winifred", "winnie", "winnifred", "winny", "winton", "woodrow", "yeona", "yoshihiko", "yulan", "yvonne", "zach", "zachariah", "zachary", "zachery", "zack", "zebedee", "zedediah", "zephaniah"], cc._RF.pop() }, {}] }, {}, ["AiCtrl", "Arrows", "BananaBall", "BormBall", "BulletBase", "CannonBall", "CardGreen", "CardPurple", "CardRed", "DragonBullet", "EnergyBall", "FlailBullet", "GantBall", "GauntletGreen", "GrappinBullet", "GreenBall", "GuitaRed", "IceMotagne", "LampGreen", "LampPurple", "LampRed", "LampWall", "Normal", "NormalBig", "NoteGreen", "NotePurple", "NoteRed", "PaintBox", "PotionBall", "Rebound", "ReboundTimer", "RpgNormal", "SaberBall", "ScepterBall", "ShareBoom", "ShareBullet", "ShieldBullet", "ShuikenBall", "SnowBullet", "SwordAce", "UpBall", "UpQuad", "BuffItemCollider", "FireCollider", "JBFireCollider", "ScieRunCollider", "SpearBallCollider", "WarerCollider", "AtkBuff", "BallScale", "BigSkills", "BoomScale", "BootsBoom", "CardRedScale", "FlailLines", "LineWidth", "RunInCenter", "RunWith", "RunWith2", "Tips", "guitaRed", "BigSkillBooms", "CameraCtrl", "GroundCollider", "HumanController", "JoyStick", "ParticleCtrl", "RotatePlatform", "RunTableCtrl", "BulletFactory", "HumanFactory", "WeaponFactory", "Human", "AudioManager", "ConfigManager", "EffectManager", "LeaderboardManager", "LevelManager", "RewardManager", "TipsManager", "TranslateLbl", "UserProfile", "WeaponManager", "adManager", "csvManager", "localConfig", "Jumper", "Portal", "Turret", "TurretBullet", "UpCollider", "ColorsItem", "SkinsItem", "WeaponsItem", "ArenaView", "AudioView", "ChooseView", "ColorsView", "EndView", "LeaderboardItem", "LeaderboardView", "LevelProgress", "MainView", "MainViewFight", "NewWeaponsView", "NicknameView", "ScrollSet", "SkinsView", "StartView", "TutorText", "ViewSize", "WeaponsView", "flyMoney", "Utils", "AkCollider", "ArbaleteCollider", "ArcCollider", "ArmCannon", "AxeCollider", "BananazookaCollider", "BatonCollider", "Blades", "BladesCollider", "BombCollider", "BoomerangCollider", "Boots", "BootsCollider", "CardCollider", "FauxCollider", "FlailCollider", "Gants", "GantsCollider", "GrappinCollider", "GuitareCollider", "Guncollider", "HammerCollider", "HarpCollider", "IceCreamCollider", "IronHandCollider", "KatannaCollider", "KnifeCollider", "LaceSpearCollider", "LampCollider", "LinghtsaberCollider", "Magnit", "PickAxeCollider", "PotionCollider", "ScepterCollider", "ScieCollider", "ShieldCollider", "ShotgunCollider", "ShurikenCollider", "SniperCollider", "SpearCollider", "SucettlCollider", "SuverAiWeaponsCollider", "SwordCollider", "ThorHammer", "Weapon", "Games", "Load", "MainCanvas", "RondIn", "RondOut", "nicknames"]);

